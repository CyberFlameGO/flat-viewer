var duckdb=(()=>{var Fp=Object.create;var hi=Object.defineProperty,Tp=Object.defineProperties,Bp=Object.getOwnPropertyDescriptor,Dp=Object.getOwnPropertyDescriptors,Ep=Object.getOwnPropertyNames,Wl=Object.getOwnPropertySymbols,Op=Object.getPrototypeOf,Yl=Object.prototype.hasOwnProperty,Mp=Object.prototype.propertyIsEnumerable;var $l=(r,t,e)=>t in r?hi(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Vr=(r,t)=>{for(var e in t||(t={}))Yl.call(t,e)&&$l(r,e,t[e]);if(Wl)for(var e of Wl(t))Mp.call(t,e)&&$l(r,e,t[e]);return r},pi=(r,t)=>Tp(r,Dp(t));var Rp=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(t,e)=>(typeof require!="undefined"?require:t)[e]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var un=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),dn=(r,t)=>{for(var e in t)hi(r,e,{get:t[e],enumerable:!0})},Xl=(r,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Ep(t))!Yl.call(r,i)&&i!==e&&hi(r,i,{get:()=>t[i],enumerable:!(n=Bp(t,i))||n.enumerable});return r};var Gl=(r,t,e)=>(e=r!=null?Fp(Op(r)):{},Xl(t||!r||!r.__esModule?hi(e,"default",{value:r,enumerable:!0}):e,r)),Up=r=>Xl(hi({},"__esModule",{value:!0}),r);var mu=un((Oy,vs)=>{var Kl,Jl,ql,Zl,Ql,tu,eu,ru,nu,gs,_a,iu,su,ou,Dn,au,cu,lu,uu,du,fu,hu,pu,ws;(function(r){var t=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(e(t,e(n)))}):typeof vs=="object"&&typeof vs.exports=="object"?r(e(t,e(vs.exports))):r(e(t));function e(n,i){return n!==t&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,o){return n[s]=i?i(s,o):o}}})(function(r){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};Kl=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");t(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},Jl=Object.assign||function(n){for(var i,s=1,o=arguments.length;s<o;s++){i=arguments[s];for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&(n[c]=i[c])}return n},ql=function(n,i){var s={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&i.indexOf(o)<0&&(s[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(n);c<o.length;c++)i.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(n,o[c])&&(s[o[c]]=n[o[c]]);return s},Zl=function(n,i,s,o){var c=arguments.length,a=c<3?i:o===null?o=Object.getOwnPropertyDescriptor(i,s):o,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,i,s,o);else for(var m=n.length-1;m>=0;m--)(f=n[m])&&(a=(c<3?f(a):c>3?f(i,s,a):f(i,s))||a);return c>3&&a&&Object.defineProperty(i,s,a),a},Ql=function(n,i){return function(s,o){i(s,o,n)}},tu=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},eu=function(n,i,s,o){function c(a){return a instanceof s?a:new s(function(f){f(a)})}return new(s||(s=Promise))(function(a,f){function m(I){try{b(o.next(I))}catch(J){f(J)}}function y(I){try{b(o.throw(I))}catch(J){f(J)}}function b(I){I.done?a(I.value):c(I.value).then(m,y)}b((o=o.apply(n,i||[])).next())})},ru=function(n,i){var s={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,c,a,f;return f={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function m(b){return function(I){return y([b,I])}}function y(b){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,c&&(a=b[0]&2?c.return:b[0]?c.throw||((a=c.return)&&a.call(c),0):c.next)&&!(a=a.call(c,b[1])).done)return a;switch(c=0,a&&(b=[b[0]&2,a.value]),b[0]){case 0:case 1:a=b;break;case 4:return s.label++,{value:b[1],done:!1};case 5:s.label++,c=b[1],b=[0];continue;case 7:b=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(b[0]===6||b[0]===2)){s=0;continue}if(b[0]===3&&(!a||b[1]>a[0]&&b[1]<a[3])){s.label=b[1];break}if(b[0]===6&&s.label<a[1]){s.label=a[1],a=b;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(b);break}a[2]&&s.ops.pop(),s.trys.pop();continue}b=i.call(n,s)}catch(I){b=[6,I],c=0}finally{o=a=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},nu=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&ws(i,n,s)},ws=Object.create?function(n,i,s,o){o===void 0&&(o=s),Object.defineProperty(n,o,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,o){o===void 0&&(o=s),n[o]=i[s]},gs=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],o=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},_a=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var o=s.call(n),c,a=[],f;try{for(;(i===void 0||i-- >0)&&!(c=o.next()).done;)a.push(c.value)}catch(m){f={error:m}}finally{try{c&&!c.done&&(s=o.return)&&s.call(o)}finally{if(f)throw f.error}}return a},iu=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(_a(arguments[i]));return n},su=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var o=Array(n),c=0,i=0;i<s;i++)for(var a=arguments[i],f=0,m=a.length;f<m;f++,c++)o[c]=a[f];return o},ou=function(n,i,s){if(s||arguments.length===2)for(var o=0,c=i.length,a;o<c;o++)(a||!(o in i))&&(a||(a=Array.prototype.slice.call(i,0,o)),a[o]=i[o]);return n.concat(a||Array.prototype.slice.call(i))},Dn=function(n){return this instanceof Dn?(this.v=n,this):new Dn(n)},au=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=s.apply(n,i||[]),c,a=[];return c={},f("next"),f("throw"),f("return"),c[Symbol.asyncIterator]=function(){return this},c;function f(Z){o[Z]&&(c[Z]=function(at){return new Promise(function(st,x){a.push([Z,at,st,x])>1||m(Z,at)})})}function m(Z,at){try{y(o[Z](at))}catch(st){J(a[0][3],st)}}function y(Z){Z.value instanceof Dn?Promise.resolve(Z.value.v).then(b,I):J(a[0][2],Z)}function b(Z){m("next",Z)}function I(Z){m("throw",Z)}function J(Z,at){Z(at),a.shift(),a.length&&m(a[0][0],a[0][1])}},cu=function(n){var i,s;return i={},o("next"),o("throw",function(c){throw c}),o("return"),i[Symbol.iterator]=function(){return this},i;function o(c,a){i[c]=n[c]?function(f){return(s=!s)?{value:Dn(n[c](f)),done:c==="return"}:a?a(f):f}:a}},lu=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof gs=="function"?gs(n):n[Symbol.iterator](),s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s);function o(a){s[a]=n[a]&&function(f){return new Promise(function(m,y){f=n[a](f),c(m,y,f.done,f.value)})}}function c(a,f,m,y){Promise.resolve(y).then(function(b){a({value:b,done:m})},f)}},uu=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var e=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};du=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&ws(i,n,s);return e(i,n),i},fu=function(n){return n&&n.__esModule?n:{default:n}},hu=function(n,i,s,o){if(s==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?o:s==="a"?o.call(n):o?o.value:i.get(n)},pu=function(n,i,s,o,c){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!c)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!c:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?c.call(n,s):c?c.value=s:i.set(n,s),s},r("__extends",Kl),r("__assign",Jl),r("__rest",ql),r("__decorate",Zl),r("__param",Ql),r("__metadata",tu),r("__awaiter",eu),r("__generator",ru),r("__exportStar",nu),r("__createBinding",ws),r("__values",gs),r("__read",_a),r("__spread",iu),r("__spreadArrays",su),r("__spreadArray",ou),r("__await",Dn),r("__asyncGenerator",au),r("__asyncDelegator",cu),r("__asyncValues",lu),r("__makeTemplateObject",uu),r("__importStar",du),r("__importDefault",fu),r("__classPrivateFieldGet",hu),r("__classPrivateFieldSet",pu)})});var pc=un(()=>{});var ef=un(()=>{});var rf=un(()=>{});var nf=un(()=>{});var sf=un(()=>{});var df=un((exports,module)=>{(function(){"use strict";var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&typeof module=="object"&&module.exports,AMD=typeof define=="function"&&define.amd,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(r){return Object.prototype.toString.call(r)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(r){return typeof r=="object"&&r.buffer&&r.buffer.constructor===ArrayBuffer});var createOutputMethod=function(r,t){return function(e){return new Sha256(t,!0).update(e)[r]()}},createMethod=function(r){var t=createOutputMethod("hex",r);NODE_JS&&(t=nodeWrap(t,r)),t.create=function(){return new Sha256(r)},t.update=function(i){return t.create().update(i)};for(var e=0;e<OUTPUT_TYPES.length;++e){var n=OUTPUT_TYPES[e];t[n]=createOutputMethod(n,r)}return t},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(r){if(typeof r=="string")return crypto.createHash(algorithm).update(r,"utf8").digest("hex");if(r==null)throw new Error(ERROR);return r.constructor===ArrayBuffer&&(r=new Uint8Array(r)),Array.isArray(r)||ArrayBuffer.isView(r)||r.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(r)).digest("hex"):method(r)};return nodeMethod},createHmacOutputMethod=function(r,t){return function(e,n){return new HmacSha256(e,t,!0).update(n)[r]()}},createHmacMethod=function(r){var t=createHmacOutputMethod("hex",r);t.create=function(i){return new HmacSha256(i,r)},t.update=function(i,s){return t.create(i).update(s)};for(var e=0;e<OUTPUT_TYPES.length;++e){var n=OUTPUT_TYPES[e];t[n]=createHmacOutputMethod(n,r)}return t};function Sha256(r,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=r}Sha256.prototype.update=function(r){if(!this.finalized){var t,e=typeof r;if(e!=="string"){if(e==="object"){if(r===null)throw new Error(ERROR);if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!Array.isArray(r)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(r)))throw new Error(ERROR)}else throw new Error(ERROR);t=!0}for(var n,i=0,s,o=r.length,c=this.blocks;i<o;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),t)for(s=this.start;i<o&&s<64;++i)c[s>>2]|=r[i]<<SHIFT[s++&3];else for(s=this.start;i<o&&s<64;++i)n=r.charCodeAt(i),n<128?c[s>>2]|=n<<SHIFT[s++&3]:n<2048?(c[s>>2]|=(192|n>>6)<<SHIFT[s++&3],c[s>>2]|=(128|n&63)<<SHIFT[s++&3]):n<55296||n>=57344?(c[s>>2]|=(224|n>>12)<<SHIFT[s++&3],c[s>>2]|=(128|n>>6&63)<<SHIFT[s++&3],c[s>>2]|=(128|n&63)<<SHIFT[s++&3]):(n=65536+((n&1023)<<10|r.charCodeAt(++i)&1023),c[s>>2]|=(240|n>>18)<<SHIFT[s++&3],c[s>>2]|=(128|n>>12&63)<<SHIFT[s++&3],c[s>>2]|=(128|n>>6&63)<<SHIFT[s++&3],c[s>>2]|=(128|n&63)<<SHIFT[s++&3]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=64?(this.block=c[16],this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var r=this.blocks,t=this.lastByteIndex;r[16]=this.block,r[t>>2]|=EXTRA[t&3],this.block=r[16],t>=56&&(this.hashed||this.hash(),r[0]=this.block,r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),r[14]=this.hBytes<<3|this.bytes>>>29,r[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var r=this.h0,t=this.h1,e=this.h2,n=this.h3,i=this.h4,s=this.h5,o=this.h6,c=this.h7,a=this.blocks,f,m,y,b,I,J,Z,at,st,x,St;for(f=16;f<64;++f)I=a[f-15],m=(I>>>7|I<<25)^(I>>>18|I<<14)^I>>>3,I=a[f-2],y=(I>>>17|I<<15)^(I>>>19|I<<13)^I>>>10,a[f]=a[f-16]+m+a[f-7]+y<<0;for(St=t&e,f=0;f<64;f+=4)this.first?(this.is224?(at=300032,I=a[0]-1413257819,c=I-150054599<<0,n=I+24177077<<0):(at=704751109,I=a[0]-210244248,c=I-1521486534<<0,n=I+143694565<<0),this.first=!1):(m=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),y=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),at=r&t,b=at^r&e^St,Z=i&s^~i&o,I=c+y+Z+K[f]+a[f],J=m+b,c=n+I<<0,n=I+J<<0),m=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),y=(c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7),st=n&r,b=st^n&t^at,Z=c&i^~c&s,I=o+y+Z+K[f+1]+a[f+1],J=m+b,o=e+I<<0,e=I+J<<0,m=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),y=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),x=e&n,b=x^e&r^st,Z=o&c^~o&i,I=s+y+Z+K[f+2]+a[f+2],J=m+b,s=t+I<<0,t=I+J<<0,m=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),y=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),St=t&e,b=St^t&n^x,Z=s&o^~s&c,I=i+y+Z+K[f+3]+a[f+3],J=m+b,i=r+I<<0,r=I+J<<0;this.h0=this.h0+r<<0,this.h1=this.h1+t<<0,this.h2=this.h2+e<<0,this.h3=this.h3+n<<0,this.h4=this.h4+i<<0,this.h5=this.h5+s<<0,this.h6=this.h6+o<<0,this.h7=this.h7+c<<0},Sha256.prototype.hex=function(){this.finalize();var r=this.h0,t=this.h1,e=this.h2,n=this.h3,i=this.h4,s=this.h5,o=this.h6,c=this.h7,a=HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[i>>28&15]+HEX_CHARS[i>>24&15]+HEX_CHARS[i>>20&15]+HEX_CHARS[i>>16&15]+HEX_CHARS[i>>12&15]+HEX_CHARS[i>>8&15]+HEX_CHARS[i>>4&15]+HEX_CHARS[i&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15];return this.is224||(a+=HEX_CHARS[c>>28&15]+HEX_CHARS[c>>24&15]+HEX_CHARS[c>>20&15]+HEX_CHARS[c>>16&15]+HEX_CHARS[c>>12&15]+HEX_CHARS[c>>8&15]+HEX_CHARS[c>>4&15]+HEX_CHARS[c&15]),a},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var r=this.h0,t=this.h1,e=this.h2,n=this.h3,i=this.h4,s=this.h5,o=this.h6,c=this.h7,a=[r>>24&255,r>>16&255,r>>8&255,r&255,t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24&255,n>>16&255,n>>8&255,n&255,i>>24&255,i>>16&255,i>>8&255,i&255,s>>24&255,s>>16&255,s>>8&255,s&255,o>>24&255,o>>16&255,o>>8&255,o&255];return this.is224||a.push(c>>24&255,c>>16&255,c>>8&255,c&255),a},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var r=new ArrayBuffer(this.is224?28:32),t=new DataView(r);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),r};function HmacSha256(r,t,e){var n,i=typeof r;if(i==="string"){var s=[],o=r.length,c=0,a;for(n=0;n<o;++n)a=r.charCodeAt(n),a<128?s[c++]=a:a<2048?(s[c++]=192|a>>6,s[c++]=128|a&63):a<55296||a>=57344?(s[c++]=224|a>>12,s[c++]=128|a>>6&63,s[c++]=128|a&63):(a=65536+((a&1023)<<10|r.charCodeAt(++n)&1023),s[c++]=240|a>>18,s[c++]=128|a>>12&63,s[c++]=128|a>>6&63,s[c++]=128|a&63);r=s}else if(i==="object"){if(r===null)throw new Error(ERROR);if(ARRAY_BUFFER&&r.constructor===ArrayBuffer)r=new Uint8Array(r);else if(!Array.isArray(r)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(r)))throw new Error(ERROR)}else throw new Error(ERROR);r.length>64&&(r=new Sha256(t,!0).update(r).array());var f=[],m=[];for(n=0;n<64;++n){var y=r[n]||0;f[n]=92^y,m[n]=54^y}Sha256.call(this,t,e),this.update(m),this.oKeyPad=f,this.inner=!0,this.sharedMemory=e}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var r=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(r),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224,AMD&&define(function(){return exports}))})()});var xy={};dn(xy,{registerWorker:()=>pf});var _u=Gl(mu(),1),{__extends:My,__assign:Ry,__rest:yu,__decorate:Uy,__param:ky,__metadata:Ny,__awaiter:A,__generator:Ly,__exportStar:Cy,__createBinding:Py,__values:Vy,__read:Hy,__spread:zy,__spreadArrays:jy,__spreadArray:Wy,__await:$,__asyncGenerator:le,__asyncDelegator:En,__asyncValues:Oe,__makeTemplateObject:$y,__importStar:Yy,__importDefault:Xy,__classPrivateFieldGet:Gy,__classPrivateFieldSet:Ky}=_u.default;var Sa={};dn(Sa,{compareArrayLike:()=>va,joinUint8Arrays:()=>Ie,memcpy:()=>Mn,rebaseValueOffsets:()=>bi,toArrayBufferView:()=>Y,toArrayBufferViewAsyncIterator:()=>ze,toArrayBufferViewIterator:()=>ir,toBigInt64Array:()=>Hp,toBigUint64Array:()=>Wp,toFloat32Array:()=>$p,toFloat32ArrayAsyncIterator:()=>am,toFloat32ArrayIterator:()=>Qp,toFloat64Array:()=>Yp,toFloat64ArrayAsyncIterator:()=>cm,toFloat64ArrayIterator:()=>tm,toInt16Array:()=>Vp,toInt16ArrayAsyncIterator:()=>nm,toInt16ArrayIterator:()=>Kp,toInt32Array:()=>fn,toInt32ArrayAsyncIterator:()=>im,toInt32ArrayIterator:()=>Jp,toInt8Array:()=>Pp,toInt8ArrayAsyncIterator:()=>rm,toInt8ArrayIterator:()=>Gp,toUint16Array:()=>zp,toUint16ArrayAsyncIterator:()=>sm,toUint16ArrayIterator:()=>qp,toUint32Array:()=>jp,toUint32ArrayAsyncIterator:()=>om,toUint32ArrayIterator:()=>Zp,toUint8Array:()=>N,toUint8ArrayAsyncIterator:()=>wa,toUint8ArrayIterator:()=>ga,toUint8ClampedArray:()=>Xp,toUint8ClampedArrayAsyncIterator:()=>lm,toUint8ClampedArrayIterator:()=>em});var kp=new TextDecoder("utf-8"),mi=r=>kp.decode(r),Np=new TextEncoder,Hr=r=>Np.encode(r);var[Zy,Ss]=(()=>{let r=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw r()}return t.asIntN=()=>{throw r()},t.asUintN=()=>{throw r()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[_i,Qy]=(()=>{let r=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw r()}static from(){throw r()}constructor(){throw r()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[On,tb]=(()=>{let r=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw r()}static from(){throw r()}constructor(){throw r()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})();var Lp=r=>typeof r=="number",bu=r=>typeof r=="boolean",Ct=r=>typeof r=="function",se=r=>r!=null&&Object(r)===r,Ve=r=>se(r)&&Ct(r.then);var He=r=>se(r)&&Ct(r[Symbol.iterator]),Me=r=>se(r)&&Ct(r[Symbol.asyncIterator]),Is=r=>se(r)&&se(r.schema);var As=r=>se(r)&&"done"in r&&"value"in r;var xs=r=>se(r)&&Ct(r.stat)&&Lp(r.fd);var Fs=r=>se(r)&&yi(r.body),Ts=r=>"_getDOMStream"in r&&"_getNodeStream"in r,gu=r=>se(r)&&Ct(r.abort)&&Ct(r.getWriter)&&!Ts(r),yi=r=>se(r)&&Ct(r.cancel)&&Ct(r.getReader)&&!Ts(r),wu=r=>se(r)&&Ct(r.end)&&Ct(r.write)&&bu(r.writable)&&!Ts(r),Bs=r=>se(r)&&Ct(r.read)&&Ct(r.pipe)&&bu(r.readable)&&!Ts(r),vu=r=>se(r)&&Ct(r.clear)&&Ct(r.bytes)&&Ct(r.position)&&Ct(r.setPosition)&&Ct(r.capacity)&&Ct(r.getBufferIdentifier)&&Ct(r.createLong);var ba=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Cp(r){let t=r[0]?[r[0]]:[],e,n,i,s;for(let o,c,a=0,f=0,m=r.length;++a<m;){if(o=t[f],c=r[a],!o||!c||o.buffer!==c.buffer||c.byteOffset<o.byteOffset){c&&(t[++f]=c);continue}if({byteOffset:e,byteLength:i}=o,{byteOffset:n,byteLength:s}=c,e+i<n||n+s<e){c&&(t[++f]=c);continue}t[f]=new Uint8Array(o.buffer,e,n-e+s)}return t}function Mn(r,t,e=0,n=t.byteLength){let i=r.byteLength,s=new Uint8Array(r.buffer,r.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(n,i));return s.set(o,e),r}function Ie(r,t){let e=Cp(r),n=e.reduce((m,y)=>m+y.byteLength,0),i,s,o,c=0,a=-1,f=Math.min(t||Number.POSITIVE_INFINITY,n);for(let m=e.length;++a<m;){if(i=e[a],s=i.subarray(0,Math.min(i.length,f-c)),f<=c+s.length){s.length<i.length?e[a]=i.subarray(s.length):s.length===i.length&&a++,o?Mn(o,s,c):o=s;break}Mn(o||(o=new Uint8Array(f)),s,c),c+=s.length}return[o||new Uint8Array(0),e.slice(a),n-(o?o.byteLength:0)]}function Y(r,t){let e=As(t)?t.value:t;return e instanceof r?r===Uint8Array?new r(e.buffer,e.byteOffset,e.byteLength):e:e?(typeof e=="string"&&(e=Hr(e)),e instanceof ArrayBuffer?new r(e):e instanceof ba?new r(e):vu(e)?Y(r,e.bytes()):ArrayBuffer.isView(e)?e.byteLength<=0?new r(0):new r(e.buffer,e.byteOffset,e.byteLength/r.BYTES_PER_ELEMENT):r.from(e)):new r(0)}var Pp=r=>Y(Int8Array,r),Vp=r=>Y(Int16Array,r),fn=r=>Y(Int32Array,r),Hp=r=>Y(_i,r),N=r=>Y(Uint8Array,r),zp=r=>Y(Uint16Array,r),jp=r=>Y(Uint32Array,r),Wp=r=>Y(On,r),$p=r=>Y(Float32Array,r),Yp=r=>Y(Float64Array,r),Xp=r=>Y(Uint8ClampedArray,r),ya=r=>(r.next(),r);function*ir(r,t){let e=function*(i){yield i},n=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof ba?e(t):He(t)?t:e(t);return yield*ya(function*(i){let s=null;do s=i.next(yield Y(r,s));while(!s.done)}(n[Symbol.iterator]())),new r}var Gp=r=>ir(Int8Array,r),Kp=r=>ir(Int16Array,r),Jp=r=>ir(Int32Array,r),ga=r=>ir(Uint8Array,r),qp=r=>ir(Uint16Array,r),Zp=r=>ir(Uint32Array,r),Qp=r=>ir(Float32Array,r),tm=r=>ir(Float64Array,r),em=r=>ir(Uint8ClampedArray,r);function ze(r,t){return le(this,arguments,function*(){if(Ve(t))return yield $(yield $(yield*En(Oe(ze(r,yield $(t))))));let n=function(o){return le(this,arguments,function*(){yield yield $(yield $(o))})},i=function(o){return le(this,arguments,function*(){yield $(yield*En(Oe(ya(function*(c){let a=null;do a=c.next(yield a==null?void 0:a.value);while(!a.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof ba?n(t):He(t)?i(t):Me(t)?t:n(t);return yield $(yield*En(Oe(ya(function(o){return le(this,arguments,function*(){let c=null;do c=yield $(o.next(yield yield $(Y(r,c))));while(!c.done)})}(s[Symbol.asyncIterator]()))))),yield $(new r)})}var rm=r=>ze(Int8Array,r),nm=r=>ze(Int16Array,r),im=r=>ze(Int32Array,r),wa=r=>ze(Uint8Array,r),sm=r=>ze(Uint16Array,r),om=r=>ze(Uint32Array,r),am=r=>ze(Float32Array,r),cm=r=>ze(Float64Array,r),lm=r=>ze(Uint8ClampedArray,r);function bi(r,t,e){if(r!==0){e=e.slice(0,t+1);for(let n=-1;++n<=t;)e[n]+=r}return e}function va(r,t){let e=0,n=r.length;if(n!==t.length)return!1;if(n>0)do if(r[e]!==t[e])return!1;while(++e<n);return!0}var Jt={fromIterable(r){return Ds(um(r))},fromAsyncIterable(r){return Ds(dm(r))},fromDOMStream(r){return Ds(fm(r))},fromNodeStream(r){return Ds(hm(r))},toDOMStream(r,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(r,t){throw new Error('"toNodeStream" not available in this environment')}},Ds=r=>(r.next(),r);function*um(r){let t,e=!1,n=[],i,s,o,c=0;function a(){return s==="peek"?Ie(n,o)[0]:([i,n,c]=Ie(n,o),i)}({cmd:s,size:o}=yield null);let f=ga(r)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-c)?f.next():f.next(o-c),!t&&i.byteLength>0&&(n.push(i),c+=i.byteLength),t||o<=c)do({cmd:s,size:o}=yield a());while(o<c);while(!t)}catch(m){(e=!0)&&typeof f.throw=="function"&&f.throw(m)}finally{e===!1&&typeof f.return=="function"&&f.return(null)}return null}function dm(r){return le(this,arguments,function*(){let e,n=!1,i=[],s,o,c,a=0;function f(){return o==="peek"?Ie(i,c)[0]:([s,i,a]=Ie(i,c),s)}({cmd:o,size:c}=yield yield $(null));let m=wa(r)[Symbol.asyncIterator]();try{do if({done:e,value:s}=Number.isNaN(c-a)?yield $(m.next()):yield $(m.next(c-a)),!e&&s.byteLength>0&&(i.push(s),a+=s.byteLength),e||c<=a)do({cmd:o,size:c}=yield yield $(f()));while(c<a);while(!e)}catch(y){(n=!0)&&typeof m.throw=="function"&&(yield $(m.throw(y)))}finally{n===!1&&typeof m.return=="function"&&(yield $(m.return(new Uint8Array(0))))}return yield $(null)})}function fm(r){return le(this,arguments,function*(){let e=!1,n=!1,i=[],s,o,c,a=0;function f(){return o==="peek"?Ie(i,c)[0]:([s,i,a]=Ie(i,c),s)}({cmd:o,size:c}=yield yield $(null));let m=new Aa(r);try{do if({done:e,value:s}=Number.isNaN(c-a)?yield $(m.read()):yield $(m.read(c-a)),!e&&s.byteLength>0&&(i.push(N(s)),a+=s.byteLength),e||c<=a)do({cmd:o,size:c}=yield yield $(f()));while(c<a);while(!e)}catch(y){(n=!0)&&(yield $(m.cancel(y)))}finally{n===!1?yield $(m.cancel()):r.locked&&m.releaseLock()}return yield $(null)})}var Aa=class{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return A(this,void 0,void 0,function*(){let{reader:e,source:n}=this;e&&(yield e.cancel(t).catch(()=>{})),n&&n.locked&&this.releaseLock()})}read(t){return A(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};let e=yield this.reader.read();return!e.done&&(e.value=N(e)),e})}},Ia=(r,t)=>{let e=i=>n([t,i]),n;return[t,e,new Promise(i=>(n=i)&&r.once(t,e))]};function hm(r){return le(this,arguments,function*(){let e=[],n="error",i=!1,s=null,o,c,a=0,f=[],m;function y(){return o==="peek"?Ie(f,c)[0]:([m,f,a]=Ie(f,c),m)}if({cmd:o,size:c}=yield yield $(null),r.isTTY)return yield yield $(new Uint8Array(0)),yield $(null);try{e[0]=Ia(r,"end"),e[1]=Ia(r,"error");do{if(e[2]=Ia(r,"readable"),[n,s]=yield $(Promise.race(e.map(I=>I[2]))),n==="error")break;if((i=n==="end")||(Number.isFinite(c-a)?(m=N(r.read(c-a)),m.byteLength<c-a&&(m=N(r.read()))):m=N(r.read()),m.byteLength>0&&(f.push(m),a+=m.byteLength)),i||c<=a)do({cmd:o,size:c}=yield yield $(y()));while(c<a)}while(!i)}finally{yield $(b(e,n==="error"?s:null))}return yield $(null);function b(I,J){return m=f=null,new Promise((Z,at)=>{for(let[st,x]of I)r.off(st,x);try{let st=r.destroy;st&&st.call(r,J),J=void 0}catch(st){J=st||J}finally{J!=null?at(J):Z()}})}})}var Vt;(function(r){r[r.V1=0]="V1",r[r.V2=1]="V2",r[r.V3=2]="V3",r[r.V4=3]="V4",r[r.V5=4]="V5"})(Vt||(Vt={}));var xt;(function(r){r[r.Sparse=0]="Sparse",r[r.Dense=1]="Dense"})(xt||(xt={}));var bt;(function(r){r[r.HALF=0]="HALF",r[r.SINGLE=1]="SINGLE",r[r.DOUBLE=2]="DOUBLE"})(bt||(bt={}));var qt;(function(r){r[r.DAY=0]="DAY",r[r.MILLISECOND=1]="MILLISECOND"})(qt||(qt={}));var G;(function(r){r[r.SECOND=0]="SECOND",r[r.MILLISECOND=1]="MILLISECOND",r[r.MICROSECOND=2]="MICROSECOND",r[r.NANOSECOND=3]="NANOSECOND"})(G||(G={}));var oe;(function(r){r[r.YEAR_MONTH=0]="YEAR_MONTH",r[r.DAY_TIME=1]="DAY_TIME",r[r.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(oe||(oe={}));var rt;(function(r){r[r.NONE=0]="NONE",r[r.Schema=1]="Schema",r[r.DictionaryBatch=2]="DictionaryBatch",r[r.RecordBatch=3]="RecordBatch",r[r.Tensor=4]="Tensor",r[r.SparseTensor=5]="SparseTensor"})(rt||(rt={}));var h;(function(r){r[r.NONE=0]="NONE",r[r.Null=1]="Null",r[r.Int=2]="Int",r[r.Float=3]="Float",r[r.Binary=4]="Binary",r[r.Utf8=5]="Utf8",r[r.Bool=6]="Bool",r[r.Decimal=7]="Decimal",r[r.Date=8]="Date",r[r.Time=9]="Time",r[r.Timestamp=10]="Timestamp",r[r.Interval=11]="Interval",r[r.List=12]="List",r[r.Struct=13]="Struct",r[r.Union=14]="Union",r[r.FixedSizeBinary=15]="FixedSizeBinary",r[r.FixedSizeList=16]="FixedSizeList",r[r.Map=17]="Map",r[r.Dictionary=-1]="Dictionary",r[r.Int8=-2]="Int8",r[r.Int16=-3]="Int16",r[r.Int32=-4]="Int32",r[r.Int64=-5]="Int64",r[r.Uint8=-6]="Uint8",r[r.Uint16=-7]="Uint16",r[r.Uint32=-8]="Uint32",r[r.Uint64=-9]="Uint64",r[r.Float16=-10]="Float16",r[r.Float32=-11]="Float32",r[r.Float64=-12]="Float64",r[r.DateDay=-13]="DateDay",r[r.DateMillisecond=-14]="DateMillisecond",r[r.TimestampSecond=-15]="TimestampSecond",r[r.TimestampMillisecond=-16]="TimestampMillisecond",r[r.TimestampMicrosecond=-17]="TimestampMicrosecond",r[r.TimestampNanosecond=-18]="TimestampNanosecond",r[r.TimeSecond=-19]="TimeSecond",r[r.TimeMillisecond=-20]="TimeMillisecond",r[r.TimeMicrosecond=-21]="TimeMicrosecond",r[r.TimeNanosecond=-22]="TimeNanosecond",r[r.DenseUnion=-23]="DenseUnion",r[r.SparseUnion=-24]="SparseUnion",r[r.IntervalDayTime=-25]="IntervalDayTime",r[r.IntervalYearMonth=-26]="IntervalYearMonth"})(h||(h={}));var Re;(function(r){r[r.OFFSET=0]="OFFSET",r[r.DATA=1]="DATA",r[r.VALIDITY=2]="VALIDITY",r[r.TYPE=3]="TYPE"})(Re||(Re={}));var Ha={};dn(Ha,{clampIndex:()=>n_,clampRange:()=>vi,createElementComparator:()=>$r});function je(r){if(r===null)return"null";if(r===void 0)return"undefined";switch(typeof r){case"number":return`${r}`;case"bigint":return`${r}`;case"string":return`"${r}"`}return typeof r[Symbol.toPrimitive]=="function"?r[Symbol.toPrimitive]("string"):ArrayBuffer.isView(r)?r instanceof BigInt64Array||r instanceof BigUint64Array?`[${[...r].map(t=>je(t))}]`:`[${r}]`:ArrayBuffer.isView(r)?`[${r}]`:JSON.stringify(r,(t,e)=>typeof e=="bigint"?`${e}`:e)}var Fa={};dn(Fa,{BN:()=>hn,bignumToBigInt:()=>Es,bignumToString:()=>zr,isArrowBigNumSymbol:()=>Su});var Su=Symbol.for("isArrowBigNum");function We(r,...t){return t.length===0?Object.setPrototypeOf(Y(this.TypedArray,r),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(r,...t),this.constructor.prototype)}We.prototype[Su]=!0;We.prototype.toJSON=function(){return`"${zr(this)}"`};We.prototype.valueOf=function(){return Iu(this)};We.prototype.toString=function(){return zr(this)};We.prototype[Symbol.toPrimitive]=function(r="default"){switch(r){case"number":return Iu(this);case"string":return zr(this);case"default":return Es(this)}return zr(this)};function Rn(...r){return We.apply(this,r)}function Un(...r){return We.apply(this,r)}function gi(...r){return We.apply(this,r)}Object.setPrototypeOf(Rn.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Un.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(gi.prototype,Object.create(Uint32Array.prototype));Object.assign(Rn.prototype,We.prototype,{constructor:Rn,signed:!0,TypedArray:Int32Array,BigIntArray:_i});Object.assign(Un.prototype,We.prototype,{constructor:Un,signed:!1,TypedArray:Uint32Array,BigIntArray:On});Object.assign(gi.prototype,We.prototype,{constructor:gi,signed:!0,TypedArray:Uint32Array,BigIntArray:On});function Iu(r){let{buffer:t,byteOffset:e,length:n,signed:i}=r,s=new On(t,e,n),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63),c=BigInt(o?1:0),a=BigInt(0);if(o){for(let f of s)c+=~f*(BigInt(1)<<BigInt(32)*a++);c*=BigInt(-1)}else for(let f of s)c+=f*(BigInt(1)<<BigInt(32)*a++);return c}var zr,Es;Ss?(Es=r=>r.byteLength===8?new r.BigIntArray(r.buffer,r.byteOffset,1)[0]:xa(r),zr=r=>r.byteLength===8?`${new r.BigIntArray(r.buffer,r.byteOffset,1)[0]}`:xa(r)):(zr=xa,Es=zr);function xa(r){let t="",e=new Uint32Array(2),n=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2),i=new Uint32Array((n=new Uint16Array(n).reverse()).buffer),s=-1,o=n.length-1;do{for(e[0]=n[s=0];s<o;)n[s++]=e[1]=e[0]/10,e[0]=(e[0]-e[1]*10<<16)+n[s];n[s]=e[1]=e[0]/10,e[0]=e[0]-e[1]*10,t=`${e[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t||"0"}var hn=class{static new(t,e){switch(e){case!0:return new Rn(t);case!1:return new Un(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case _i:return new Rn(t)}return t.byteLength===16?new gi(t):new Un(t)}static signed(t){return new Rn(t)}static unsigned(t){return new Un(t)}static decimal(t){return new gi(t)}constructor(t,e){return hn.new(t,e)}};var Au,xu,Fu,Tu,Bu,Du,Eu,Ou,Mu,Ru,Uu,ku,Nu,Lu,Cu,Pu,Vu,Hu,zu,T=class{static isNull(t){return(t==null?void 0:t.typeId)===h.Null}static isInt(t){return(t==null?void 0:t.typeId)===h.Int}static isFloat(t){return(t==null?void 0:t.typeId)===h.Float}static isBinary(t){return(t==null?void 0:t.typeId)===h.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===h.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===h.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===h.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===h.Date}static isTime(t){return(t==null?void 0:t.typeId)===h.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===h.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===h.Interval}static isList(t){return(t==null?void 0:t.typeId)===h.List}static isStruct(t){return(t==null?void 0:t.typeId)===h.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===h.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===h.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===h.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===h.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===h.Dictionary}static isDenseUnion(t){return T.isUnion(t)&&t.mode===xt.Dense}static isSparseUnion(t){return T.isUnion(t)&&t.mode===xt.Sparse}get typeId(){return h.NONE}};Au=Symbol.toStringTag;T[Au]=(r=>(r.children=null,r.ArrayType=Array,r[Symbol.toStringTag]="DataType"))(T.prototype);var ae=class extends T{toString(){return"Null"}get typeId(){return h.Null}};xu=Symbol.toStringTag;ae[xu]=(r=>r[Symbol.toStringTag]="Null")(ae.prototype);var Dt=class extends T{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return h.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}};Fu=Symbol.toStringTag;Dt[Fu]=(r=>(r.isSigned=null,r.bitWidth=null,r[Symbol.toStringTag]="Int"))(Dt.prototype);var Os=class extends Dt{constructor(){super(!0,8)}get ArrayType(){return Int8Array}},Ms=class extends Dt{constructor(){super(!0,16)}get ArrayType(){return Int16Array}},sr=class extends Dt{constructor(){super(!0,32)}get ArrayType(){return Int32Array}},Rs=class extends Dt{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}},Us=class extends Dt{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}},ks=class extends Dt{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}},Ns=class extends Dt{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}},Ls=class extends Dt{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}};Object.defineProperty(Os.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Ms.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(sr.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(Rs.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(Us.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(ks.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Ns.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(Ls.prototype,"ArrayType",{value:BigUint64Array});var ue=class extends T{constructor(t){super(),this.precision=t}get typeId(){return h.Float}get ArrayType(){switch(this.precision){case bt.HALF:return Uint16Array;case bt.SINGLE:return Float32Array;case bt.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}};Tu=Symbol.toStringTag;ue[Tu]=(r=>(r.precision=null,r[Symbol.toStringTag]="Float"))(ue.prototype);var Cs=class extends ue{constructor(){super(bt.HALF)}},Ps=class extends ue{constructor(){super(bt.SINGLE)}},Vs=class extends ue{constructor(){super(bt.DOUBLE)}};Object.defineProperty(Cs.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Ps.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(Vs.prototype,"ArrayType",{value:Float64Array});var Ir=class extends T{constructor(){super()}get typeId(){return h.Binary}toString(){return"Binary"}};Bu=Symbol.toStringTag;Ir[Bu]=(r=>(r.ArrayType=Uint8Array,r[Symbol.toStringTag]="Binary"))(Ir.prototype);var Ar=class extends T{constructor(){super()}get typeId(){return h.Utf8}toString(){return"Utf8"}};Du=Symbol.toStringTag;Ar[Du]=(r=>(r.ArrayType=Uint8Array,r[Symbol.toStringTag]="Utf8"))(Ar.prototype);var xr=class extends T{constructor(){super()}get typeId(){return h.Bool}toString(){return"Bool"}};Eu=Symbol.toStringTag;xr[Eu]=(r=>(r.ArrayType=Uint8Array,r[Symbol.toStringTag]="Bool"))(xr.prototype);var Fr=class extends T{constructor(t,e,n=128){super(),this.scale=t,this.precision=e,this.bitWidth=n}get typeId(){return h.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};Ou=Symbol.toStringTag;Fr[Ou]=(r=>(r.scale=null,r.precision=null,r.ArrayType=Uint32Array,r[Symbol.toStringTag]="Decimal"))(Fr.prototype);var Tr=class extends T{constructor(t){super(),this.unit=t}get typeId(){return h.Date}toString(){return`Date${(this.unit+1)*32}<${qt[this.unit]}>`}};Mu=Symbol.toStringTag;Tr[Mu]=(r=>(r.unit=null,r.ArrayType=Int32Array,r[Symbol.toStringTag]="Date"))(Tr.prototype);var $e=class extends T{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return h.Time}toString(){return`Time${this.bitWidth}<${G[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}};Ru=Symbol.toStringTag;$e[Ru]=(r=>(r.unit=null,r.bitWidth=null,r[Symbol.toStringTag]="Time"))($e.prototype);var Br=class extends T{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return h.Timestamp}toString(){return`Timestamp<${G[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}};Uu=Symbol.toStringTag;Br[Uu]=(r=>(r.unit=null,r.timezone=null,r.ArrayType=Int32Array,r[Symbol.toStringTag]="Timestamp"))(Br.prototype);var Dr=class extends T{constructor(t){super(),this.unit=t}get typeId(){return h.Interval}toString(){return`Interval<${oe[this.unit]}>`}};ku=Symbol.toStringTag;Dr[ku]=(r=>(r.unit=null,r.ArrayType=Int32Array,r[Symbol.toStringTag]="Interval"))(Dr.prototype);var Ye=class extends T{constructor(t){super(),this.children=[t]}get typeId(){return h.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Nu=Symbol.toStringTag;Ye[Nu]=(r=>(r.children=null,r[Symbol.toStringTag]="List"))(Ye.prototype);var pt=class extends T{constructor(t){super(),this.children=t}get typeId(){return h.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};Lu=Symbol.toStringTag;pt[Lu]=(r=>(r.children=null,r[Symbol.toStringTag]="Struct"))(pt.prototype);var Xe=class extends T{constructor(t,e,n){super(),this.mode=t,this.children=n,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return h.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}};Cu=Symbol.toStringTag;Xe[Cu]=(r=>(r.mode=null,r.typeIds=null,r.children=null,r.typeIdToChildIndex=null,r.ArrayType=Int8Array,r[Symbol.toStringTag]="Union"))(Xe.prototype);var Er=class extends T{constructor(t){super(),this.byteWidth=t}get typeId(){return h.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Pu=Symbol.toStringTag;Er[Pu]=(r=>(r.byteWidth=null,r.ArrayType=Uint8Array,r[Symbol.toStringTag]="FixedSizeBinary"))(Er.prototype);var Ge=class extends T{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return h.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};Vu=Symbol.toStringTag;Ge[Vu]=(r=>(r.children=null,r.listSize=null,r[Symbol.toStringTag]="FixedSizeList"))(Ge.prototype);var Ke=class extends T{constructor(t,e=!1){super(),this.children=[t],this.keysSorted=e}get typeId(){return h.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}};Hu=Symbol.toStringTag;Ke[Hu]=(r=>(r.children=null,r.keysSorted=null,r[Symbol.toStringTag]="Map_"))(Ke.prototype);var pm=(r=>()=>++r)(-1),Ae=class extends T{constructor(t,e,n,i){super(),this.indices=e,this.dictionary=t,this.isOrdered=i||!1,this.id=n==null?pm():typeof n=="number"?n:n.low}get typeId(){return h.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};zu=Symbol.toStringTag;Ae[zu]=(r=>(r.id=null,r.indices=null,r.isOrdered=null,r.dictionary=null,r[Symbol.toStringTag]="Dictionary"))(Ae.prototype);function xe(r){let t=r;switch(r.typeId){case h.Decimal:return r.bitWidth/32;case h.Timestamp:return 2;case h.Date:return 1+t.unit;case h.Interval:return 1+t.unit;case h.FixedSizeList:return t.listSize;case h.FixedSizeBinary:return t.byteWidth;default:return 1}}var D=class{visitMany(t,...e){return t.map((n,i)=>this.visit(n,...e.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return mm(this,t,e)}getVisitFnByTypeId(t,e=!0){return kn(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}};function mm(r,t,e=!0){return typeof t=="number"?kn(r,t,e):typeof t=="string"&&t in h?kn(r,h[t],e):t&&t instanceof T?kn(r,ju(t),e):(t==null?void 0:t.type)&&t.type instanceof T?kn(r,ju(t.type),e):kn(r,h.NONE,e)}function kn(r,t,e=!0){let n=null;switch(t){case h.Null:n=r.visitNull;break;case h.Bool:n=r.visitBool;break;case h.Int:n=r.visitInt;break;case h.Int8:n=r.visitInt8||r.visitInt;break;case h.Int16:n=r.visitInt16||r.visitInt;break;case h.Int32:n=r.visitInt32||r.visitInt;break;case h.Int64:n=r.visitInt64||r.visitInt;break;case h.Uint8:n=r.visitUint8||r.visitInt;break;case h.Uint16:n=r.visitUint16||r.visitInt;break;case h.Uint32:n=r.visitUint32||r.visitInt;break;case h.Uint64:n=r.visitUint64||r.visitInt;break;case h.Float:n=r.visitFloat;break;case h.Float16:n=r.visitFloat16||r.visitFloat;break;case h.Float32:n=r.visitFloat32||r.visitFloat;break;case h.Float64:n=r.visitFloat64||r.visitFloat;break;case h.Utf8:n=r.visitUtf8;break;case h.Binary:n=r.visitBinary;break;case h.FixedSizeBinary:n=r.visitFixedSizeBinary;break;case h.Date:n=r.visitDate;break;case h.DateDay:n=r.visitDateDay||r.visitDate;break;case h.DateMillisecond:n=r.visitDateMillisecond||r.visitDate;break;case h.Timestamp:n=r.visitTimestamp;break;case h.TimestampSecond:n=r.visitTimestampSecond||r.visitTimestamp;break;case h.TimestampMillisecond:n=r.visitTimestampMillisecond||r.visitTimestamp;break;case h.TimestampMicrosecond:n=r.visitTimestampMicrosecond||r.visitTimestamp;break;case h.TimestampNanosecond:n=r.visitTimestampNanosecond||r.visitTimestamp;break;case h.Time:n=r.visitTime;break;case h.TimeSecond:n=r.visitTimeSecond||r.visitTime;break;case h.TimeMillisecond:n=r.visitTimeMillisecond||r.visitTime;break;case h.TimeMicrosecond:n=r.visitTimeMicrosecond||r.visitTime;break;case h.TimeNanosecond:n=r.visitTimeNanosecond||r.visitTime;break;case h.Decimal:n=r.visitDecimal;break;case h.List:n=r.visitList;break;case h.Struct:n=r.visitStruct;break;case h.Union:n=r.visitUnion;break;case h.DenseUnion:n=r.visitDenseUnion||r.visitUnion;break;case h.SparseUnion:n=r.visitSparseUnion||r.visitUnion;break;case h.Dictionary:n=r.visitDictionary;break;case h.Interval:n=r.visitInterval;break;case h.IntervalDayTime:n=r.visitIntervalDayTime||r.visitInterval;break;case h.IntervalYearMonth:n=r.visitIntervalYearMonth||r.visitInterval;break;case h.FixedSizeList:n=r.visitFixedSizeList;break;case h.Map:n=r.visitMap;break}if(typeof n=="function")return n;if(!e)return()=>null;throw new Error(`Unrecognized type '${h[t]}'`)}function ju(r){switch(r.typeId){case h.Null:return h.Null;case h.Int:{let{bitWidth:t,isSigned:e}=r;switch(t){case 8:return e?h.Int8:h.Uint8;case 16:return e?h.Int16:h.Uint16;case 32:return e?h.Int32:h.Uint32;case 64:return e?h.Int64:h.Uint64}return h.Int}case h.Float:switch(r.precision){case bt.HALF:return h.Float16;case bt.SINGLE:return h.Float32;case bt.DOUBLE:return h.Float64}return h.Float;case h.Binary:return h.Binary;case h.Utf8:return h.Utf8;case h.Bool:return h.Bool;case h.Decimal:return h.Decimal;case h.Time:switch(r.unit){case G.SECOND:return h.TimeSecond;case G.MILLISECOND:return h.TimeMillisecond;case G.MICROSECOND:return h.TimeMicrosecond;case G.NANOSECOND:return h.TimeNanosecond}return h.Time;case h.Timestamp:switch(r.unit){case G.SECOND:return h.TimestampSecond;case G.MILLISECOND:return h.TimestampMillisecond;case G.MICROSECOND:return h.TimestampMicrosecond;case G.NANOSECOND:return h.TimestampNanosecond}return h.Timestamp;case h.Date:switch(r.unit){case qt.DAY:return h.DateDay;case qt.MILLISECOND:return h.DateMillisecond}return h.Date;case h.Interval:switch(r.unit){case oe.DAY_TIME:return h.IntervalDayTime;case oe.YEAR_MONTH:return h.IntervalYearMonth}return h.Interval;case h.Map:return h.Map;case h.List:return h.List;case h.Struct:return h.Struct;case h.Union:switch(r.mode){case xt.Dense:return h.DenseUnion;case xt.Sparse:return h.SparseUnion}return h.Union;case h.FixedSizeBinary:return h.FixedSizeBinary;case h.FixedSizeList:return h.FixedSizeList;case h.Dictionary:return h.Dictionary}throw new Error(`Unrecognized type '${h[r.typeId]}'`)}D.prototype.visitInt8=null;D.prototype.visitInt16=null;D.prototype.visitInt32=null;D.prototype.visitInt64=null;D.prototype.visitUint8=null;D.prototype.visitUint16=null;D.prototype.visitUint32=null;D.prototype.visitUint64=null;D.prototype.visitFloat16=null;D.prototype.visitFloat32=null;D.prototype.visitFloat64=null;D.prototype.visitDateDay=null;D.prototype.visitDateMillisecond=null;D.prototype.visitTimestampSecond=null;D.prototype.visitTimestampMillisecond=null;D.prototype.visitTimestampMicrosecond=null;D.prototype.visitTimestampNanosecond=null;D.prototype.visitTimeSecond=null;D.prototype.visitTimeMillisecond=null;D.prototype.visitTimeMicrosecond=null;D.prototype.visitTimeNanosecond=null;D.prototype.visitDenseUnion=null;D.prototype.visitSparseUnion=null;D.prototype.visitIntervalDayTime=null;D.prototype.visitIntervalYearMonth=null;var Ta={};dn(Ta,{float64ToUint16:()=>wi,uint16ToFloat64:()=>Hs});var Wu=new Float64Array(1),Nn=new Uint32Array(Wu.buffer);function Hs(r){let t=(r&31744)>>10,e=(r&1023)/1024,n=Math.pow(-1,(r&32768)>>15);switch(t){case 31:return n*(e?Number.NaN:1/0);case 0:return n*(e?6103515625e-14*e:0)}return n*Math.pow(2,t-15)*(1+e)}function wi(r){if(r!==r)return 32256;Wu[0]=r;let t=(Nn[1]&2147483648)>>16&65535,e=Nn[1]&2146435072,n=0;return e>=1089470464?Nn[0]>0?e=31744:(e=(e&2080374784)>>16,n=(Nn[1]&1048575)>>10):e<=1056964608?(n=1048576+(Nn[1]&1048575),n=1048576+(n<<(e>>20)-998)>>21,e=0):(e=e-1056964608>>10,n=(Nn[1]&1048575)+512>>10),t|e|n&65535}var L=class extends D{};function j(r){return(t,e,n)=>{if(t.setValid(e,n!=null))return r(t,e,n)}}var _m=(r,t,e)=>{r[t]=Math.trunc(e/864e5)},Ba=(r,t,e)=>{r[t]=Math.trunc(e%4294967296),r[t+1]=Math.trunc(e/4294967296)},ym=(r,t,e)=>{r[t]=Math.trunc(e*1e3%4294967296),r[t+1]=Math.trunc(e*1e3/4294967296)},bm=(r,t,e)=>{r[t]=Math.trunc(e*1e6%4294967296),r[t+1]=Math.trunc(e*1e6/4294967296)},$u=(r,t,e,n)=>{if(e+1<t.length){let{[e]:i,[e+1]:s}=t;r.set(n.subarray(0,s-i),i)}},gm=({offset:r,values:t},e,n)=>{let i=r+e;n?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Or=({values:r},t,e)=>{r[t]=e},Da=({values:r},t,e)=>{r[t]=e},Yu=({values:r},t,e)=>{r[t]=wi(e)},wm=(r,t,e)=>{switch(r.type.precision){case bt.HALF:return Yu(r,t,e);case bt.SINGLE:case bt.DOUBLE:return Da(r,t,e)}},zs=({values:r},t,e)=>{_m(r,t,e.valueOf())},js=({values:r},t,e)=>{Ba(r,t*2,e.valueOf())},Ea=({stride:r,values:t},e,n)=>{t.set(n.subarray(0,r),r*e)},vm=({values:r,valueOffsets:t},e,n)=>$u(r,t,e,n),Sm=({values:r,valueOffsets:t},e,n)=>{$u(r,t,e,Hr(n))},Oa=(r,t,e)=>{r.type.unit===qt.DAY?zs(r,t,e):js(r,t,e)},Ws=({values:r},t,e)=>Ba(r,t*2,e/1e3),$s=({values:r},t,e)=>Ba(r,t*2,e),Ys=({values:r},t,e)=>ym(r,t*2,e),Xs=({values:r},t,e)=>bm(r,t*2,e),Ma=(r,t,e)=>{switch(r.type.unit){case G.SECOND:return Ws(r,t,e);case G.MILLISECOND:return $s(r,t,e);case G.MICROSECOND:return Ys(r,t,e);case G.NANOSECOND:return Xs(r,t,e)}},Gs=({values:r},t,e)=>{r[t]=e},Ks=({values:r},t,e)=>{r[t]=e},Js=({values:r},t,e)=>{r[t]=e},qs=({values:r},t,e)=>{r[t]=e},Ra=(r,t,e)=>{switch(r.type.unit){case G.SECOND:return Gs(r,t,e);case G.MILLISECOND:return Ks(r,t,e);case G.MICROSECOND:return Js(r,t,e);case G.NANOSECOND:return qs(r,t,e)}},Ua=({values:r,stride:t},e,n)=>{r.set(n.subarray(0,t),t*e)},Im=(r,t,e)=>{let n=r.children[0],i=r.valueOffsets,s=Zt.getVisitFn(n);if(Array.isArray(e))for(let o=-1,c=i[t],a=i[t+1];c<a;)s(n,c++,e[++o]);else for(let o=-1,c=i[t],a=i[t+1];c<a;)s(n,c++,e.get(++o))},Am=(r,t,e)=>{let n=r.children[0],{valueOffsets:i}=r,s=Zt.getVisitFn(n),{[t]:o,[t+1]:c}=i,a=e instanceof Map?e.entries():Object.entries(e);for(let f of a)if(s(n,o,f),++o>=c)break},xm=(r,t)=>(e,n,i,s)=>n&&e(n,r,t[s]),Fm=(r,t)=>(e,n,i,s)=>n&&e(n,r,t.get(s)),Tm=(r,t)=>(e,n,i,s)=>n&&e(n,r,t.get(i.name)),Bm=(r,t)=>(e,n,i,s)=>n&&e(n,r,t[i.name]),Dm=(r,t,e)=>{let n=r.type.children.map(s=>Zt.getVisitFn(s.type)),i=e instanceof Map?Tm(t,e):e instanceof C?Fm(t,e):Array.isArray(e)?xm(t,e):Bm(t,e);r.type.children.forEach((s,o)=>i(n[o],r.children[o],s,o))},Em=(r,t,e)=>{r.type.mode===xt.Dense?Xu(r,t,e):Gu(r,t,e)},Xu=(r,t,e)=>{let n=r.type.typeIdToChildIndex[r.typeIds[t]],i=r.children[n];Zt.visit(i,r.valueOffsets[t],e)},Gu=(r,t,e)=>{let n=r.type.typeIdToChildIndex[r.typeIds[t]],i=r.children[n];Zt.visit(i,t,e)},Om=(r,t,e)=>{var n;(n=r.dictionary)===null||n===void 0||n.set(r.values[t],e)},ka=(r,t,e)=>{r.type.unit===oe.DAY_TIME?Zs(r,t,e):Qs(r,t,e)},Zs=({values:r},t,e)=>{r.set(e.subarray(0,2),2*t)},Qs=({values:r},t,e)=>{r[t]=e[0]*12+e[1]%12},Mm=(r,t,e)=>{let{stride:n}=r,i=r.children[0],s=Zt.getVisitFn(i);if(Array.isArray(e))for(let o=-1,c=t*n;++o<n;)s(i,c+o,e[o]);else for(let o=-1,c=t*n;++o<n;)s(i,c+o,e.get(o))};L.prototype.visitBool=j(gm);L.prototype.visitInt=j(Or);L.prototype.visitInt8=j(Or);L.prototype.visitInt16=j(Or);L.prototype.visitInt32=j(Or);L.prototype.visitInt64=j(Or);L.prototype.visitUint8=j(Or);L.prototype.visitUint16=j(Or);L.prototype.visitUint32=j(Or);L.prototype.visitUint64=j(Or);L.prototype.visitFloat=j(wm);L.prototype.visitFloat16=j(Yu);L.prototype.visitFloat32=j(Da);L.prototype.visitFloat64=j(Da);L.prototype.visitUtf8=j(Sm);L.prototype.visitBinary=j(vm);L.prototype.visitFixedSizeBinary=j(Ea);L.prototype.visitDate=j(Oa);L.prototype.visitDateDay=j(zs);L.prototype.visitDateMillisecond=j(js);L.prototype.visitTimestamp=j(Ma);L.prototype.visitTimestampSecond=j(Ws);L.prototype.visitTimestampMillisecond=j($s);L.prototype.visitTimestampMicrosecond=j(Ys);L.prototype.visitTimestampNanosecond=j(Xs);L.prototype.visitTime=j(Ra);L.prototype.visitTimeSecond=j(Gs);L.prototype.visitTimeMillisecond=j(Ks);L.prototype.visitTimeMicrosecond=j(Js);L.prototype.visitTimeNanosecond=j(qs);L.prototype.visitDecimal=j(Ua);L.prototype.visitList=j(Im);L.prototype.visitStruct=j(Dm);L.prototype.visitUnion=j(Em);L.prototype.visitDenseUnion=j(Xu);L.prototype.visitSparseUnion=j(Gu);L.prototype.visitDictionary=j(Om);L.prototype.visitInterval=j(ka);L.prototype.visitIntervalDayTime=j(Zs);L.prototype.visitIntervalYearMonth=j(Qs);L.prototype.visitFixedSizeList=j(Mm);L.prototype.visitMap=j(Am);var Zt=new L;var Je=Symbol.for("parent"),Ln=Symbol.for("rowIndex"),jr=class{constructor(t,e){return this[Je]=t,this[Ln]=e,new Proxy(this,new La)}toArray(){return Object.values(this.toJSON())}toJSON(){let t=this[Ln],e=this[Je],n=e.type.children,i={};for(let s=-1,o=n.length;++s<o;)i[n[s].name]=Mt.visit(e.children[s],t);return i}toString(){return`{${[...this].map(([t,e])=>`${je(t)}: ${je(e)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Na(this[Je],this[Ln])}},Na=class{constructor(t,e){this.childIndex=0,this.children=t.children,this.rowIndex=e,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){let t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Mt.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}};Object.defineProperties(jr.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Je]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ln]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});var La=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Je].type.children.map(e=>e.name)}has(t,e){return t[Je].type.children.findIndex(n=>n.name===e)!==-1}getOwnPropertyDescriptor(t,e){if(t[Je].type.children.findIndex(n=>n.name===e)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];let n=t[Je].type.children.findIndex(i=>i.name===e);if(n!==-1){let i=Mt.visit(t[Je].children[n],t[Ln]);return Reflect.set(t,e,i),i}}set(t,e,n){let i=t[Je].type.children.findIndex(s=>s.name===e);return i!==-1?(Zt.visit(t[Je].children[i],t[Ln],n),Reflect.set(t,e,n)):Reflect.has(t,e)||typeof e=="symbol"?Reflect.set(t,e,n):!1}};var M=class extends D{};function V(r){return(t,e)=>t.getValid(e)?r(t,e):null}var Rm=(r,t)=>864e5*r[t],Ca=(r,t)=>4294967296*r[t+1]+(r[t]>>>0),Um=(r,t)=>4294967296*(r[t+1]/1e3)+(r[t]>>>0)/1e3,km=(r,t)=>4294967296*(r[t+1]/1e6)+(r[t]>>>0)/1e6,Ku=r=>new Date(r),Nm=(r,t)=>Ku(Rm(r,t)),Lm=(r,t)=>Ku(Ca(r,t)),Cm=(r,t)=>null,Ju=(r,t,e)=>{if(e+1>=t.length)return null;let n=t[e],i=t[e+1];return r.subarray(n,i)},Pm=({offset:r,values:t},e)=>{let n=r+e;return(t[n>>3]&1<<n%8)!==0},qu=({values:r},t)=>Nm(r,t),Zu=({values:r},t)=>Lm(r,t*2),Wr=({stride:r,values:t},e)=>t[r*e],Vm=({stride:r,values:t},e)=>Hs(t[r*e]),Qu=({values:r},t)=>r[t],Hm=({stride:r,values:t},e)=>t.subarray(r*e,r*(e+1)),zm=({values:r,valueOffsets:t},e)=>Ju(r,t,e),jm=({values:r,valueOffsets:t},e)=>{let n=Ju(r,t,e);return n!==null?mi(n):null},Wm=({values:r},t)=>r[t],$m=({type:r,values:t},e)=>r.precision!==bt.HALF?t[e]:Hs(t[e]),Ym=(r,t)=>r.type.unit===qt.DAY?qu(r,t):Zu(r,t),td=({values:r},t)=>1e3*Ca(r,t*2),ed=({values:r},t)=>Ca(r,t*2),rd=({values:r},t)=>Um(r,t*2),nd=({values:r},t)=>km(r,t*2),Xm=(r,t)=>{switch(r.type.unit){case G.SECOND:return td(r,t);case G.MILLISECOND:return ed(r,t);case G.MICROSECOND:return rd(r,t);case G.NANOSECOND:return nd(r,t)}},id=({values:r},t)=>r[t],sd=({values:r},t)=>r[t],od=({values:r},t)=>r[t],ad=({values:r},t)=>r[t],Gm=(r,t)=>{switch(r.type.unit){case G.SECOND:return id(r,t);case G.MILLISECOND:return sd(r,t);case G.MICROSECOND:return od(r,t);case G.NANOSECOND:return ad(r,t)}},Km=({values:r,stride:t},e)=>hn.decimal(r.subarray(t*e,t*(e+1))),Jm=(r,t)=>{let{valueOffsets:e,stride:n,children:i}=r,{[t*n]:s,[t*n+1]:o}=e,a=i[0].slice(s,o-s);return new C([a])},qm=(r,t)=>{let{valueOffsets:e,children:n}=r,{[t]:i,[t+1]:s}=e,o=n[0];return new or(o.slice(i,s-i))},Zm=(r,t)=>new jr(r,t),Qm=(r,t)=>r.type.mode===xt.Dense?cd(r,t):ld(r,t),cd=(r,t)=>{let e=r.type.typeIdToChildIndex[r.typeIds[t]],n=r.children[e];return Mt.visit(n,r.valueOffsets[t])},ld=(r,t)=>{let e=r.type.typeIdToChildIndex[r.typeIds[t]],n=r.children[e];return Mt.visit(n,t)},t_=(r,t)=>{var e;return(e=r.dictionary)===null||e===void 0?void 0:e.get(r.values[t])},e_=(r,t)=>r.type.unit===oe.DAY_TIME?ud(r,t):dd(r,t),ud=({values:r},t)=>r.subarray(2*t,2*(t+1)),dd=({values:r},t)=>{let e=r[t],n=new Int32Array(2);return n[0]=Math.trunc(e/12),n[1]=Math.trunc(e%12),n},r_=(r,t)=>{let{stride:e,children:n}=r,s=n[0].slice(t*e,e);return new C([s])};M.prototype.visitNull=V(Cm);M.prototype.visitBool=V(Pm);M.prototype.visitInt=V(Wm);M.prototype.visitInt8=V(Wr);M.prototype.visitInt16=V(Wr);M.prototype.visitInt32=V(Wr);M.prototype.visitInt64=V(Qu);M.prototype.visitUint8=V(Wr);M.prototype.visitUint16=V(Wr);M.prototype.visitUint32=V(Wr);M.prototype.visitUint64=V(Qu);M.prototype.visitFloat=V($m);M.prototype.visitFloat16=V(Vm);M.prototype.visitFloat32=V(Wr);M.prototype.visitFloat64=V(Wr);M.prototype.visitUtf8=V(jm);M.prototype.visitBinary=V(zm);M.prototype.visitFixedSizeBinary=V(Hm);M.prototype.visitDate=V(Ym);M.prototype.visitDateDay=V(qu);M.prototype.visitDateMillisecond=V(Zu);M.prototype.visitTimestamp=V(Xm);M.prototype.visitTimestampSecond=V(td);M.prototype.visitTimestampMillisecond=V(ed);M.prototype.visitTimestampMicrosecond=V(rd);M.prototype.visitTimestampNanosecond=V(nd);M.prototype.visitTime=V(Gm);M.prototype.visitTimeSecond=V(id);M.prototype.visitTimeMillisecond=V(sd);M.prototype.visitTimeMicrosecond=V(od);M.prototype.visitTimeNanosecond=V(ad);M.prototype.visitDecimal=V(Km);M.prototype.visitList=V(Jm);M.prototype.visitStruct=V(Zm);M.prototype.visitUnion=V(Qm);M.prototype.visitDenseUnion=V(cd);M.prototype.visitSparseUnion=V(ld);M.prototype.visitDictionary=V(t_);M.prototype.visitInterval=V(e_);M.prototype.visitIntervalDayTime=V(ud);M.prototype.visitIntervalYearMonth=V(dd);M.prototype.visitFixedSizeList=V(r_);M.prototype.visitMap=V(qm);var Mt=new M;var Ue=Symbol.for("keys"),Cn=Symbol.for("vals"),or=class{constructor(t){return this[Ue]=new C([t.children[0]]).memoize(),this[Cn]=t.children[1],new Proxy(this,new Va)}[Symbol.iterator](){return new Pa(this[Ue],this[Cn])}get size(){return this[Ue].length}toArray(){return Object.values(this.toJSON())}toJSON(){let t=this[Ue],e=this[Cn],n={};for(let i=-1,s=t.length;++i<s;)n[t.get(i)]=Mt.visit(e,i);return n}toString(){return`{${[...this].map(([t,e])=>`${je(t)}: ${je(e)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}},Pa=class{constructor(t,e){this.keys=t,this.vals=e,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){let t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Mt.visit(this.vals,t)]})}},Va=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ue].toArray().map(String)}has(t,e){return t[Ue].includes(e)}getOwnPropertyDescriptor(t,e){if(t[Ue].indexOf(e)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];let n=t[Ue].indexOf(e);if(n!==-1){let i=Mt.visit(Reflect.get(t,Cn),n);return Reflect.set(t,e,i),i}}set(t,e,n){let i=t[Ue].indexOf(e);return i!==-1?(Zt.visit(Reflect.get(t,Cn),i,n),Reflect.set(t,e,n)):Reflect.has(t,e)?Reflect.set(t,e,n):!1}};Object.defineProperties(or.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ue]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Cn]:{writable:!0,enumerable:!1,configurable:!1,value:null}});function n_(r,t,e){let n=r.length,i=t>-1?t:n+t%n;return e?e(r,i):i}var fd;function vi(r,t,e,n){let{length:i=0}=r,s=typeof t!="number"?0:t,o=typeof e!="number"?i:e;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(fd=s,s=o,o=fd),o>i&&(o=i),n?n(r,s,o):[s,o]}var hd=r=>r!==r;function $r(r){if(typeof r!=="object"||r===null)return hd(r)?hd:e=>e===r;if(r instanceof Date){let e=r.valueOf();return n=>n instanceof Date?n.valueOf()===e:!1}return ArrayBuffer.isView(r)?e=>e?va(r,e):!1:r instanceof Map?s_(r):Array.isArray(r)?i_(r):r instanceof C?o_(r):a_(r,!0)}function i_(r){let t=[];for(let e=-1,n=r.length;++e<n;)t[e]=$r(r[e]);return to(t)}function s_(r){let t=-1,e=[];for(let n of r.values())e[++t]=$r(n);return to(e)}function o_(r){let t=[];for(let e=-1,n=r.length;++e<n;)t[e]=$r(r.get(e));return to(t)}function a_(r,t=!1){let e=Object.keys(r);if(!t&&e.length===0)return()=>!1;let n=[];for(let i=-1,s=e.length;++i<s;)n[i]=$r(r[e[i]]);return to(n,e)}function to(r,t){return e=>{if(!e||typeof e!="object")return!1;switch(e.constructor){case Array:return c_(r,e);case Map:return pd(r,e,e.keys());case or:case jr:case Object:case void 0:return pd(r,e,t||Object.keys(e))}return e instanceof C?l_(r,e):!1}}function c_(r,t){let e=r.length;if(t.length!==e)return!1;for(let n=-1;++n<e;)if(!r[n](t[n]))return!1;return!0}function l_(r,t){let e=r.length;if(t.length!==e)return!1;for(let n=-1;++n<e;)if(!r[n](t.get(n)))return!1;return!0}function pd(r,t,e){let n=e[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator](),o=0,c=r.length,a=s.next(),f=n.next(),m=i.next();for(;o<c&&!f.done&&!m.done&&!a.done&&!(f.value!==m.value||!r[o](a.value));++o,f=n.next(),m=i.next(),a=s.next());return o===c&&f.done&&m.done&&a.done?!0:(n.return&&n.return(),i.return&&i.return(),s.return&&s.return(),!1)}var za={};dn(za,{BitIterator:()=>pn,getBit:()=>md,getBool:()=>ro,packBools:()=>mn,popcnt_array:()=>_d,popcnt_bit_range:()=>Si,popcnt_uint32:()=>eo,setBool:()=>u_,truncateBitmap:()=>Pn});function ro(r,t,e,n){return(e&1<<n)!==0}function md(r,t,e,n){return(e&1<<n)>>n}function u_(r,t,e){return e?!!(r[t>>3]|=1<<t%8)||!0:!(r[t>>3]&=~(1<<t%8))&&!1}function Pn(r,t,e){let n=e.byteLength+7&-8;if(r>0||e.byteLength<n){let i=new Uint8Array(n);return i.set(r%8===0?e.subarray(r>>3):mn(new pn(e,r,t,null,ro)).subarray(0,n)),i}return e}function mn(r){let t=[],e=0,n=0,i=0;for(let o of r)o&&(i|=1<<n),++n===8&&(t[e++]=i,i=n=0);(e===0||n>0)&&(t[e++]=i);let s=new Uint8Array(t.length+7&-8);return s.set(t),s}var pn=class{constructor(t,e,n,i,s){this.bytes=t,this.length=n,this.context=i,this.get=s,this.bit=e%8,this.byteIndex=e>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}};function Si(r,t,e){if(e-t<=0)return 0;if(e-t<8){let s=0;for(let o of new pn(r,t,e-t,r,md))s+=o;return s}let n=e>>3<<3,i=t+(t%8===0?0:8-t%8);return Si(r,t,i)+Si(r,n,e)+_d(r,i>>3,n-i>>3)}function _d(r,t,e){let n=0,i=Math.trunc(t),s=new DataView(r.buffer,r.byteOffset,r.byteLength),o=e===void 0?r.byteLength:i+e;for(;o-i>=4;)n+=eo(s.getUint32(i)),i+=4;for(;o-i>=2;)n+=eo(s.getUint16(i)),i+=2;for(;o-i>=1;)n+=eo(s.getUint8(i)),i+=1;return n}function eo(r){let t=Math.trunc(r);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}var d_=-1,nt=class{constructor(t,e,n,i,s,o=[],c){this.type=t,this.children=o,this.dictionary=c,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let a;s instanceof nt?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=xe(t),s&&((a=s[0])&&(this.valueOffsets=a),(a=s[1])&&(this.values=a),(a=s[2])&&(this.nullBitmap=a),(a=s[3])&&(this.typeIds=a))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0,{valueOffsets:e,values:n,nullBitmap:i,typeIds:s}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,c)=>o+c.byteLength,t)}get nullCount(){let t=this._nullCount,e;return t<=d_&&(e=this.nullBitmap)&&(this._nullCount=t=this.length-Si(e,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){let e=this.offset+t;return(this.nullBitmap[e>>3]&1<<e%8)!==0}return!0}setValid(t,e){if(!this.nullable)return e;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){let{nullBitmap:a}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:a,_nullCount:0})}let{nullBitmap:n,offset:i}=this,s=i+t>>3,o=(i+t)%8,c=n[s]>>o&1;return e?c===0&&(n[s]|=1<<o,this._nullCount=this.nullCount+1):c===1&&(n[s]&=~(1<<o),this._nullCount=this.nullCount-1),e}clone(t=this.type,e=this.offset,n=this.length,i=this._nullCount,s=this,o=this.children){return new nt(t,e,n,i,s,o,this.dictionary)}slice(t,e){let{stride:n,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,c=i===16?n:1,a=this._sliceBuffers(t,e,n,i);return this.clone(this.type,this.offset+t,e,o,a,s.length===0||this.valueOffsets?s:this._sliceChildren(s,c*t,c*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===h.Null)return this.clone(this.type,0,t,0);let{length:e,nullCount:n}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);i[e>>3]=(1<<e-(e&-8))-1,n>0&&i.set(Pn(this.offset,e,this.nullBitmap),0);let s=this.buffers;return s[Re.VALIDITY]=i,this.clone(this.type,0,t,n+(t-e),s)}_sliceBuffers(t,e,n,i){let s,{buffers:o}=this;return(s=o[Re.TYPE])&&(o[Re.TYPE]=s.subarray(t,t+e)),(s=o[Re.OFFSET])&&(o[Re.OFFSET]=s.subarray(t,t+e+1))||(s=o[Re.DATA])&&(o[Re.DATA]=i===6?s:s.subarray(n*t,n*(t+e))),o}_sliceChildren(t,e,n){return t.map(i=>i.slice(e,n))}};nt.prototype.children=Object.freeze([]);var _n=class extends D{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){let{["type"]:e,["offset"]:n=0,["length"]:i=0}=t;return new nt(e,n,i,0)}visitBool(t){let{["type"]:e,["offset"]:n=0}=t,i=N(t.nullBitmap),s=Y(e.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(e,n,o,c,[void 0,s,i])}visitInt(t){let{["type"]:e,["offset"]:n=0}=t,i=N(t.nullBitmap),s=Y(e.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(e,n,o,c,[void 0,s,i])}visitFloat(t){let{["type"]:e,["offset"]:n=0}=t,i=N(t.nullBitmap),s=Y(e.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(e,n,o,c,[void 0,s,i])}visitUtf8(t){let{["type"]:e,["offset"]:n=0}=t,i=N(t.data),s=N(t.nullBitmap),o=fn(t.valueOffsets),{["length"]:c=o.length-1,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(e,n,c,a,[o,i,s])}visitBinary(t){let{["type"]:e,["offset"]:n=0}=t,i=N(t.data),s=N(t.nullBitmap),o=fn(t.valueOffsets),{["length"]:c=o.length-1,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(e,n,c,a,[o,i,s])}visitFixedSizeBinary(t){let{["type"]:e,["offset"]:n=0}=t,i=N(t.nullBitmap),s=Y(e.ArrayType,t.data),{["length"]:o=s.length/xe(e),["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(e,n,o,c,[void 0,s,i])}visitDate(t){let{["type"]:e,["offset"]:n=0}=t,i=N(t.nullBitmap),s=Y(e.ArrayType,t.data),{["length"]:o=s.length/xe(e),["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(e,n,o,c,[void 0,s,i])}visitTimestamp(t){let{["type"]:e,["offset"]:n=0}=t,i=N(t.nullBitmap),s=Y(e.ArrayType,t.data),{["length"]:o=s.length/xe(e),["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(e,n,o,c,[void 0,s,i])}visitTime(t){let{["type"]:e,["offset"]:n=0}=t,i=N(t.nullBitmap),s=Y(e.ArrayType,t.data),{["length"]:o=s.length/xe(e),["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(e,n,o,c,[void 0,s,i])}visitDecimal(t){let{["type"]:e,["offset"]:n=0}=t,i=N(t.nullBitmap),s=Y(e.ArrayType,t.data),{["length"]:o=s.length/xe(e),["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(e,n,o,c,[void 0,s,i])}visitList(t){let{["type"]:e,["offset"]:n=0,["child"]:i}=t,s=N(t.nullBitmap),o=fn(t.valueOffsets),{["length"]:c=o.length-1,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(e,n,c,a,[o,void 0,s],[i])}visitStruct(t){let{["type"]:e,["offset"]:n=0,["children"]:i=[]}=t,s=N(t.nullBitmap),{length:o=i.reduce((a,{length:f})=>Math.max(a,f),0),nullCount:c=t.nullBitmap?-1:0}=t;return new nt(e,n,o,c,[void 0,void 0,s],i)}visitUnion(t){let{["type"]:e,["offset"]:n=0,["children"]:i=[]}=t,s=N(t.nullBitmap),o=Y(e.ArrayType,t.typeIds),{["length"]:c=o.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;if(T.isSparseUnion(e))return new nt(e,n,c,a,[void 0,void 0,s,o],i);let f=fn(t.valueOffsets);return new nt(e,n,c,a,[f,void 0,s,o],i)}visitDictionary(t){let{["type"]:e,["offset"]:n=0}=t,i=N(t.nullBitmap),s=Y(e.indices.ArrayType,t.data),{["dictionary"]:o=new C([new _n().visit({type:e.dictionary})])}=t,{["length"]:c=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(e,n,c,a,[void 0,s,i],[],o)}visitInterval(t){let{["type"]:e,["offset"]:n=0}=t,i=N(t.nullBitmap),s=Y(e.ArrayType,t.data),{["length"]:o=s.length/xe(e),["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(e,n,o,c,[void 0,s,i])}visitFixedSizeList(t){let{["type"]:e,["offset"]:n=0,["child"]:i=new _n().visit({type:e.valueType})}=t,s=N(t.nullBitmap),{["length"]:o=i.length/xe(e),["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(e,n,o,c,[void 0,void 0,s],[i])}visitMap(t){let{["type"]:e,["offset"]:n=0,["child"]:i=new _n().visit({type:e.childType})}=t,s=N(t.nullBitmap),o=fn(t.valueOffsets),{["length"]:c=o.length-1,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(e,n,c,a,[o,void 0,s],[i])}};function P(r){return new _n().visit(r)}var Ii=class{constructor(t=0,e){this.numChunks=t,this.getChunkIterator=e,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){let t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}};function no(r){return r.reduce((t,e)=>t+e.nullCount,0)}function io(r){return r.reduce((t,e,n)=>(t[n+1]=t[n]+e.length,t),new Uint32Array(r.length+1))}function so(r,t,e,n){let i=[];for(let s=-1,o=r.length;++s<o;){let c=r[s],a=t[s],{length:f}=c;if(a>=n)break;if(e>=a+f)continue;if(a>=e&&a+f<=n){i.push(c);continue}let m=Math.max(0,e-a),y=Math.min(n-a,f);i.push(c.slice(m,y-m))}return i.length===0&&i.push(r[0].slice(0,0)),i}function ja(r,t,e,n){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return e<t[o]?n(r,i,e-t[i]):null;s=i+Math.trunc((o-i)*.5),e<t[s]?o=s:i=s}while(i<o)}function Ai(r,t){return r.getValid(t)}function Yr(r){function t(e,n,i){return r(e[n],i)}return function(e){let n=this.data;return ja(n,this._offsets,e,t)}}function oo(r){let t;function e(n,i,s){return r(n[i],s,t)}return function(n,i){let s=this.data;t=i;let o=ja(s,this._offsets,n,e);return t=void 0,o}}function ao(r){let t;function e(n,i,s){let o=s,c=0,a=0;for(let f=i-1,m=n.length;++f<m;){let y=n[f];if(~(c=r(y,t,o)))return a+c;o=0,a+=y.length}return-1}return function(n,i){t=n;let s=this.data,o=typeof i!="number"?e(s,0,0):ja(s,this._offsets,i,e);return t=void 0,o}}var R=class extends D{};function f_(r,t){return t===null&&r.length>0?0:-1}function h_(r,t){let{nullBitmap:e}=r;if(!e||r.nullCount<=0)return-1;let n=0;for(let i of new pn(e,r.offset+(t||0),r.length,e,ro)){if(!i)return n;++n}return-1}function X(r,t,e){if(t===void 0)return-1;if(t===null)return h_(r,e);let n=Mt.getVisitFn(r),i=$r(t);for(let s=(e||0)-1,o=r.length;++s<o;)if(i(n(r,s)))return s;return-1}function yd(r,t,e){let n=Mt.getVisitFn(r),i=$r(t);for(let s=(e||0)-1,o=r.length;++s<o;)if(i(n(r,s)))return s;return-1}R.prototype.visitNull=f_;R.prototype.visitBool=X;R.prototype.visitInt=X;R.prototype.visitInt8=X;R.prototype.visitInt16=X;R.prototype.visitInt32=X;R.prototype.visitInt64=X;R.prototype.visitUint8=X;R.prototype.visitUint16=X;R.prototype.visitUint32=X;R.prototype.visitUint64=X;R.prototype.visitFloat=X;R.prototype.visitFloat16=X;R.prototype.visitFloat32=X;R.prototype.visitFloat64=X;R.prototype.visitUtf8=X;R.prototype.visitBinary=X;R.prototype.visitFixedSizeBinary=X;R.prototype.visitDate=X;R.prototype.visitDateDay=X;R.prototype.visitDateMillisecond=X;R.prototype.visitTimestamp=X;R.prototype.visitTimestampSecond=X;R.prototype.visitTimestampMillisecond=X;R.prototype.visitTimestampMicrosecond=X;R.prototype.visitTimestampNanosecond=X;R.prototype.visitTime=X;R.prototype.visitTimeSecond=X;R.prototype.visitTimeMillisecond=X;R.prototype.visitTimeMicrosecond=X;R.prototype.visitTimeNanosecond=X;R.prototype.visitDecimal=X;R.prototype.visitList=X;R.prototype.visitStruct=X;R.prototype.visitUnion=X;R.prototype.visitDenseUnion=yd;R.prototype.visitSparseUnion=yd;R.prototype.visitDictionary=X;R.prototype.visitInterval=X;R.prototype.visitIntervalDayTime=X;R.prototype.visitIntervalYearMonth=X;R.prototype.visitFixedSizeList=X;R.prototype.visitMap=X;var yn=new R;var U=class extends D{};function H(r){let{type:t}=r;if(r.nullCount===0&&r.stride===1&&(t.typeId===h.Timestamp||t instanceof Dt&&t.bitWidth!==64||t instanceof $e&&t.bitWidth!==64||t instanceof ue&&t.precision!==bt.HALF))return new Ii(r.data.length,n=>{let i=r.data[n];return i.values.subarray(0,i.length)[Symbol.iterator]()});let e=0;return new Ii(r.data.length,n=>{let s=r.data[n].length,o=r.slice(e,e+s);return e+=s,new Wa(o)})}var Wa=class{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}};U.prototype.visitNull=H;U.prototype.visitBool=H;U.prototype.visitInt=H;U.prototype.visitInt8=H;U.prototype.visitInt16=H;U.prototype.visitInt32=H;U.prototype.visitInt64=H;U.prototype.visitUint8=H;U.prototype.visitUint16=H;U.prototype.visitUint32=H;U.prototype.visitUint64=H;U.prototype.visitFloat=H;U.prototype.visitFloat16=H;U.prototype.visitFloat32=H;U.prototype.visitFloat64=H;U.prototype.visitUtf8=H;U.prototype.visitBinary=H;U.prototype.visitFixedSizeBinary=H;U.prototype.visitDate=H;U.prototype.visitDateDay=H;U.prototype.visitDateMillisecond=H;U.prototype.visitTimestamp=H;U.prototype.visitTimestampSecond=H;U.prototype.visitTimestampMillisecond=H;U.prototype.visitTimestampMicrosecond=H;U.prototype.visitTimestampNanosecond=H;U.prototype.visitTime=H;U.prototype.visitTimeSecond=H;U.prototype.visitTimeMillisecond=H;U.prototype.visitTimeMicrosecond=H;U.prototype.visitTimeNanosecond=H;U.prototype.visitDecimal=H;U.prototype.visitList=H;U.prototype.visitStruct=H;U.prototype.visitUnion=H;U.prototype.visitDenseUnion=H;U.prototype.visitSparseUnion=H;U.prototype.visitDictionary=H;U.prototype.visitInterval=H;U.prototype.visitIntervalDayTime=H;U.prototype.visitIntervalYearMonth=H;U.prototype.visitFixedSizeList=H;U.prototype.visitMap=H;var Vn=new U;var p_=(r,t)=>r+t,ar=class extends D{visitNull(t,e){return 0}visitInt(t,e){return t.type.bitWidth/8}visitFloat(t,e){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,e){return 1/8}visitDecimal(t,e){return t.type.bitWidth/8}visitDate(t,e){return(t.type.unit+1)*4}visitTime(t,e){return t.type.bitWidth/8}visitTimestamp(t,e){return t.type.unit===G.SECOND?4:8}visitInterval(t,e){return(t.type.unit+1)*4}visitStruct(t,e){return t.children.reduce((n,i)=>n+Fe.visit(i,e),0)}visitFixedSizeBinary(t,e){return t.type.byteWidth}visitMap(t,e){return 8+t.children.reduce((n,i)=>n+Fe.visit(i,e),0)}visitDictionary(t,e){var n;return t.type.indices.bitWidth/8+(((n=t.dictionary)===null||n===void 0?void 0:n.getByteLength(t.values[e]))||0)}},m_=({valueOffsets:r},t)=>8+(r[t+1]-r[t]),__=({valueOffsets:r},t)=>8+(r[t+1]-r[t]),y_=({valueOffsets:r,stride:t,children:e},n)=>{let i=e[0],{[n*t]:s}=r,{[n*t+1]:o}=r,c=Fe.getVisitFn(i.type),a=i.slice(s,o-s),f=8;for(let m=-1,y=o-s;++m<y;)f+=c(a,m);return f},b_=({stride:r,children:t},e)=>{let n=t[0],i=n.slice(e*r,r),s=Fe.getVisitFn(n.type),o=0;for(let c=-1,a=i.length;++c<a;)o+=s(i,c);return o},g_=(r,t)=>r.type.mode===xt.Dense?bd(r,t):gd(r,t),bd=({type:r,children:t,typeIds:e,valueOffsets:n},i)=>{let s=r.typeIdToChildIndex[e[i]];return 8+Fe.visit(t[s],n[i])},gd=({children:r},t)=>4+Fe.visitMany(r,r.map(()=>t)).reduce(p_,0);ar.prototype.visitUtf8=m_;ar.prototype.visitBinary=__;ar.prototype.visitList=y_;ar.prototype.visitFixedSizeList=b_;ar.prototype.visitUnion=g_;ar.prototype.visitDenseUnion=bd;ar.prototype.visitSparseUnion=gd;var Fe=new ar;var wd,vd={},Sd={},C=class{constructor(t){var e,n,i;let s=t[0]instanceof C?t.flatMap(c=>c.data):t;if(s.some(c=>!(c instanceof nt)))throw new TypeError("Vector constructor expects an Array of Data instances.");let o=(e=s[0])===null||e===void 0?void 0:e.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{let{get:c,set:a,indexOf:f,byteLength:m}=vd[o.typeId],y=s[0];this.isValid=b=>Ai(y,b),this.get=b=>c(y,b),this.set=(b,I)=>a(y,b,I),this.indexOf=b=>f(y,b),this.getByteLength=b=>m(y,b),this._offsets=[0,y.length];break}default:Object.setPrototypeOf(this,Sd[o.typeId]),this._offsets=io(s);break}this.data=s,this.type=o,this.stride=xe(o),this.numChildren=(i=(n=o.children)===null||n===void 0?void 0:n.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,e)=>t+e.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=no(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${h[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}includes(t,e){return this.indexOf(t,e)>0}getByteLength(t){return 0}[Symbol.iterator](){return Vn.visit(this)}concat(...t){return new C(this.data.concat(t.flatMap(e=>e.data).flat(Number.POSITIVE_INFINITY)))}slice(t,e){return new C(vi(this,t,e,({data:n,_offsets:i},s,o)=>so(n,i,s,o)))}toJSON(){return[...this]}toArray(){let{type:t,data:e,length:n,stride:i,ArrayType:s}=this;switch(t.typeId){case h.Int:case h.Float:case h.Decimal:case h.Time:case h.Timestamp:switch(e.length){case 0:return new s;case 1:return e[0].values.subarray(0,n*i);default:return e.reduce((o,{values:c})=>(o.array.set(c,o.offset),o.offset+=c.length,o),{array:new s(n*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var e;return this.getChildAt((e=this.type.children)===null||e===void 0?void 0:e.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new C(this.data.map(({children:e})=>e[t])):null}get isMemoized(){return T.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(T.isDictionary(this.type)){let t=new Hn(this.data[0].dictionary),e=this.data.map(n=>{let i=n.clone();return i.dictionary=t,i});return new C(e)}return new Hn(this)}unmemoize(){if(T.isDictionary(this.type)&&this.isMemoized){let t=this.data[0].dictionary.unmemoize(),e=this.data.map(n=>{let i=n.clone();return i.dictionary=t,i});return new C(e)}return this}};wd=Symbol.toStringTag;C[wd]=(r=>{r.type=T.prototype,r.data=[],r.length=0,r.stride=1,r.numChildren=0,r._nullCount=-1,r._byteLength=-1,r._offsets=new Uint32Array([0]),r[Symbol.isConcatSpreadable]=!0;let t=Object.keys(h).map(e=>h[e]).filter(e=>typeof e=="number"&&e!==h.NONE);for(let e of t){let n=Mt.getVisitFnByTypeId(e),i=Zt.getVisitFnByTypeId(e),s=yn.getVisitFnByTypeId(e),o=Fe.getVisitFnByTypeId(e);vd[e]={get:n,set:i,indexOf:s,byteLength:o},Sd[e]=Object.create(r,{isValid:{value:Yr(Ai)},get:{value:Yr(Mt.getVisitFnByTypeId(e))},set:{value:oo(Zt.getVisitFnByTypeId(e))},indexOf:{value:ao(yn.getVisitFnByTypeId(e))},getByteLength:{value:Yr(Fe.getVisitFnByTypeId(e))}})}return"Vector"})(C.prototype);var Hn=class extends C{constructor(t){super(t.data);let e=this.get,n=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){let c=s[o];if(c!==void 0)return c;let a=e.call(this,o);return s[o]=a,a}}),Object.defineProperty(this,"set",{value(o,c){n.call(this,o,c),s[o]=c}}),Object.defineProperty(this,"slice",{value:(o,c)=>new Hn(i.call(this,o,c))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new C(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}};function Id(r){if(!r||r.length<=0)return function(i){return!0};let t="",e=r.filter(n=>n===n);return e.length>0&&(t=`
    switch (x) {${e.map(n=>`
        case ${w_(n)}:`).join("")}
            return false;
    }`),r.length!==e.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function w_(r){return typeof r!="bigint"?je(r):Ss?`${je(r)}n`:`"${je(r)}"`}var $a=(r,t)=>(r*t+63&-64||64)/t,v_=(r,t=0)=>r.length>=t?r.subarray(0,t):Mn(new r.constructor(t),r,0),Xr=class{constructor(t,e=1){this.buffer=t,this.stride=e,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.trunc(t.length/e))}get byteLength(){return Math.trunc(this.length*this.stride*this.BYTES_PER_ELEMENT)}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,e){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;let e=this.stride,n=this.length*e,i=this.buffer.length;n>=i&&this._resize(i===0?$a(n*1,this.BYTES_PER_ELEMENT):$a(n*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=$a(t*this.stride,this.BYTES_PER_ELEMENT);let e=v_(this.buffer,t);return this.clear(),e}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=Mn(new this.ArrayType(t),this.buffer)}};Xr.prototype.offset=0;var Mr=class extends Xr{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,e){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=e,this}},zn=class extends Mr{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,e){let{buffer:n}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=n[i]>>s&1;return e?o===0&&(n[i]|=1<<s,++this.numValid):o===1&&(n[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}},jn=class extends Mr{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,e){let n=this.length-1,i=this.reserve(t-n+1).buffer;return n<t++&&i.fill(i[n],n,t),i[t]=i[t-1]+e,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}};var gt=class{constructor({type:t,nullValues:e}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=e,this.stride=xe(t),this._nulls=new zn,e&&e.length>0&&(this._isValid=Id(e))}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}toVector(){return new C([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0,{_offsets:e,_values:n,_nulls:i,_typeIds:s,children:o}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((c,a)=>c+a.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((e,n)=>e+n.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,e){return this.setValid(t,this.isValid(e))&&this.setValue(t,e),this}setValue(t,e){this._setValue(this,t,e)}setValid(t,e){return this.length=this._nulls.set(t,+e).length,e}addChild(t,e=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,e,n,i,{type:s,length:o,nullCount:c,_typeIds:a,_offsets:f,_values:m,_nulls:y}=this;(e=a==null?void 0:a.flush(o))?i=f==null?void 0:f.flush(o):(i=f==null?void 0:f.flush(o))?t=m==null?void 0:m.flush(f.last()):t=m==null?void 0:m.flush(o),c>0&&(n=y==null?void 0:y.flush(o));let b=this.children.map(I=>I.flush());return this.clear(),P({type:s,length:o,nullCount:c,children:b,child:b[0],data:t,typeIds:e,nullBitmap:n,valueOffsets:i})}finish(){this.finished=!0;for(let t of this.children)t.finish();return this}clear(){var t,e,n,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(e=this._values)===null||e===void 0||e.clear(),(n=this._offsets)===null||n===void 0||n.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(let s of this.children)s.clear();return this}};gt.prototype.length=1;gt.prototype.stride=1;gt.prototype.children=null;gt.prototype.finished=!1;gt.prototype.nullValues=null;gt.prototype._isValid=()=>!0;var Ht=class extends gt{constructor(t){super(t),this._values=new Mr(new this.ArrayType(0),this.stride)}setValue(t,e){let n=this._values;return n.reserve(t-n.length+1),super.setValue(t,e)}},cr=class extends gt{constructor(t){super(t),this._pendingLength=0,this._offsets=new jn}setValue(t,e){let n=this._pending||(this._pending=new Map),i=n.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=e instanceof or?e[Ue].length:e.length,n.set(t,e)}setValid(t,e){return super.setValid(t,e)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){let t=this._pending,e=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,e),this}};var bn=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,e,n,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(n),t.writeInt64(e),t.offset()}};var lr=new Int32Array(2),co=new Float32Array(lr.buffer),lo=new Float64Array(lr.buffer),Wn=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Rt=class{constructor(t,e){this.low=t|0,this.high=e|0}static create(t,e){return t==0&&e==0?Rt.ZERO:new Rt(t,e)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};Rt.ZERO=new Rt(0,0);var xi;(function(r){r[r.UTF8_BYTES=1]="UTF8_BYTES",r[r.UTF16_STRING=2]="UTF16_STRING"})(xi||(xi={}));var ce=class{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new ce(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new Rt(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new Rt(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return lr[0]=this.readInt32(t),co[0]}readFloat64(t){return lr[Wn?0:1]=this.readInt32(t),lr[Wn?1:0]=this.readInt32(t+4),lo[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}writeUint64(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}writeFloat32(t,e){co[0]=e,this.writeInt32(t,lr[0])}writeFloat64(t,e){lo[0]=e,this.writeInt32(t,lr[Wn?0:1]),this.writeInt32(t+4,lr[Wn?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}__offset(t,e){let n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);let n=this.readInt32(t),i="",s=0;if(t+=4,e===xi.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;s<n;){let o,c=this.readUint8(t+s++);if(c<192)o=c;else{let a=this.readUint8(t+s++);if(c<224)o=(c&31)<<6|a&63;else{let f=this.readUint8(t+s++);if(c<240)o=(c&15)<<12|(a&63)<<6|f&63;else{let m=this.readUint8(t+s++);o=(c&7)<<18|(a&63)<<12|(f&63)<<6|m&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&(1<<10)-1)+56320))}return i}__union_with_string(t,e){return typeof t=="string"?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=4)throw new Error("FlatBuffers: file identifier must be length "+4);for(let e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}createLong(t,e){return Rt.create(t,e)}createScalarList(t,e){let n=[];for(let i=0;i<e;++i)t(i)!==null&&n.push(t(i));return n}createObjList(t,e){let n=[];for(let i=0;i<e;++i){let s=t(i);s!==null&&n.push(s.unpack())}return n}};var Rr=class{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let e;t?e=t:e=1024,this.bb=ce.allocate(e),this.space=e}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,e){t>this.minalign&&(this.minalign=t);let n=~(this.bb.capacity()-this.space+e)+1&t-1;for(;this.space<n+t+e;){let i=this.bb.capacity();this.bb=Rr.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(n)}pad(t){for(let e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))}addFieldInt16(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))}addFieldInt32(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))}addFieldInt64(t,e,n){(this.force_defaults||!e.equals(n))&&(this.addInt64(e),this.slot(t))}addFieldFloat32(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))}addFieldFloat64(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))}addFieldOffset(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))}addFieldStruct(t,e,n){e!=n&&(this.nested(e),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){let e=t.capacity();if(e&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");let n=e<<1,i=ce.allocate(n);return i.setPosition(n-e),i.bytes().set(t.bytes(),n-e),i}addOffset(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);let t=this.offset(),e=this.vtable_in_use-1;for(;e>=0&&this.vtable[e]==0;e--);let n=e+1;for(;e>=0;e--)this.addInt16(this.vtable[e]!=0?t-this.vtable[e]:0);let i=2;this.addInt16(t-this.object_start);let s=(n+i)*2;this.addInt16(s);let o=0,c=this.space;t:for(e=0;e<this.vtables.length;e++){let a=this.bb.capacity()-this.vtables[e];if(s==this.bb.readInt16(a)){for(let f=2;f<s;f+=2)if(this.bb.readInt16(c+f)!=this.bb.readInt16(a+f))continue t;o=this.vtables[e];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,e,n){let i=n?4:0;if(e){let s=e;if(this.prep(this.minalign,4+4+i),s.length!=4)throw new Error("FlatBuffers: file identifier must be length "+4);for(let o=4-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,4+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,e){this.finish(t,e,!0)}requiredField(t,e){let n=this.bb.capacity()-t,i=n-this.bb.readInt32(n);if(!(this.bb.readInt16(i+e)!=0))throw new Error("FlatBuffers: field "+e+" must be set")}startVector(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(n,t*e)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);let e=this.createString(t);return this.string_maps.set(t,e),e}createString(t){if(!t)return 0;let e;if(t instanceof Uint8Array)e=t;else{e=[];let n=0;for(;n<t.length;){let i,s=t.charCodeAt(n++);if(s<55296||s>=56320)i=s;else{let o=t.charCodeAt(n++);i=(s<<10)+o+(65536-(55296<<10)-56320)}i<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(i&63|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(let n=0,i=this.space,s=this.bb.bytes();n<e.length;n++)s[i++]=e[n];return this.endVector()}createLong(t,e){return Rt.create(t,e)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){let e=[];for(let n=0;n<t.length;++n){let i=t[n];if(i!==null)e.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return e}createStructOffsetList(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}};var mt=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,e){return(e||new mt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,e){return t.setPosition(t.position()+4),(e||new mt).__init(t.readInt32(t.position())+t.position(),t)}key(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,e,n){return mt.startKeyValue(t),mt.addKey(t,e),mt.addValue(t,n),mt.endKeyValue(t)}};var Gr;(function(r){r[r.V1=0]="V1",r[r.V2=1]="V2",r[r.V3=2]="V3",r[r.V4=3]="V4",r[r.V5=4]="V5"})(Gr||(Gr={}));var Kr;(function(r){r[r.Little=0]="Little",r[r.Big=1]="Big"})(Kr||(Kr={}));var Fi;(function(r){r[r.DenseArray=0]="DenseArray"})(Fi||(Fi={}));var zt=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,e){return(e||new zt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,e){return t.setPosition(t.position()+4),(e||new zt).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){let t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,e,n){return zt.startInt(t),zt.addBitWidth(t,e),zt.addIsSigned(t,n),zt.endInt(t)}};var Te=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new Te).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,e){return t.setPosition(t.position()+4),(e||new Te).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new zt).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isOrdered(){let t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):Fi.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static addDictionaryKind(t,e){t.addFieldInt16(3,e,Fi.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}};var ur=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,e){return(e||new ur).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,e){return t.setPosition(t.position()+4),(e||new ur).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return ur.startBinary(t),ur.endBinary(t)}};var dr=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,e){return(e||new dr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,e){return t.setPosition(t.position()+4),(e||new dr).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return dr.startBool(t),dr.endBool(t)}};var Ti;(function(r){r[r.DAY=0]="DAY",r[r.MILLISECOND=1]="MILLISECOND"})(Ti||(Ti={}));var de=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new de).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,e){return t.setPosition(t.position()+4),(e||new de).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ti.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,Ti.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return de.startDate(t),de.addUnit(t,e),de.endDate(t)}};var jt=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,e){return(e||new jt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,e){return t.setPosition(t.position()+4),(e||new jt).__init(t.readInt32(t.position())+t.position(),t)}precision(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static addBitWidth(t,e){t.addFieldInt32(2,e,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,e,n,i){return jt.startDecimal(t),jt.addPrecision(t,e),jt.addScale(t,n),jt.addBitWidth(t,i),jt.endDecimal(t)}};var Jr;(function(r){r[r.SECOND=0]="SECOND",r[r.MILLISECOND=1]="MILLISECOND",r[r.MICROSECOND=2]="MICROSECOND",r[r.NANOSECOND=3]="NANOSECOND"})(Jr||(Jr={}));var fe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,e){return(e||new fe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,e){return t.setPosition(t.position()+4),(e||new fe).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,e){return fe.startFixedSizeBinary(t),fe.addByteWidth(t,e),fe.endFixedSizeBinary(t)}};var he=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,e){return(e||new he).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,e){return t.setPosition(t.position()+4),(e||new he).__init(t.readInt32(t.position())+t.position(),t)}listSize(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,e){return he.startFixedSizeList(t),he.addListSize(t,e),he.endFixedSizeList(t)}};var Bi;(function(r){r[r.HALF=0]="HALF",r[r.SINGLE=1]="SINGLE",r[r.DOUBLE=2]="DOUBLE"})(Bi||(Bi={}));var pe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new pe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,e){return t.setPosition(t.position()+4),(e||new pe).__init(t.readInt32(t.position())+t.position(),t)}precision(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Bi.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,e){t.addFieldInt16(0,e,Bi.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return pe.startFloatingPoint(t),pe.addPrecision(t,e),pe.endFloatingPoint(t)}};var Di;(function(r){r[r.YEAR_MONTH=0]="YEAR_MONTH",r[r.DAY_TIME=1]="DAY_TIME",r[r.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Di||(Di={}));var me=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new me).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,e){return t.setPosition(t.position()+4),(e||new me).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Di.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,Di.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return me.startInterval(t),me.addUnit(t,e),me.endInterval(t)}};var fr=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,e){return(e||new fr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,e){return t.setPosition(t.position()+4),(e||new fr).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return fr.startList(t),fr.endList(t)}};var _e=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,e){return(e||new _e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,e){return t.setPosition(t.position()+4),(e||new _e).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){let t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,e){return _e.startMap(t),_e.addKeysSorted(t,e),_e.endMap(t)}};var hr=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,e){return(e||new hr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,e){return t.setPosition(t.position()+4),(e||new hr).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return hr.startNull(t),hr.endNull(t)}};var pr=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,e){return(e||new pr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,e){return t.setPosition(t.position()+4),(e||new pr).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return pr.startStruct_(t),pr.endStruct_(t)}};var ee=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new ee).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,e){return t.setPosition(t.position()+4),(e||new ee).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Jr.MILLISECOND}bitWidth(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,Jr.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,n){return ee.startTime(t),ee.addUnit(t,e),ee.addBitWidth(t,n),ee.endTime(t)}};var re=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new re).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,e){return t.setPosition(t.position()+4),(e||new re).__init(t.readInt32(t.position())+t.position(),t)}unit(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Jr.SECOND}timezone(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,Jr.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,n){return re.startTimestamp(t),re.addUnit(t,e),re.addTimezone(t,n),re.endTimestamp(t)}};var Ei;(function(r){r[r.Sparse=0]="Sparse",r[r.Dense=1]="Dense"})(Ei||(Ei={}));var Wt=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new Wt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,e){return t.setPosition(t.position()+4),(e||new Wt).__init(t.readInt32(t.position())+t.position(),t)}mode(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ei.Sparse}typeIds(t){let e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+t*4):0}typeIdsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){let t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,e){t.addFieldInt16(0,e,Ei.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,n){return Wt.startUnion(t),Wt.addMode(t,e),Wt.addTypeIds(t,n),Wt.endUnion(t)}};var mr=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,e){return(e||new mr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,e){return t.setPosition(t.position()+4),(e||new mr).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return mr.startUtf8(t),mr.endUtf8(t)}};var wt;(function(r){r[r.NONE=0]="NONE",r[r.Null=1]="Null",r[r.Int=2]="Int",r[r.FloatingPoint=3]="FloatingPoint",r[r.Binary=4]="Binary",r[r.Utf8=5]="Utf8",r[r.Bool=6]="Bool",r[r.Decimal=7]="Decimal",r[r.Date=8]="Date",r[r.Time=9]="Time",r[r.Timestamp=10]="Timestamp",r[r.Interval=11]="Interval",r[r.List=12]="List",r[r.Struct_=13]="Struct_",r[r.Union=14]="Union",r[r.FixedSizeBinary=15]="FixedSizeBinary",r[r.FixedSizeList=16]="FixedSizeList",r[r.Map=17]="Map",r[r.Duration=18]="Duration",r[r.LargeBinary=19]="LargeBinary",r[r.LargeUtf8=20]="LargeUtf8",r[r.LargeList=21]="LargeList"})(wt||(wt={}));var Ut=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new Ut).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,e){return t.setPosition(t.position()+4),(e||new Ut).__init(t.readInt32(t.position())+t.position(),t)}name(t){let e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){let t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):wt.NONE}type(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(t){let e=this.bb.__offset(this.bb_pos,12);return e?(t||new Te).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}children(t,e){let n=this.bb.__offset(this.bb_pos,14);return n?(e||new Ut).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}childrenLength(){let t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){let n=this.bb.__offset(this.bb_pos,16);return n?(e||new mt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(t,e){t.addFieldInt8(2,e,wt.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}};var Ft=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new Ft).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,e){return t.setPosition(t.position()+4),(e||new Ft).__init(t.readInt32(t.position())+t.position(),t)}endianness(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Kr.Little}fields(t,e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new Ut).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}fieldsLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){let n=this.bb.__offset(this.bb_pos,8);return n?(e||new mt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){let e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+t*8):this.bb.createLong(0,0)}featuresLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,e){t.addFieldInt16(0,e,Kr.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static addFeatures(t,e){t.addFieldOffset(3,e,0)}static createFeaturesVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startFeaturesVector(t,e){t.startVector(8,e,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static finishSizePrefixedSchemaBuffer(t,e){t.finish(e,void 0,!0)}static createSchema(t,e,n,i,s){return Ft.startSchema(t),Ft.addEndianness(t,e),Ft.addFields(t,n),Ft.addCustomMetadata(t,i),Ft.addFeatures(t,s),Ft.endSchema(t)}};var ne=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new ne).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,e){return t.setPosition(t.position()+4),(e||new ne).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Gr.V1}schema(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new Ft).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(t,e){let n=this.bb.__offset(this.bb_pos,8);return n?(e||new bn).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}dictionariesLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,e){let n=this.bb.__offset(this.bb_pos,10);return n?(e||new bn).__init(this.bb.__vector(this.bb_pos+n)+t*24,this.bb):null}recordBatchesLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){let n=this.bb.__offset(this.bb_pos,12);return n?(e||new mt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,Gr.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static finishSizePrefixedFooterBuffer(t,e){t.finish(e,void 0,!0)}};var q=class{constructor(t=[],e,n){this.fields=t||[],this.metadata=e||new Map,n||(n=Ya(t)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,e)=>`${e}: ${t}`).join(", ")} }>`}select(t){let e=new Set(t),n=this.fields.filter(i=>e.has(i.name));return new q(n,this.metadata)}selectAt(t){let e=t.map(n=>this.fields[n]).filter(Boolean);return new q(e,this.metadata)}assign(...t){let e=t[0]instanceof q?t[0]:Array.isArray(t[0])?new q(t[0]):new q(t),n=[...this.fields],i=fo(fo(new Map,this.metadata),e.metadata),s=e.fields.filter(c=>{let a=n.findIndex(f=>f.name===c.name);return~a?(n[a]=c.clone({metadata:fo(fo(new Map,n[a].metadata),c.metadata)}))&&!1:!0}),o=Ya(s,new Map);return new q([...n,...s],i,new Map([...this.dictionaries,...o]))}};q.prototype.fields=null;q.prototype.metadata=null;q.prototype.dictionaries=null;var z=class{constructor(t,e,n=!1,i){this.name=t,this.type=e,this.nullable=n,this.metadata=i||new Map}static new(...t){let[e,n,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:e}=t[0],n===void 0&&(n=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new z(`${e}`,n,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[e,n,i,s]=t;return!t[0]||typeof t[0]!="object"?[e=this.name,n=this.type,i=this.nullable,s=this.metadata]=t:{name:e=this.name,type:n=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],z.new(e,n,i,s)}};z.prototype.type=null;z.prototype.name=null;z.prototype.nullable=null;z.prototype.metadata=null;function fo(r,t){return new Map([...r||new Map,...t||new Map])}function Ya(r,t=new Map){for(let e=-1,n=r.length;++e<n;){let s=r[e].type;if(T.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Ya(s.children,t)}return t}var Ad=Rt,S_=Rr,I_=ce,Ur=class{constructor(t,e=Vt.V4,n,i){this.schema=t,this.version=e,n&&(this._recordBatches=n),i&&(this._dictionaryBatches=i)}static decode(t){t=new I_(N(t));let e=ne.getRootAsFooter(t),n=q.decode(e.schema());return new Xa(n,e)}static encode(t){let e=new S_,n=q.encode(e,t.schema);ne.startRecordBatchesVector(e,t.numRecordBatches);for(let o of[...t.recordBatches()].slice().reverse())Ze.encode(e,o);let i=e.endVector();ne.startDictionariesVector(e,t.numDictionaries);for(let o of[...t.dictionaryBatches()].slice().reverse())Ze.encode(e,o);let s=e.endVector();return ne.startFooter(e),ne.addSchema(e,n),ne.addVersion(e,Vt.V4),ne.addRecordBatches(e,i),ne.addDictionaries(e,s),ne.finishFooterBuffer(e,ne.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,n=this.numRecordBatches;++e<n;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,n=this.numDictionaries;++e<n;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}};var Xa=class extends Ur{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){let e=this._footer.recordBatches(t);if(e)return Ze.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){let e=this._footer.dictionaries(t);if(e)return Ze.decode(e)}return null}},Ze=class{constructor(t,e,n){this.metaDataLength=t,this.offset=typeof n=="number"?n:n.low,this.bodyLength=typeof e=="number"?e:e.low}static decode(t){return new Ze(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){let{metaDataLength:n}=e,i=new Ad(e.offset,0),s=new Ad(e.bodyLength,0);return bn.createBlock(t,i,n,s)}};var _t=Object.freeze({done:!0,value:void 0}),Oi=class{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}},gn=class{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}},ho=class extends gn{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return A(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){let{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(_t);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Jt.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Jt.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return A(this,void 0,void 0,function*(){return yield this.abort(t),_t})}return(t){return A(this,void 0,void 0,function*(){return yield this.close(),_t})}read(t){return A(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return A(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((e,n)=>{this.resolvers.push({resolve:e,reject:n})}):Promise.resolve(_t)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}};var _r=class extends ho{write(t){if((t=N(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?mi(this.toUint8Array(!0)):this.toUint8Array(!1).then(mi)}toUint8Array(t=!1){return t?Ie(this._values)[0]:(()=>A(this,void 0,void 0,function*(){var e,n;let i=[],s=0;try{for(var o=Oe(this),c;c=yield o.next(),!c.done;){let a=c.value;i.push(a),s+=a.byteLength}}catch(a){e={error:a}}finally{try{c&&!c.done&&(n=o.return)&&(yield n.call(o))}finally{if(e)throw e.error}}return Ie(i,s)[0]}))()}},yr=class{constructor(t){t&&(this.source=new Ga(Jt.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},ye=class{constructor(t){t instanceof ye?this.source=t.source:t instanceof _r?this.source=new kr(Jt.fromAsyncIterable(t)):Bs(t)?this.source=new kr(Jt.fromNodeStream(t)):yi(t)?this.source=new kr(Jt.fromDOMStream(t)):Fs(t)?this.source=new kr(Jt.fromDOMStream(t.body)):He(t)?this.source=new kr(Jt.fromIterable(t)):Ve(t)?this.source=new kr(Jt.fromAsyncIterable(t)):Me(t)&&(this.source=new kr(Jt.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}},Ga=class{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,e="read"){return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||_t)}return(t){return Object.create(this.source.return&&this.source.return(t)||_t)}},kr=class{constructor(t){this.source=t,this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}cancel(t){return A(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return A(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return A(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,e="read"){return A(this,void 0,void 0,function*(){return yield this.source.next({cmd:e,size:t})})}throw(t){return A(this,void 0,void 0,function*(){let e=this.source.throw&&(yield this.source.throw(t))||_t;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)})}return(t){return A(this,void 0,void 0,function*(){let e=this.source.return&&(yield this.source.return(t))||_t;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)})}};var Mi=class extends yr{constructor(t,e){super(),this.position=0,this.buffer=N(t),this.size=typeof e>"u"?this.buffer.byteLength:e}readInt32(t){let{buffer:e,byteOffset:n}=this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){let{buffer:e,size:n,position:i}=this;return e&&i<n?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(n,i+Math.min(n-i,t)),e.subarray(i,this.position)):null}readAt(t,e){let n=this.buffer,i=Math.min(this.size,t+e);return n?n.subarray(t,i):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}},qr=class extends ye{constructor(t,e){super(),this.position=0,this._handle=t,typeof e=="number"?this.size=e:this._pending=(()=>A(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending}))()}readInt32(t){return A(this,void 0,void 0,function*(){let{buffer:e,byteOffset:n}=yield this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)})}seek(t){return A(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return A(this,void 0,void 0,function*(){this._pending&&(yield this._pending);let{_handle:e,size:n,position:i}=this;if(e&&i<n){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=i,o=0,c=0,a=Math.min(n,s+Math.min(n-s,t)),f=new Uint8Array(Math.max(0,(this.position=a)-s));for(;(s+=c)<a&&(o+=c)<f.byteLength;)({bytesRead:c}=yield e.read(f,o,f.byteLength-o,s));return f}return null})}readAt(t,e){return A(this,void 0,void 0,function*(){this._pending&&(yield this._pending);let{_handle:n,size:i}=this;if(n&&t+e<i){let s=Math.min(i,t+e),o=new Uint8Array(s-t);return(yield n.read(o,0,e,t)).buffer}return new Uint8Array(e)})}close(){return A(this,void 0,void 0,function*(){let t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return A(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return A(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}};var Ja={};dn(Ja,{BaseInt64:()=>Ri,Int128:()=>be,Int64:()=>$t,Uint64:()=>it});function $n(r){return r<0&&(r=4294967295+r+1),`0x${r.toString(16)}`}var Yn=8,Ka=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8],Ri=class{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){let e=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),n=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]),i=e[3]*n[3];this.buffer[0]=i&65535;let s=i>>>16;return i=e[2]*n[3],s+=i,i=e[3]*n[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?65536:0,this.buffer[1]+=s>>>16,this.buffer[1]+=e[1]*n[3]+e[2]*n[2]+e[3]*n[1],this.buffer[1]+=e[0]*n[3]+e[1]*n[2]+e[2]*n[1]+e[3]*n[0]<<16,this}_plus(t){let e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${$n(this.buffer[1])} ${$n(this.buffer[0])}`}},it=class extends Ri{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,e=new Uint32Array(2)){return it.fromString(typeof t=="string"?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return it.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){let n=t.length,i=new it(e);for(let s=0;s<n;){let o=Yn<n-s?Yn:n-s,c=new it(new Uint32Array([Number.parseInt(t.slice(s,s+o),10),0])),a=new it(new Uint32Array([Ka[o],0]));i.times(a),i.plus(c),s+=o}return i}static convertArray(t){let e=new Uint32Array(t.length*2);for(let n=-1,i=t.length;++n<i;)it.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new it(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new it(new Uint32Array(t.buffer)).plus(e)}},$t=class extends Ri{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){let e=this.buffer[1]<<0,n=t.buffer[1]<<0;return e<n||e===n&&this.buffer[0]<t.buffer[0]}static from(t,e=new Uint32Array(2)){return $t.fromString(typeof t=="string"?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return $t.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){let n=t.startsWith("-"),i=t.length,s=new $t(e);for(let o=n?1:0;o<i;){let c=Yn<i-o?Yn:i-o,a=new $t(new Uint32Array([Number.parseInt(t.slice(o,o+c),10),0])),f=new $t(new Uint32Array([Ka[c],0]));s.times(f),s.plus(a),o+=c}return n?s.negate():s}static convertArray(t){let e=new Uint32Array(t.length*2);for(let n=-1,i=t.length;++n<i;)$t.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new $t(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new $t(new Uint32Array(t.buffer)).plus(e)}},be=class{constructor(t){this.buffer=t}high(){return new $t(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new $t(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){let e=new it(new Uint32Array([this.buffer[3],0])),n=new it(new Uint32Array([this.buffer[2],0])),i=new it(new Uint32Array([this.buffer[1],0])),s=new it(new Uint32Array([this.buffer[0],0])),o=new it(new Uint32Array([t.buffer[3],0])),c=new it(new Uint32Array([t.buffer[2],0])),a=new it(new Uint32Array([t.buffer[1],0])),f=new it(new Uint32Array([t.buffer[0],0])),m=it.multiply(s,f);this.buffer[0]=m.low();let y=new it(new Uint32Array([m.high(),0]));return m=it.multiply(i,f),y.plus(m),m=it.multiply(s,a),y.plus(m),this.buffer[1]=y.low(),this.buffer[3]=y.lessThan(m)?1:0,this.buffer[2]=y.high(),new it(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(it.multiply(n,f)).plus(it.multiply(i,a)).plus(it.multiply(s,c)),this.buffer[3]+=it.multiply(e,f).plus(it.multiply(n,a)).plus(it.multiply(i,c)).plus(it.multiply(s,o)).low(),this}plus(t){let e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return`${$n(this.buffer[3])} ${$n(this.buffer[2])} ${$n(this.buffer[1])} ${$n(this.buffer[0])}`}static multiply(t,e){return new be(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new be(new Uint32Array(t.buffer)).plus(e)}static from(t,e=new Uint32Array(4)){return be.fromString(typeof t=="string"?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(4)){return be.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(4)){let n=t.startsWith("-"),i=t.length,s=new be(e);for(let o=n?1:0;o<i;){let c=Yn<i-o?Yn:i-o,a=new be(new Uint32Array([Number.parseInt(t.slice(o,o+c),10),0,0,0])),f=new be(new Uint32Array([Ka[c],0,0,0]));s.times(f),s.plus(a),o+=c}return n?s.negate():s}static convertArray(t){let e=new Uint32Array(t.length*4);for(let n=-1,i=t.length;++n<i;)be.from(t[n],new Uint32Array(e.buffer,e.byteOffset+4*4*n,4));return e}};var Ui=class extends D{constructor(t,e,n,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=n,this.dictionaries=i}visit(t){return super.visit(t instanceof z?t.type:t)}visitNull(t,{length:e}=this.nextFieldNode()){return P({type:t,length:e})}visitBool(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitInt(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFloat(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitUtf8(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDate(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTimestamp(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTime(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDecimal(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitList(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===xt.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFixedSizeList(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),child:this.visit(t.children[0])})}visitMap(t,{length:e,nullCount:n}=this.nextFieldNode()){return P({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e,n=this.nextBufferRange()){return e>0&&this.readData(t,n)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t,{length:e,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+e)}readDictionary(t){return this.dictionaries.get(t.id)}},po=class extends Ui{constructor(t,e,n,i){super(new Uint8Array(0),e,n,i),this.sources=t}readNullBitmap(t,e,{offset:n}=this.nextBufferRange()){return e<=0?new Uint8Array(0):mn(this.sources[n])}readOffsets(t,{offset:e}=this.nextBufferRange()){return Y(Uint8Array,Y(Int32Array,this.sources[e]))}readTypeIds(t,{offset:e}=this.nextBufferRange()){return Y(Uint8Array,Y(t.ArrayType,this.sources[e]))}readData(t,{offset:e}=this.nextBufferRange()){let{sources:n}=this;return T.isTimestamp(t)?Y(Uint8Array,$t.convertArray(n[e])):(T.isInt(t)||T.isTime(t))&&t.bitWidth===64?Y(Uint8Array,$t.convertArray(n[e])):T.isDate(t)&&t.unit===qt.MILLISECOND?Y(Uint8Array,$t.convertArray(n[e])):T.isDecimal(t)?Y(Uint8Array,be.convertArray(n[e])):T.isBinary(t)||T.isFixedSizeBinary(t)?A_(n[e]):T.isBool(t)?mn(n[e]):T.isUtf8(t)?Hr(n[e].join("")):Y(Uint8Array,Y(t.ArrayType,n[e].map(i=>+i)))}};function A_(r){let t=r.join(""),e=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)e[n>>1]=Number.parseInt(t.slice(n,n+2),16);return e}var Xn=class extends cr{constructor(t){super(t),this._values=new Xr(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,N(e))}_flushPending(t,e){let n=this._offsets,i=this._values.reserve(e).buffer,s=0;for(let[o,c]of t)if(c===void 0)n.set(o,0);else{let a=c.length;i.set(c,s),n.set(o,a),s+=a}}};var mo=class extends gt{constructor(t){super(t),this._values=new zn}setValue(t,e){this._values.set(t,+e)}};var wn=class extends Ht{};wn.prototype._setValue=Oa;var ki=class extends wn{};ki.prototype._setValue=zs;var Ni=class extends wn{};Ni.prototype._setValue=js;var Li=class extends Ht{};Li.prototype._setValue=Ua;var _o=class extends gt{constructor({type:t,nullValues:e,dictionaryHashFunction:n}){super({type:new Ae(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=vn({type:this.type.indices,nullValues:e}),this.dictionary=vn({type:this.type.dictionary,nullValues:null}),typeof n=="function"&&(this.valueToKey=n)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,e){let n=this.indices;return e=n.setValid(t,e),this.length=n.length,e}setValue(t,e){let n=this._keysToIndices,i=this.valueToKey(e),s=n[i];return s===void 0&&(n[i]=s=this._dictionaryOffset+this.dictionary.append(e).length-1),this.indices.setValue(t,s)}flush(){let t=this.type,e=this._dictionary,n=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=e?e.concat(n):n,this.finished||(this._dictionaryOffset+=n.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}};var Ci=class extends Ht{};Ci.prototype._setValue=Ea;var yo=class extends gt{setValue(t,e){let[n]=this.children,i=t*this.stride;for(let s=-1,o=e.length;++s<o;)n.set(i+s,e[s])}addChild(t,e="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");let n=this.children.push(t);return this.type=new Ge(this.type.listSize,new z(e,t.type,!0)),n}};var Sn=class extends Ht{setValue(t,e){this._values.set(t,e)}},bo=class extends Sn{setValue(t,e){super.setValue(t,wi(e))}},go=class extends Sn{},wo=class extends Sn{};var In=class extends Ht{};In.prototype._setValue=ka;var Pi=class extends In{};Pi.prototype._setValue=Zs;var Vi=class extends In{};Vi.prototype._setValue=Qs;var Ne=class extends Ht{setValue(t,e){this._values.set(t,e)}},vo=class extends Ne{},So=class extends Ne{},Io=class extends Ne{},Ao=class extends Ne{},xo=class extends Ne{},Fo=class extends Ne{},To=class extends Ne{},Bo=class extends Ne{};var Do=class extends cr{constructor(t){super(t),this._offsets=new jn}addChild(t,e="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Ye(new z(e,t.type,!0)),this.numChildren-1}_flushPending(t){let e=this._offsets,[n]=this.children;for(let[i,s]of t)if(s===void 0)e.set(i,0);else{let o=s.length,c=e.set(i,o).buffer[i];for(let a=-1;++a<o;)n.set(c+a,s[a])}}};var Eo=class extends cr{set(t,e){return super.set(t,e)}setValue(t,e){let n=e instanceof Map?e:new Map(Object.entries(e)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=n.size,i.set(t,n)}addChild(t,e=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new Ke(new z(e,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){let e=this._offsets,[n]=this.children;for(let[i,s]of t)if(s===void 0)e.set(i,0);else{let{[i]:o,[i+1]:c}=e.set(i,s.size).buffer;for(let a of s.entries())if(n.set(o,a),++o>=c)break}}};var Oo=class extends gt{setValue(t,e){}setValid(t,e){return this.length=Math.max(t+1,this.length),e}};var Mo=class extends gt{setValue(t,e){let{children:n,type:i}=this;switch(Array.isArray(e)||e.constructor){case!0:return i.children.forEach((s,o)=>n[o].set(t,e[o]));case Map:return i.children.forEach((s,o)=>n[o].set(t,e.get(s.name)));default:return i.children.forEach((s,o)=>n[o].set(t,e[s.name]))}}setValid(t,e){return super.setValid(t,e)||this.children.forEach(n=>n.setValid(t,e)),e}addChild(t,e=`${this.numChildren}`){let n=this.children.push(t);return this.type=new pt([...this.type.children,new z(e,t.type,!0)]),n}};var Nr=class extends Ht{};Nr.prototype._setValue=Ma;var Hi=class extends Nr{};Hi.prototype._setValue=Ws;var zi=class extends Nr{};zi.prototype._setValue=$s;var ji=class extends Nr{};ji.prototype._setValue=Ys;var Wi=class extends Nr{};Wi.prototype._setValue=Xs;var Lr=class extends Ht{};Lr.prototype._setValue=Ra;var $i=class extends Lr{};$i.prototype._setValue=Gs;var Yi=class extends Lr{};Yi.prototype._setValue=Ks;var Xi=class extends Lr{};Xi.prototype._setValue=Js;var Gi=class extends Lr{};Gi.prototype._setValue=qs;var Gn=class extends gt{constructor(t){super(t),this._typeIds=new Mr(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,e){return this.set(this.length,t,e)}set(t,e,n){return n===void 0&&(n=this._valueToChildTypeId(this,e,t)),this.setValid(t,this.isValid(e))&&this.setValue(t,e,n),this}setValue(t,e,n){this._typeIds.set(t,n);let i=this.type.typeIdToChildIndex[n],s=this.children[i];s==null||s.set(t,e)}addChild(t,e=`${this.children.length}`){let n=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,c=[...i,new z(e,t.type)];return this.type=new Xe(s,[...o,n],c),n}_valueToChildTypeId(t,e,n){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}},Ro=class extends Gn{},Uo=class extends Gn{constructor(t){super(t),this._offsets=new Mr(new Int32Array(0))}setValue(t,e,n){let i=this._typeIds.set(t,n).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,e)}};var Ki=class extends cr{constructor(t){super(t),this._values=new Xr(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,Hr(e))}_flushPending(t,e){}};Ki.prototype._flushPending=Xn.prototype._flushPending;var qa=class extends D{visitNull(){return Oo}visitBool(){return mo}visitInt(){return Ne}visitInt8(){return vo}visitInt16(){return So}visitInt32(){return Io}visitInt64(){return Ao}visitUint8(){return xo}visitUint16(){return Fo}visitUint32(){return To}visitUint64(){return Bo}visitFloat(){return Sn}visitFloat16(){return bo}visitFloat32(){return go}visitFloat64(){return wo}visitUtf8(){return Ki}visitBinary(){return Xn}visitFixedSizeBinary(){return Ci}visitDate(){return wn}visitDateDay(){return ki}visitDateMillisecond(){return Ni}visitTimestamp(){return Nr}visitTimestampSecond(){return Hi}visitTimestampMillisecond(){return zi}visitTimestampMicrosecond(){return ji}visitTimestampNanosecond(){return Wi}visitTime(){return Lr}visitTimeSecond(){return $i}visitTimeMillisecond(){return Yi}visitTimeMicrosecond(){return Xi}visitTimeNanosecond(){return Gi}visitDecimal(){return Li}visitList(){return Do}visitStruct(){return Mo}visitUnion(){return Gn}visitDenseUnion(){return Uo}visitSparseUnion(){return Ro}visitDictionary(){return _o}visitInterval(){return In}visitIntervalDayTime(){return Pi}visitIntervalYearMonth(){return Vi}visitFixedSizeList(){return yo}visitMap(){return Eo}},xd=new qa;var k=class extends D{compareSchemas(t,e){return t===e||e instanceof t.constructor&&this.compareManyFields(t.fields,e.fields)}compareManyFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every((n,i)=>this.compareFields(n,e[i]))}compareFields(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&this.visit(t.type,e.type)}};function ge(r,t){return t instanceof r.constructor}function Ji(r,t){return r===t||ge(r,t)}function Cr(r,t){return r===t||ge(r,t)&&r.bitWidth===t.bitWidth&&r.isSigned===t.isSigned}function ko(r,t){return r===t||ge(r,t)&&r.precision===t.precision}function x_(r,t){return r===t||ge(r,t)&&r.byteWidth===t.byteWidth}function Za(r,t){return r===t||ge(r,t)&&r.unit===t.unit}function qi(r,t){return r===t||ge(r,t)&&r.unit===t.unit&&r.timezone===t.timezone}function Zi(r,t){return r===t||ge(r,t)&&r.unit===t.unit&&r.bitWidth===t.bitWidth}function F_(r,t){return r===t||ge(r,t)&&r.children.length===t.children.length&&br.compareManyFields(r.children,t.children)}function T_(r,t){return r===t||ge(r,t)&&r.children.length===t.children.length&&br.compareManyFields(r.children,t.children)}function Qa(r,t){return r===t||ge(r,t)&&r.mode===t.mode&&r.typeIds.every((e,n)=>e===t.typeIds[n])&&br.compareManyFields(r.children,t.children)}function B_(r,t){return r===t||ge(r,t)&&r.id===t.id&&r.isOrdered===t.isOrdered&&br.visit(r.indices,t.indices)&&br.visit(r.dictionary,t.dictionary)}function tc(r,t){return r===t||ge(r,t)&&r.unit===t.unit}function D_(r,t){return r===t||ge(r,t)&&r.listSize===t.listSize&&r.children.length===t.children.length&&br.compareManyFields(r.children,t.children)}function E_(r,t){return r===t||ge(r,t)&&r.keysSorted===t.keysSorted&&r.children.length===t.children.length&&br.compareManyFields(r.children,t.children)}k.prototype.visitNull=Ji;k.prototype.visitBool=Ji;k.prototype.visitInt=Cr;k.prototype.visitInt8=Cr;k.prototype.visitInt16=Cr;k.prototype.visitInt32=Cr;k.prototype.visitInt64=Cr;k.prototype.visitUint8=Cr;k.prototype.visitUint16=Cr;k.prototype.visitUint32=Cr;k.prototype.visitUint64=Cr;k.prototype.visitFloat=ko;k.prototype.visitFloat16=ko;k.prototype.visitFloat32=ko;k.prototype.visitFloat64=ko;k.prototype.visitUtf8=Ji;k.prototype.visitBinary=Ji;k.prototype.visitFixedSizeBinary=x_;k.prototype.visitDate=Za;k.prototype.visitDateDay=Za;k.prototype.visitDateMillisecond=Za;k.prototype.visitTimestamp=qi;k.prototype.visitTimestampSecond=qi;k.prototype.visitTimestampMillisecond=qi;k.prototype.visitTimestampMicrosecond=qi;k.prototype.visitTimestampNanosecond=qi;k.prototype.visitTime=Zi;k.prototype.visitTimeSecond=Zi;k.prototype.visitTimeMillisecond=Zi;k.prototype.visitTimeMicrosecond=Zi;k.prototype.visitTimeNanosecond=Zi;k.prototype.visitDecimal=Ji;k.prototype.visitList=F_;k.prototype.visitStruct=T_;k.prototype.visitUnion=Qa;k.prototype.visitDenseUnion=Qa;k.prototype.visitSparseUnion=Qa;k.prototype.visitDictionary=B_;k.prototype.visitInterval=tc;k.prototype.visitIntervalDayTime=tc;k.prototype.visitIntervalYearMonth=tc;k.prototype.visitFixedSizeList=D_;k.prototype.visitMap=E_;var br=new k;function An(r,t){return br.compareSchemas(r,t)}function Fd(r,t){return br.compareFields(r,t)}function Td(r,t){return br.visit(r,t)}function vn(r){let t=r.type,e=new(xd.getVisitFn(t)())(r);if(t.children&&t.children.length>0){let n=r.children||[],i={nullValues:r.nullValues},s=Array.isArray(n)?(o,c)=>n[c]||i:({name:o})=>n[o]||i;for(let[o,c]of t.children.entries()){let{type:a}=c,f=s(c,o);e.children.push(vn(Object.assign(Object.assign({},f),{type:a})))}}return e}function No(r,t){return O_(r,t.map(e=>e.data.concat()))}function O_(r,t){let e=[...r.fields],n=[],i={numBatches:t.reduce((y,b)=>Math.max(y,b.length),0)},s=0,o=0,c=-1,a=t.length,f,m=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,c=-1;++c<a;)m[c]=f=t[c].shift(),o=Math.min(o,f?f.length:o);Number.isFinite(o)&&(m=M_(e,o,m,t,i),o>0&&(n[s++]=P({type:new pt(e),length:o,nullCount:0,children:m.slice()})))}return[r=r.assign(e),n.map(y=>new ft(r,y))]}function M_(r,t,e,n,i){var s;let o=(t+63&-64)>>3;for(let c=-1,a=n.length;++c<a;){let f=e[c],m=f==null?void 0:f.length;if(m>=t)m===t?e[c]=f:(e[c]=f.slice(0,t),i.numBatches=Math.max(i.numBatches,n[c].unshift(f.slice(t,m-t))));else{let y=r[c];r[c]=y.clone({nullable:!0}),e[c]=(s=f==null?void 0:f._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:P({type:y.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return e}var Bd,Bt=class{constructor(...t){var e,n;if(t.length===0)return this.batches=[],this.schema=new q([]),this._offsets=[0],this;let i,s;t[0]instanceof q&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());let o=a=>{if(a){if(a instanceof ft)return[a];if(a instanceof Bt)return a.batches;if(a instanceof nt){if(a.type instanceof pt)return[new ft(new q(a.type.children),a)]}else{if(Array.isArray(a))return a.flatMap(f=>o(f));if(typeof a[Symbol.iterator]=="function")return[...a].flatMap(f=>o(f));if(typeof a=="object"){let f=Object.keys(a),m=f.map(I=>new C([a[I]])),y=new q(f.map((I,J)=>new z(String(I),m[J].type))),[,b]=No(y,m);return b.length===0?[new ft(a)]:b}}}return[]},c=t.flatMap(a=>o(a));if(i=(n=i!=null?i:(e=c[0])===null||e===void 0?void 0:e.schema)!==null&&n!==void 0?n:new q([]),!(i instanceof q))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(let a of c){if(!(a instanceof ft))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!An(i,a.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=c,this._offsets=s!=null?s:io(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,e)=>t+e.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=no(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}getByteLength(t){return 0}[Symbol.iterator](){return Vn.visit(new C(this.data))}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){let e=this.schema,n=this.data.concat(t.flatMap(({data:i})=>i));return new Bt(e,n.map(i=>new ft(e,i)))}slice(t,e){let n=this.schema;[t,e]=vi({length:this.numRows},t,e);let i=so(this.data,this._offsets,t,e);return new Bt(n,i.map(s=>new ft(n,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(e=>e.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){let e=this.data.map(n=>n.children[t]);if(e.length===0){let{type:n}=this.schema.fields[t],i=P({type:n,length:0,nullCount:0});e.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new C(e)}return null}setChild(t,e){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t),e)}setChildAt(t,e){let n=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){e||(e=new C([P({type:new ae,length:this.numRows})]));let s=n.fields.slice(),o=s[t].clone({type:e.type}),c=this.schema.fields.map((a,f)=>this.getChildAt(f));[s[t],c[t]]=[o,e],[n,i]=No(n,c)}return new Bt(n,i)}select(t){let e=this.schema.fields.reduce((n,i,s)=>n.set(i.name,s),new Map);return this.selectAt(t.map(n=>e.get(n)).filter(n=>n>-1))}selectAt(t){let e=this.schema.selectAt(t),n=this.batches.map(i=>i.selectAt(t));return new Bt(e,n)}assign(t){let e=this.schema.fields,[n,i]=t.schema.fields.reduce((c,a,f)=>{let[m,y]=c,b=e.findIndex(I=>I.name===a.name);return~b?y[b]=f:m.push(f),c},[[],[]]),s=this.schema.assign(t.schema),o=[...e.map((c,a)=>[a,i[a]]).map(([c,a])=>a===void 0?this.getChildAt(c):t.getChildAt(a)),...n.map(c=>t.getChildAt(c))].filter(Boolean);return new Bt(...No(s,o))}};Bd=Symbol.toStringTag;Bt[Bd]=(r=>(r.schema=null,r.batches=[],r._offsets=new Uint32Array([0]),r._nullCount=-1,r[Symbol.isConcatSpreadable]=!0,r.isValid=Yr(Ai),r.get=Yr(Mt.getVisitFn(h.Struct)),r.set=oo(Zt.getVisitFn(h.Struct)),r.indexOf=ao(yn.getVisitFn(h.Struct)),r.getByteLength=Yr(Fe.getVisitFn(h.Struct)),"Table"))(Bt.prototype);var Ed,ft=class{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof q))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=P({nullCount:0,type:new pt(this.schema.fields),children:this.schema.fields.map(e=>P({type:e.type,nullCount:0}))})]=t,!(this.data instanceof nt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Dd(this.schema,this.data.children);break}case 1:{let[e]=t,{fields:n,children:i,length:s}=Object.keys(e).reduce((a,f,m)=>(a.children[m]=e[f],a.length=Math.max(a.length,e[f].length),a.fields[m]=z.new({name:f,type:e[f].type,nullable:!0}),a),{length:0,fields:new Array,children:new Array}),o=new q(n),c=P({type:new pt(n),length:s,children:i,nullCount:0});[this.schema,this.data]=Dd(o,c.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Od(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Mt.visit(this.data,t)}set(t,e){return Zt.visit(this.data,t,e)}indexOf(t,e){return yn.visit(this.data,t,e)}getByteLength(t){return Fe.visit(this.data,t)}[Symbol.iterator](){return Vn.visit(new C([this.data]))}toArray(){return[...this]}concat(...t){return new Bt(this.schema,[this,...t])}slice(t,e){let[n]=new C([this.data]).slice(t,e).data;return new ft(this.schema,n)}getChild(t){var e;return this.getChildAt((e=this.schema.fields)===null||e===void 0?void 0:e.findIndex(n=>n.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new C([this.data.children[t]]):null}setChild(t,e){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===t),e)}setChildAt(t,e){let n=this.schema,i=this.data;if(t>-1&&t<this.numCols){e||(e=new C([P({type:new ae,length:this.numRows})]));let s=n.fields.slice(),o=i.children.slice(),c=s[t].clone({type:e.type});[s[t],o[t]]=[c,e.data[0]],n=new q(s,new Map(this.schema.metadata)),i=P({type:new pt(s),children:o})}return new ft(n,i)}select(t){let e=this.schema.select(t),n=new pt(e.fields),i=[];for(let s of t){let o=this.schema.fields.findIndex(c=>c.name===s);~o&&(i[o]=this.data.children[o])}return new ft(e,P({type:n,length:this.numRows,children:i}))}selectAt(t){let e=this.schema.selectAt(t),n=t.map(s=>this.data.children[s]).filter(Boolean),i=P({type:new pt(e.fields),length:this.numRows,children:n});return new ft(e,i)}};Ed=Symbol.toStringTag;ft[Ed]=(r=>(r._nullCount=-1,r[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(ft.prototype);function Dd(r,t,e=t.reduce((n,i)=>Math.max(n,i.length),0)){var n;let i=[...r.fields],s=[...t],o=(e+63&-64)>>3;for(let[c,a]of r.fields.entries()){let f=t[c];(!f||f.length!==e)&&(i[c]=a.clone({nullable:!0}),s[c]=(n=f==null?void 0:f._changeLengthAndBackfillNullBitmap(e))!==null&&n!==void 0?n:P({type:a.type,length:e,nullCount:e,nullBitmap:new Uint8Array(o)}))}return[r.assign(i),P({type:new pt(i),length:e,children:s})]}function Od(r,t,e=new Map){for(let n=-1,i=r.length;++n<i;){let o=r[n].type,c=t[n];if(T.isDictionary(o)){if(!e.has(o.id))c.dictionary&&e.set(o.id,c.dictionary);else if(e.get(o.id)!==c.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&Od(o.children,c.children,e)}return e}var xn=class extends ft{constructor(t){let e=t.fields.map(i=>P({type:i.type})),n=P({type:new pt(t.fields),nullCount:0,children:e});super(t,n)}};var Qi;(function(r){r[r.BUFFER=0]="BUFFER"})(Qi||(Qi={}));var ts;(function(r){r[r.LZ4_FRAME=0]="LZ4_FRAME",r[r.ZSTD=1]="ZSTD"})(ts||(ts={}));var Qe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBodyCompression(t,e){return(e||new Qe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,e){return t.setPosition(t.position()+4),(e||new Qe).__init(t.readInt32(t.position())+t.position(),t)}codec(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):ts.LZ4_FRAME}method(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Qi.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,e){t.addFieldInt8(0,e,ts.LZ4_FRAME)}static addMethod(t,e){t.addFieldInt8(1,e,Qi.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,e,n){return Qe.startBodyCompression(t),Qe.addCodec(t,e),Qe.addMethod(t,n),Qe.endBodyCompression(t)}};var Kn=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}};var Jn=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}};var ie=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new ie).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,e){return t.setPosition(t.position()+4),(e||new ie).__init(t.readInt32(t.position())+t.position(),t)}length(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,e){let n=this.bb.__offset(this.bb_pos,6);return n?(e||new Jn).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}nodesLength(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){let n=this.bb.__offset(this.bb_pos,8);return n?(e||new Kn).__init(this.bb.__vector(this.bb_pos+n)+t*16,this.bb):null}buffersLength(){let t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){let e=this.bb.__offset(this.bb_pos,10);return e?(t||new Qe).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static addCompression(t,e){t.addFieldOffset(3,e,0)}static endRecordBatch(t){return t.endObject()}};var Le=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new Le).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,e){return t.setPosition(t.position()+4),(e||new Le).__init(t.readInt32(t.position())+t.position(),t)}id(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){let e=this.bb.__offset(this.bb_pos,6);return e?(t||new ie).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isDelta(){let t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}};var qn;(function(r){r[r.NONE=0]="NONE",r[r.Schema=1]="Schema",r[r.DictionaryBatch=2]="DictionaryBatch",r[r.RecordBatch=3]="RecordBatch",r[r.Tensor=4]="Tensor",r[r.SparseTensor=5]="SparseTensor"})(qn||(qn={}));var Et=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new Et).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,e){return t.setPosition(t.position()+4),(e||new Et).__init(t.readInt32(t.position())+t.position(),t)}version(){let t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Gr.V1}headerType(){let t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):qn.NONE}header(t){let e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){let t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){let n=this.bb.__offset(this.bb_pos,12);return n?(e||new mt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+t*4),this.bb):null}customMetadataLength(){let t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,Gr.V1)}static addHeaderType(t,e){t.addFieldInt8(1,e,qn.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static finishSizePrefixedMessageBuffer(t,e){t.finish(e,void 0,!0)}static createMessage(t,e,n,i,s,o){return Et.startMessage(t),Et.addVersion(t,e),Et.addHeaderType(t,n),Et.addHeader(t,i),Et.addBodyLength(t,s),Et.addCustomMetadata(t,o),Et.endMessage(t)}};var U_=Rt,ec=class extends D{visit(t,e){return t==null||e==null?void 0:super.visit(t,e)}visitNull(t,e){return hr.startNull(e),hr.endNull(e)}visitInt(t,e){return zt.startInt(e),zt.addBitWidth(e,t.bitWidth),zt.addIsSigned(e,t.isSigned),zt.endInt(e)}visitFloat(t,e){return pe.startFloatingPoint(e),pe.addPrecision(e,t.precision),pe.endFloatingPoint(e)}visitBinary(t,e){return ur.startBinary(e),ur.endBinary(e)}visitBool(t,e){return dr.startBool(e),dr.endBool(e)}visitUtf8(t,e){return mr.startUtf8(e),mr.endUtf8(e)}visitDecimal(t,e){return jt.startDecimal(e),jt.addScale(e,t.scale),jt.addPrecision(e,t.precision),jt.addBitWidth(e,t.bitWidth),jt.endDecimal(e)}visitDate(t,e){return de.startDate(e),de.addUnit(e,t.unit),de.endDate(e)}visitTime(t,e){return ee.startTime(e),ee.addUnit(e,t.unit),ee.addBitWidth(e,t.bitWidth),ee.endTime(e)}visitTimestamp(t,e){let n=t.timezone&&e.createString(t.timezone)||void 0;return re.startTimestamp(e),re.addUnit(e,t.unit),n!==void 0&&re.addTimezone(e,n),re.endTimestamp(e)}visitInterval(t,e){return me.startInterval(e),me.addUnit(e,t.unit),me.endInterval(e)}visitList(t,e){return fr.startList(e),fr.endList(e)}visitStruct(t,e){return pr.startStruct_(e),pr.endStruct_(e)}visitUnion(t,e){Wt.startTypeIdsVector(e,t.typeIds.length);let n=Wt.createTypeIdsVector(e,t.typeIds);return Wt.startUnion(e),Wt.addMode(e,t.mode),Wt.addTypeIds(e,n),Wt.endUnion(e)}visitDictionary(t,e){let n=this.visit(t.indices,e);return Te.startDictionaryEncoding(e),Te.addId(e,new U_(t.id,0)),Te.addIsOrdered(e,t.isOrdered),n!==void 0&&Te.addIndexType(e,n),Te.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return fe.startFixedSizeBinary(e),fe.addByteWidth(e,t.byteWidth),fe.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return he.startFixedSizeList(e),he.addListSize(e,t.listSize),he.endFixedSizeList(e)}visitMap(t,e){return _e.startMap(e),_e.addKeysSorted(e,t.keysSorted),_e.endMap(e)}},Lo=new ec;function kd(r,t=new Map){return new q(k_(r,t),Co(r.customMetadata),t)}function rc(r){return new Qt(r.count,Ld(r.columns),Cd(r.columns))}function Nd(r){return new ve(rc(r.data),r.id,r.isDelta)}function k_(r,t){return(r.fields||[]).filter(Boolean).map(e=>z.fromJSON(e,t))}function Md(r,t){return(r.children||[]).filter(Boolean).map(e=>z.fromJSON(e,t))}function Ld(r){return(r||[]).reduce((t,e)=>[...t,new tr(e.count,N_(e.VALIDITY)),...Ld(e.children)],[])}function Cd(r,t=[]){for(let e=-1,n=(r||[]).length;++e<n;){let i=r[e];i.VALIDITY&&t.push(new we(t.length,i.VALIDITY.length)),i.TYPE&&t.push(new we(t.length,i.TYPE.length)),i.OFFSET&&t.push(new we(t.length,i.OFFSET.length)),i.DATA&&t.push(new we(t.length,i.DATA.length)),t=Cd(i.children,t)}return t}function N_(r){return(r||[]).reduce((t,e)=>t+ +(e===0),0)}function Pd(r,t){let e,n,i,s,o,c;return!t||!(s=r.dictionary)?(o=Ud(r,Md(r,t)),i=new z(r.name,o,r.nullable,Co(r.customMetadata))):t.has(e=s.id)?(n=(n=s.indexType)?Rd(n):new sr,c=new Ae(t.get(e),n,e,s.isOrdered),i=new z(r.name,c,r.nullable,Co(r.customMetadata))):(n=(n=s.indexType)?Rd(n):new sr,t.set(e,o=Ud(r,Md(r,t))),c=new Ae(o,n,e,s.isOrdered),i=new z(r.name,c,r.nullable,Co(r.customMetadata))),i||null}function Co(r){return new Map(Object.entries(r||{}))}function Rd(r){return new Dt(r.isSigned,r.bitWidth)}function Ud(r,t){let e=r.type.name;switch(e){case"NONE":return new ae;case"null":return new ae;case"binary":return new Ir;case"utf8":return new Ar;case"bool":return new xr;case"list":return new Ye((t||[])[0]);case"struct":return new pt(t||[]);case"struct_":return new pt(t||[])}switch(e){case"int":{let n=r.type;return new Dt(n.isSigned,n.bitWidth)}case"floatingpoint":{let n=r.type;return new ue(bt[n.precision])}case"decimal":{let n=r.type;return new Fr(n.scale,n.precision,n.bitWidth)}case"date":{let n=r.type;return new Tr(qt[n.unit])}case"time":{let n=r.type;return new $e(G[n.unit],n.bitWidth)}case"timestamp":{let n=r.type;return new Br(G[n.unit],n.timezone)}case"interval":{let n=r.type;return new Dr(oe[n.unit])}case"union":{let n=r.type;return new Xe(xt[n.mode],n.typeIds||[],t||[])}case"fixedsizebinary":{let n=r.type;return new Er(n.byteWidth)}case"fixedsizelist":{let n=r.type;return new Ge(n.listSize,(t||[])[0])}case"map":{let n=r.type;return new Ke((t||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${e}"`)}var Fn=Rt,L_=Rr,C_=ce,kt=class{constructor(t,e,n,i){this._version=e,this._headerType=n,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,e){let n=new kt(0,Vt.V4,e);return n._createHeader=P_(t,e),n}static decode(t){t=new C_(N(t));let e=Et.getRootAsMessage(t),n=e.bodyLength(),i=e.version(),s=e.headerType(),o=new kt(n,i,s);return o._createHeader=V_(e,s),o}static encode(t){let e=new L_,n=-1;return t.isSchema()?n=q.encode(e,t.header()):t.isRecordBatch()?n=Qt.encode(e,t.header()):t.isDictionaryBatch()&&(n=ve.encode(e,t.header())),Et.startMessage(e),Et.addVersion(e,Vt.V4),Et.addHeader(e,n),Et.addHeaderType(e,t.headerType),Et.addBodyLength(e,new Fn(t.bodyLength,0)),Et.finishMessageBuffer(e,Et.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof q)return new kt(0,Vt.V4,rt.Schema,t);if(t instanceof Qt)return new kt(e,Vt.V4,rt.RecordBatch,t);if(t instanceof ve)return new kt(e,Vt.V4,rt.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===rt.Schema}isRecordBatch(){return this.headerType===rt.RecordBatch}isDictionaryBatch(){return this.headerType===rt.DictionaryBatch}},Qt=class{constructor(t,e,n){this._nodes=e,this._buffers=n,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}},ve=class{constructor(t,e,n=!1){this._data=t,this._isDelta=n,this._id=typeof e=="number"?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}},we=class{constructor(t,e){this.offset=typeof t=="number"?t:t.low,this.length=typeof e=="number"?e:e.low}},tr=class{constructor(t,e){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof e=="number"?e:e.low}};function P_(r,t){return()=>{switch(t){case rt.Schema:return q.fromJSON(r);case rt.RecordBatch:return Qt.fromJSON(r);case rt.DictionaryBatch:return ve.fromJSON(r)}throw new Error(`Unrecognized Message type: { name: ${rt[t]}, type: ${t} }`)}}function V_(r,t){return()=>{switch(t){case rt.Schema:return q.decode(r.header(new Ft));case rt.RecordBatch:return Qt.decode(r.header(new ie),r.version());case rt.DictionaryBatch:return ve.decode(r.header(new Le),r.version())}throw new Error(`Unrecognized Message type: { name: ${rt[t]}, type: ${t} }`)}}z.encode=q_;z.decode=K_;z.fromJSON=Pd;q.encode=J_;q.decode=H_;q.fromJSON=kd;Qt.encode=Z_;Qt.decode=z_;Qt.fromJSON=rc;ve.encode=Q_;ve.decode=j_;ve.fromJSON=Nd;tr.encode=ty;tr.decode=$_;we.encode=ey;we.decode=W_;function H_(r,t=new Map){let e=G_(r,t);return new q(e,Po(r),t)}function z_(r,t=Vt.V4){if(r.compression()!==null)throw new Error("Record batch compression not implemented");return new Qt(r.length(),Y_(r),X_(r,t))}function j_(r,t=Vt.V4){return new ve(Qt.decode(r.data(),t),r.id(),r.isDelta())}function W_(r){return new we(r.offset(),r.length())}function $_(r){return new tr(r.length(),r.nullCount())}function Y_(r){let t=[];for(let e,n=-1,i=-1,s=r.nodesLength();++n<s;)(e=r.nodes(n))&&(t[++i]=tr.decode(e));return t}function X_(r,t){let e=[];for(let n,i=-1,s=-1,o=r.buffersLength();++i<o;)(n=r.buffers(i))&&(t<Vt.V4&&(n.bb_pos+=8*(i+1)),e[++s]=we.decode(n));return e}function G_(r,t){let e=[];for(let n,i=-1,s=-1,o=r.fieldsLength();++i<o;)(n=r.fields(i))&&(e[++s]=z.decode(n,t));return e}function Vd(r,t){let e=[];for(let n,i=-1,s=-1,o=r.childrenLength();++i<o;)(n=r.children(i))&&(e[++s]=z.decode(n,t));return e}function K_(r,t){let e,n,i,s,o,c;return!t||!(c=r.dictionary())?(i=zd(r,Vd(r,t)),n=new z(r.name(),i,r.nullable(),Po(r))):t.has(e=c.id().low)?(s=(s=c.indexType())?Hd(s):new sr,o=new Ae(t.get(e),s,e,c.isOrdered()),n=new z(r.name(),o,r.nullable(),Po(r))):(s=(s=c.indexType())?Hd(s):new sr,t.set(e,i=zd(r,Vd(r,t))),o=new Ae(i,s,e,c.isOrdered()),n=new z(r.name(),o,r.nullable(),Po(r))),n||null}function Po(r){let t=new Map;if(r)for(let e,n,i=-1,s=Math.trunc(r.customMetadataLength());++i<s;)(e=r.customMetadata(i))&&(n=e.key())!=null&&t.set(n,e.value());return t}function Hd(r){return new Dt(r.isSigned(),r.bitWidth())}function zd(r,t){let e=r.typeType();switch(e){case wt.NONE:return new ae;case wt.Null:return new ae;case wt.Binary:return new Ir;case wt.Utf8:return new Ar;case wt.Bool:return new xr;case wt.List:return new Ye((t||[])[0]);case wt.Struct_:return new pt(t||[])}switch(e){case wt.Int:{let n=r.type(new zt);return new Dt(n.isSigned(),n.bitWidth())}case wt.FloatingPoint:{let n=r.type(new pe);return new ue(n.precision())}case wt.Decimal:{let n=r.type(new jt);return new Fr(n.scale(),n.precision(),n.bitWidth())}case wt.Date:{let n=r.type(new de);return new Tr(n.unit())}case wt.Time:{let n=r.type(new ee);return new $e(n.unit(),n.bitWidth())}case wt.Timestamp:{let n=r.type(new re);return new Br(n.unit(),n.timezone())}case wt.Interval:{let n=r.type(new me);return new Dr(n.unit())}case wt.Union:{let n=r.type(new Wt);return new Xe(n.mode(),n.typeIdsArray()||[],t||[])}case wt.FixedSizeBinary:{let n=r.type(new fe);return new Er(n.byteWidth())}case wt.FixedSizeList:{let n=r.type(new he);return new Ge(n.listSize(),(t||[])[0])}case wt.Map:{let n=r.type(new _e);return new Ke((t||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${wt[e]}" (${e})`)}function J_(r,t){let e=t.fields.map(s=>z.encode(r,s));Ft.startFieldsVector(r,e.length);let n=Ft.createFieldsVector(r,e),i=t.metadata&&t.metadata.size>0?Ft.createCustomMetadataVector(r,[...t.metadata].map(([s,o])=>{let c=r.createString(`${s}`),a=r.createString(`${o}`);return mt.startKeyValue(r),mt.addKey(r,c),mt.addValue(r,a),mt.endKeyValue(r)})):-1;return Ft.startSchema(r),Ft.addFields(r,n),Ft.addEndianness(r,ry?Kr.Little:Kr.Big),i!==-1&&Ft.addCustomMetadata(r,i),Ft.endSchema(r)}function q_(r,t){let e=-1,n=-1,i=-1,s=t.type,o=t.typeId;T.isDictionary(s)?(o=s.dictionary.typeId,i=Lo.visit(s,r),n=Lo.visit(s.dictionary,r)):n=Lo.visit(s,r);let c=(s.children||[]).map(m=>z.encode(r,m)),a=Ut.createChildrenVector(r,c),f=t.metadata&&t.metadata.size>0?Ut.createCustomMetadataVector(r,[...t.metadata].map(([m,y])=>{let b=r.createString(`${m}`),I=r.createString(`${y}`);return mt.startKeyValue(r),mt.addKey(r,b),mt.addValue(r,I),mt.endKeyValue(r)})):-1;return t.name&&(e=r.createString(t.name)),Ut.startField(r),Ut.addType(r,n),Ut.addTypeType(r,o),Ut.addChildren(r,a),Ut.addNullable(r,!!t.nullable),e!==-1&&Ut.addName(r,e),i!==-1&&Ut.addDictionary(r,i),f!==-1&&Ut.addCustomMetadata(r,f),Ut.endField(r)}function Z_(r,t){let e=t.nodes||[],n=t.buffers||[];ie.startNodesVector(r,e.length);for(let o of e.slice().reverse())tr.encode(r,o);let i=r.endVector();ie.startBuffersVector(r,n.length);for(let o of n.slice().reverse())we.encode(r,o);let s=r.endVector();return ie.startRecordBatch(r),ie.addLength(r,new Fn(t.length,0)),ie.addNodes(r,i),ie.addBuffers(r,s),ie.endRecordBatch(r)}function Q_(r,t){let e=Qt.encode(r,t.data);return Le.startDictionaryBatch(r),Le.addId(r,new Fn(t.id,0)),Le.addIsDelta(r,t.isDelta),Le.addData(r,e),Le.endDictionaryBatch(r)}function ty(r,t){return Jn.createFieldNode(r,new Fn(t.length,0),new Fn(t.nullCount,0))}function ey(r,t){return Kn.createBuffer(r,new Fn(t.offset,0),new Fn(t.length,0))}var ry=(()=>{let r=new ArrayBuffer(2);return new DataView(r).setInt16(0,256,!0),new Int16Array(r)[0]===256})();var ic=r=>`Expected ${rt[r]} Message in stream, but was null or length 0.`,sc=r=>`Header pointer of flatbuffer-encoded ${rt[r]} Message is null or length 0.`,jd=(r,t)=>`Expected to read ${r} metadata bytes, but only read ${t}.`,Wd=(r,t)=>`Expected to read ${r} bytes for message body, but only read ${t}.`,Zn=class{constructor(t){this.source=t instanceof yr?t:new yr(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done?_t:t.value===-1&&(t=this.readMetadataLength()).done?_t:(t=this.readMetadata(t.value)).done?_t:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(t!=null&&e.value.headerType!==t)throw new Error(ic(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);let e=N(this.source.read(t));if(e.byteLength<t)throw new Error(Wd(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(t=!1){let e=rt.Schema,n=this.readMessage(e),i=n==null?void 0:n.header();if(t&&!i)throw new Error(sc(e));return i}readMetadataLength(){let t=this.source.read(Vo),e=t&&new ce(t),n=(e==null?void 0:e.readInt32(0))||0;return{done:n===0,value:n}}readMetadata(t){let e=this.source.read(t);if(!e)return _t;if(e.byteLength<t)throw new Error(jd(t,e.byteLength));return{done:!1,value:kt.decode(e)}}},es=class{constructor(t,e){this.source=t instanceof ye?t:xs(t)?new qr(t,e):new ye(t)}[Symbol.asyncIterator](){return this}next(){return A(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done?_t:t.value===-1&&(t=yield this.readMetadataLength()).done?_t:(t=yield this.readMetadata(t.value)).done?_t:t})}throw(t){return A(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return A(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return A(this,void 0,void 0,function*(){let e;if((e=yield this.next()).done)return null;if(t!=null&&e.value.headerType!==t)throw new Error(ic(t));return e.value})}readMessageBody(t){return A(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);let e=N(yield this.source.read(t));if(e.byteLength<t)throw new Error(Wd(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()})}readSchema(t=!1){return A(this,void 0,void 0,function*(){let e=rt.Schema,n=yield this.readMessage(e),i=n==null?void 0:n.header();if(t&&!i)throw new Error(sc(e));return i})}readMetadataLength(){return A(this,void 0,void 0,function*(){let t=yield this.source.read(Vo),e=t&&new ce(t),n=(e==null?void 0:e.readInt32(0))||0;return{done:n===0,value:n}})}readMetadata(t){return A(this,void 0,void 0,function*(){let e=yield this.source.read(t);if(!e)return _t;if(e.byteLength<t)throw new Error(jd(t,e.byteLength));return{done:!1,value:kt.decode(e)}})}},rs=class extends Zn{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof Oi?t:new Oi(t)}next(){let{_json:t}=this;if(!this._schema){this._schema=!0;let e=kt.fromJSON(t.schema,rt.Schema);return{done:!1,value:e}}if(this._dictionaryIndex<t.dictionaries.length){let e=t.dictionaries[this._dictionaryIndex++];this._body=e.data.columns;let n=kt.fromJSON(e,rt.DictionaryBatch);return{done:!1,value:n}}if(this._batchIndex<t.batches.length){let e=t.batches[this._batchIndex++];this._body=e.columns;let n=kt.fromJSON(e,rt.RecordBatch);return{done:!1,value:n}}return this._body=[],_t}readMessageBody(t){return e(this._body);function e(n){return(n||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...e(s.children)],[])}}readMessage(t){let e;if((e=this.next()).done)return null;if(t!=null&&e.value.headerType!==t)throw new Error(ic(t));return e.value}readSchema(){let t=rt.Schema,e=this.readMessage(t),n=e==null?void 0:e.header();if(!e||!n)throw new Error(sc(t));return n}},Vo=4,nc="ARROW1",Qn=new Uint8Array(nc.length);for(let r=0;r<nc.length;r+=1)Qn[r]=nc.codePointAt(r);function Ho(r,t=0){for(let e=-1,n=Qn.length;++e<n;)if(Qn[e]!==r[t+e])return!1;return!0}var ti=Qn.length,oc=ti+Vo,$d=ti*2+Vo;var Ot=class extends gn{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){let e=this._impl.open(t);return Ve(e)?e.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Jt.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Jt.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Ot?t:Is(t)?iy(t):xs(t)?ay(t):Ve(t)?(()=>A(this,void 0,void 0,function*(){return yield Ot.from(yield t)}))():Fs(t)||yi(t)||Bs(t)||Me(t)?oy(new ye(t)):sy(new yr(t))}static readAll(t){return t instanceof Ot?t.isSync()?Yd(t):Xd(t):Is(t)||ArrayBuffer.isView(t)||He(t)||As(t)?Yd(t):Xd(t)}},gr=class extends Ot{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return le(this,arguments,function*(){yield $(yield*En(Oe(this[Symbol.iterator]())))})}},Zr=class extends Ot{constructor(t){super(t),this._impl=t}readAll(){var t,e;return A(this,void 0,void 0,function*(){let n=new Array;try{for(var i=Oe(this),s;s=yield i.next(),!s.done;){let o=s.value;n.push(o)}}catch(o){t={error:o}}finally{try{s&&!s.done&&(e=i.return)&&(yield e.call(i))}finally{if(t)throw t.error}}return n})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}},Qr=class extends gr{constructor(t){super(t),this._impl=t}},ns=class extends Zr{constructor(t){super(t),this._impl=t}},zo=class{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){let n=this._loadVectors(t,e,this.schema.fields),i=P({type:new pt(this.schema.fields),length:t.length,children:n});return new ft(this.schema,i)}_loadDictionaryBatch(t,e){let{id:n,isDelta:i}=t,{dictionaries:s,schema:o}=this,c=s.get(n);if(i||!c){let a=o.dictionaries.get(n),f=this._loadVectors(t.data,e,[a]);return(c&&i?c.concat(new C(f)):new C(f)).memoize()}return c.memoize()}_loadVectors(t,e,n){return new Ui(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}},ei=class extends zo{constructor(t,e){super(e),this._reader=Is(t)?new rs(this._handle=t):new Zn(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=Gd(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):_t}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):_t}next(){if(this.closed)return _t;let t,{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;let n=t.header(),i=e.readMessageBody(t.bodyLength),s=this._loadRecordBatch(n,i);return{done:!1,value:s}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;let n=t.header(),i=e.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new xn(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}},ri=class extends zo{constructor(t,e){super(e),this._reader=new es(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return A(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return A(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=Gd(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return A(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):_t})}return(t){return A(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):_t})}next(){return A(this,void 0,void 0,function*(){if(this.closed)return _t;let t,{_reader:e}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;let n=t.header(),i=yield e.readMessageBody(t.bodyLength),s=this._loadRecordBatch(n,i);return{done:!1,value:s}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;let n=t.header(),i=yield e.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new xn(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return A(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}},jo=class extends ei{constructor(t,e){super(t instanceof Mi?t:new Mi(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(let e of this._footer.dictionaryBatches())e&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var e;if(this.closed)return null;this._footer||this.open();let n=(e=this._footer)===null||e===void 0?void 0:e.getRecordBatch(t);if(n&&this._handle.seek(n.offset)){let i=this._reader.readMessage(rt.RecordBatch);if(i!=null&&i.isRecordBatch()){let s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){var e;let n=(e=this._footer)===null||e===void 0?void 0:e.getDictionaryBatch(t);if(n&&this._handle.seek(n.offset)){let i=this._reader.readMessage(rt.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){let s=i.header(),o=this._reader.readMessageBody(i.bodyLength),c=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,c)}}}_readFooter(){let{_handle:t}=this,e=t.size-oc,n=t.readInt32(e),i=t.readAt(e-n,n);return Ur.decode(i)}_readNextMessageAndValidate(t){var e;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){let n=(e=this._footer)===null||e===void 0?void 0:e.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(t)}return null}},ac=class extends ri{constructor(t,...e){let n=typeof e[0]!="number"?e.shift():void 0,i=e[0]instanceof Map?e.shift():void 0;super(t instanceof qr?t:new qr(t,n),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){let e=Object.create(null,{open:{get:()=>super.open}});return A(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(let n of this._footer.dictionaryBatches())n&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield e.open.call(this,t)})}readRecordBatch(t){var e;return A(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());let n=(e=this._footer)===null||e===void 0?void 0:e.getRecordBatch(t);if(n&&(yield this._handle.seek(n.offset))){let i=yield this._reader.readMessage(rt.RecordBatch);if(i!=null&&i.isRecordBatch()){let s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(t){var e;return A(this,void 0,void 0,function*(){let n=(e=this._footer)===null||e===void 0?void 0:e.getDictionaryBatch(t);if(n&&(yield this._handle.seek(n.offset))){let i=yield this._reader.readMessage(rt.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){let s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),c=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,c)}}})}_readFooter(){return A(this,void 0,void 0,function*(){let{_handle:t}=this;t._pending&&(yield t._pending);let e=t.size-oc,n=yield t.readInt32(e),i=yield t.readAt(e-n,n);return Ur.decode(i)})}_readNextMessageAndValidate(t){return A(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){let e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&(yield this._handle.seek(e.offset)))return yield this._reader.readMessage(t)}return null})}},cc=class extends ei{constructor(t,e){super(t,e)}_loadVectors(t,e,n){return new po(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}};function Gd(r,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:r.autoDestroy}function*Yd(r){let t=Ot.from(r);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function Xd(r){return le(this,arguments,function*(){let e=yield $(Ot.from(r));try{if(!(yield $(e.open({autoDestroy:!1}))).closed)do yield yield $(e);while(!(yield $(e.reset().open())).closed)}finally{yield $(e.cancel())}})}function iy(r){return new gr(new cc(r))}function sy(r){let t=r.peek(ti+7&-8);return t&&t.byteLength>=4?Ho(t)?new Qr(new jo(r.read())):new gr(new ei(r)):new gr(new ei(function*(){}()))}function oy(r){return A(this,void 0,void 0,function*(){let t=yield r.peek(ti+7&-8);return t&&t.byteLength>=4?Ho(t)?new Qr(new jo(yield r.read())):new Zr(new ri(r)):new Zr(new ri(function(){return le(this,arguments,function*(){})}()))})}function ay(r){return A(this,void 0,void 0,function*(){let{size:t}=yield r.stat(),e=new qr(r,t);return t>=$d&&Ho(yield e.readAt(0,ti+7&-8))?new ns(new ac(e)):new Zr(new ri(e))})}var Tt=class extends D{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){let e=i=>i.flatMap(s=>Array.isArray(s)?e(s):s instanceof ft?s.data.children:s.data),n=new Tt;return n.visitMany(e(t)),n}visit(t){if(t instanceof C)return this.visitMany(t.data),this;let{type:e}=t;if(!T.isDictionary(e)){let{length:n,nullCount:i}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");T.isNull(e)||er.call(this,i<=0?new Uint8Array(0):Pn(t.offset,n,t.nullBitmap)),this.nodes.push(new tr(n,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}};function er(r){let t=r.byteLength+7&-8;return this.buffers.push(r),this.bufferRegions.push(new we(this._byteLength,t)),this._byteLength+=t,this}function cy(r){let{type:t,length:e,typeIds:n,valueOffsets:i}=r;if(er.call(this,n),t.mode===xt.Sparse)return lc.call(this,r);if(t.mode===xt.Dense){if(r.offset<=0)return er.call(this,i),lc.call(this,r);{let s=n.reduce((m,y)=>Math.max(m,y),n[0]),o=new Int32Array(s+1),c=new Int32Array(s+1).fill(-1),a=new Int32Array(e),f=bi(-i[0],e,i);for(let m,y,b=-1;++b<e;)(y=c[m=n[b]])===-1&&(y=c[m]=f[m]),a[b]=f[b]-y,++o[m];er.call(this,a);for(let m,y=-1,b=t.children.length;++y<b;)if(m=r.children[y]){let I=t.typeIds[y],J=Math.min(e,o[I]);this.visit(m.slice(c[I],J))}}}return this}function ly(r){let t;return r.nullCount>=r.length?er.call(this,new Uint8Array(0)):(t=r.values)instanceof Uint8Array?er.call(this,Pn(r.offset,r.length,t)):er.call(this,mn(r.values))}function tn(r){return er.call(this,r.values.subarray(0,r.length*r.stride))}function Kd(r){let{length:t,values:e,valueOffsets:n}=r,i=n[0],s=n[t],o=Math.min(s-i,e.byteLength-i);return er.call(this,bi(-n[0],t,n)),er.call(this,e.subarray(i,i+o)),this}function uc(r){let{length:t,valueOffsets:e}=r;return e&&er.call(this,bi(e[0],t,e)),this.visit(r.children[0])}function lc(r){return this.visitMany(r.type.children.map((t,e)=>r.children[e]).filter(Boolean))[0]}Tt.prototype.visitBool=ly;Tt.prototype.visitInt=tn;Tt.prototype.visitFloat=tn;Tt.prototype.visitUtf8=Kd;Tt.prototype.visitBinary=Kd;Tt.prototype.visitFixedSizeBinary=tn;Tt.prototype.visitDate=tn;Tt.prototype.visitTimestamp=tn;Tt.prototype.visitTime=tn;Tt.prototype.visitDecimal=tn;Tt.prototype.visitList=uc;Tt.prototype.visitStruct=lc;Tt.prototype.visitUnion=cy;Tt.prototype.visitInterval=tn;Tt.prototype.visitFixedSizeList=uc;Tt.prototype.visitMap=uc;var en=class extends gn{constructor(t){super(),this._position=0,this._started=!1,this._sink=new _r,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,se(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Ve(t)?t.then(e=>this.writeAll(e)):Me(t)?fc(this,t):dc(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,e=null){return t===this._sink||t instanceof _r?this._sink=t:(this._sink=new _r,t&&gu(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&wu(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!e||!An(e,this._schema))&&(e==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Bt&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof ft&&!(e=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(e&&!An(e,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof ft?t instanceof xn||this._writeRecordBatch(t):t instanceof Bt?this.writeAll(t.batches):He(t)&&this.writeAll(t)}_writeMessage(t,e=8){let n=e-1,i=kt.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,c=s+o+n&~n,a=c-s-o;return t.headerType===rt.RecordBatch?this._recordBatchBlocks.push(new Ze(c,t.bodyLength,this._position)):t.headerType===rt.DictionaryBatch&&this._dictionaryBlocks.push(new Ze(c,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(c-o)),s>0&&this._write(i),this._writePadding(a)}_write(t){if(this._started){let e=N(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(kt.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Qn)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){let{byteLength:e,nodes:n,bufferRegions:i,buffers:s}=Tt.assemble(t),o=new Qt(t.numRows,n,i),c=kt.from(o,e);return this._writeDictionaries(t)._writeMessage(c)._writeBodyBuffers(s)}_writeDictionaryBatch(t,e,n=!1){this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));let{byteLength:i,nodes:s,bufferRegions:o,buffers:c}=Tt.assemble(new C([t])),a=new Qt(t.length,s,o),f=new ve(a,e,n),m=kt.from(f,i);return this._writeMessage(m)._writeBodyBuffers(c)}_writeBodyBuffers(t){let e,n,i;for(let s=-1,o=t.length;++s<o;)(e=t[s])&&(n=e.byteLength)>0&&(this._write(e),(i=(n+7&-8)-n)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[e,n]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(e)||0;if(i===0||(n=n==null?void 0:n.slice(i)).length>0)for(let s of n.data)this._writeDictionaryBatch(s,e,i>0),i+=s.length}return this}},wr=class extends en{static writeAll(t,e){let n=new wr(e);return Ve(t)?t.then(i=>n.writeAll(i)):Me(t)?fc(n,t):dc(n,t)}},rn=class extends en{static writeAll(t){let e=new rn;return Ve(t)?t.then(n=>e.writeAll(n)):Me(t)?fc(e,t):dc(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){let e=Ur.encode(new Ur(t,Vt.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}};function dc(r,t){let e=t;t instanceof Bt&&(e=t.batches,r.reset(void 0,t.schema));for(let n of e)r.write(n);return r.finish()}function fc(r,t){var e,n,i,s;return A(this,void 0,void 0,function*(){try{for(e=Oe(t);n=yield e.next(),!n.done;){let o=n.value;r.write(o)}}catch(o){i={error:o}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(i)throw i.error}}return r.finish()})}function Jd(r,t){if(Me(r))return dy(r,t);if(He(r))return uy(r,t);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")}function uy(r,t){let e=null,n=(t==null?void 0:t.type)==="bytes"||!1,i=(t==null?void 0:t.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},t),{start(o){s(o,e||(e=r[Symbol.iterator]()))},pull(o){e?s(o,e):o.close()},cancel(){((e==null?void 0:e.return)&&e.return()||!0)&&(e=null)}}),Object.assign({highWaterMark:n?i:void 0},t));function s(o,c){let a,f=null,m=o.desiredSize||null;for(;!(f=c.next(n?m:null)).done;)if(ArrayBuffer.isView(f.value)&&(a=N(f.value))&&(m!=null&&n&&(m=m-a.byteLength+1),f.value=a),o.enqueue(f.value),m!=null&&--m<=0)return;o.close()}}function dy(r,t){let e=null,n=(t==null?void 0:t.type)==="bytes"||!1,i=(t==null?void 0:t.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},t),{start(o){return A(this,void 0,void 0,function*(){yield s(o,e||(e=r[Symbol.asyncIterator]()))})},pull(o){return A(this,void 0,void 0,function*(){e?yield s(o,e):o.close()})},cancel(){return A(this,void 0,void 0,function*(){((e==null?void 0:e.return)&&(yield e.return())||!0)&&(e=null)})}}),Object.assign({highWaterMark:n?i:void 0},t));function s(o,c){return A(this,void 0,void 0,function*(){let a,f=null,m=o.desiredSize||null;for(;!(f=yield c.next(n?m:null)).done;)if(ArrayBuffer.isView(f.value)&&(a=N(f.value))&&(m!=null&&n&&(m=m-a.byteLength+1),f.value=a),o.enqueue(f.value),m!=null&&--m<=0)return;o.close()})}}function Qd(r){return new hc(r)}var hc=class{constructor(t){this._numChunks=0,this._finished=!1,this._bufferedSize=0;let{["readableStrategy"]:e,["writableStrategy"]:n,["queueingStrategy"]:i="count"}=t,s=yu(t,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null,this._builder=vn(s),this._getSize=i!=="bytes"?qd:Zd;let{["highWaterMark"]:o=i==="bytes"?Math.pow(2,14):1e3}=Object.assign({},e),{["highWaterMark"]:c=i==="bytes"?Math.pow(2,14):1e3}=Object.assign({},n);this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:a=>{this._maybeFlush(this._builder,this._controller=a)},start:a=>{this._maybeFlush(this._builder,this._controller=a)}},{highWaterMark:o,size:i!=="bytes"?qd:Zd}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:c,size:a=>this._writeValueAndReturnChunkSize(a)})}_writeValueAndReturnChunkSize(t){let e=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(t)),this._bufferedSize-e}_maybeFlush(t,e){e!=null&&(this._bufferedSize>=e.desiredSize&&++this._numChunks&&this._enqueue(e,t.toVector()),t.finished&&((t.length>0||this._numChunks===0)&&++this._numChunks&&this._enqueue(e,t.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(e,null)))}_enqueue(t,e){this._bufferedSize=0,this._controller=null,e==null?t.close():t.enqueue(e)}},qd=r=>{var t;return(t=r==null?void 0:r.length)!==null&&t!==void 0?t:0},Zd=r=>{var t;return(t=r==null?void 0:r.byteLength)!==null&&t!==void 0?t:0};function Wo(r,t){let e=new _r,n=null,i=new ReadableStream({cancel(){return A(this,void 0,void 0,function*(){yield e.close()})},start(c){return A(this,void 0,void 0,function*(){yield o(c,n||(n=yield s()))})},pull(c){return A(this,void 0,void 0,function*(){n?yield o(c,n):c.close()})}});return{writable:new WritableStream(e,Object.assign({highWaterMark:Math.pow(2,14)},r)),readable:i};function s(){return A(this,void 0,void 0,function*(){return yield(yield Ot.from(e)).open(t)})}function o(c,a){return A(this,void 0,void 0,function*(){let f=c.desiredSize,m=null;for(;!(m=yield a.next()).done;)if(c.enqueue(m.value),f!=null&&--f<=0)return;c.close()})}}function $o(r,t){let e=new this(r),n=new ye(e),i=new ReadableStream({cancel(){return A(this,void 0,void 0,function*(){yield n.cancel()})},pull(o){return A(this,void 0,void 0,function*(){yield s(o)})},start(o){return A(this,void 0,void 0,function*(){yield s(o)})}},Object.assign({highWaterMark:Math.pow(2,14)},t));return{writable:new WritableStream(e,r),readable:i};function s(o){return A(this,void 0,void 0,function*(){let c=null,a=o.desiredSize;for(;c=yield n.read(a||null);)if(o.enqueue(c),a!=null&&(a-=c.byteLength)<=0)return;o.close()})}}var my=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Fa),Ja),za),Ta),Sa),Ha),{compareSchemas:An,compareFields:Fd,compareTypes:Td});Jt.toDOMStream=Jd;gt.throughDOM=Qd;Ot.throughDOM=Wo;Qr.throughDOM=Wo;gr.throughDOM=Wo;en.throughDOM=$o;rn.throughDOM=$o;wr.throughDOM=$o;function ni(r){switch(r.typeId){case h.Binary:return{sqlType:"binary"};case h.Bool:return{sqlType:"bool"};case h.Date:return{sqlType:"date"};case h.DateDay:return{sqlType:"date32[d]"};case h.DateMillisecond:return{sqlType:"date64[ms]"};case h.Decimal:{let t=r;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case h.Float:return{sqlType:"float"};case h.Float16:return{sqlType:"float16"};case h.Float32:return{sqlType:"float32"};case h.Float64:return{sqlType:"float64"};case h.Int:return{sqlType:"int32"};case h.Int16:return{sqlType:"int16"};case h.Int32:return{sqlType:"int32"};case h.Int64:return{sqlType:"int64"};case h.Uint16:return{sqlType:"uint16"};case h.Uint32:return{sqlType:"uint32"};case h.Uint64:return{sqlType:"uint64"};case h.Uint8:return{sqlType:"uint8"};case h.IntervalDayTime:return{sqlType:"interval[dt]"};case h.IntervalYearMonth:return{sqlType:"interval[m]"};case h.List:return{sqlType:"list",valueType:ni(r.valueType)};case h.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:r.byteWidth};case h.Null:return{sqlType:"null"};case h.Utf8:return{sqlType:"utf8"};case h.Struct:return{sqlType:"struct",fields:r.children.map(e=>Yo(e.name,e.type))};case h.Map:{let t=r;return{sqlType:"map",keyType:ni(t.keyType),valueType:ni(t.valueType)}}case h.Time:return{sqlType:"time[s]"};case h.TimeMicrosecond:return{sqlType:"time[us]"};case h.TimeMillisecond:return{sqlType:"time[ms]"};case h.TimeNanosecond:return{sqlType:"time[ns]"};case h.TimeSecond:return{sqlType:"time[s]"};case h.Timestamp:return{sqlType:"timestamp",timezone:r.timezone||void 0};case h.TimestampSecond:return{sqlType:"timestamp[s]",timezone:r.timezone||void 0};case h.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:r.timezone||void 0};case h.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:r.timezone||void 0};case h.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:r.timezone||void 0}}throw new Error(`unsupported arrow type: ${r.toString()}`)}function Yo(r,t){let e=ni(t);return e.name=r,e}var Xo=class{constructor(){this._bindings=null;this._nextMessageId=0}log(t){this.postMessage({messageId:this._nextMessageId++,requestId:0,type:"LOG",data:t},[])}sendOK(t){this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"OK",data:null},[])}failWith(t,e){let n={name:e.name,message:e.message,stack:e.stack||void 0};this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"ERROR",data:n},[])}async onMessage(t){switch(t.type){case"PING":this.sendOK(t);return;case"INSTANTIATE":this._bindings!=null&&this.failWith(t,new Error("duckdb already initialized"));try{this._bindings=await this.instantiate(t.data[0],t.data[1],e=>{this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"INSTANTIATE_PROGRESS",data:e},[])}),this.sendOK(t)}catch(e){this._bindings=null,this.failWith(t,e)}return;default:break}if(!this._bindings)return this.failWith(t,new Error("duckdb is not initialized"));try{switch(t.type){case"GET_VERSION":this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"VERSION_STRING",data:this._bindings.getVersion()},[]);break;case"GET_FEATURE_FLAGS":this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"FEATURE_FLAGS",data:this._bindings.getFeatureFlags()},[]);break;case"RESET":this._bindings.reset(),this.sendOK(t);break;case"OPEN":this._bindings.open(t.data),this.sendOK(t);break;case"DROP_FILE":this._bindings.dropFile(t.data),this.sendOK(t);break;case"DROP_FILES":this._bindings.dropFiles(),this.sendOK(t);break;case"FLUSH_FILES":this._bindings.flushFiles(),this.sendOK(t);break;case"CONNECT":{let e=this._bindings.connect();this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"CONNECTION_INFO",data:e.useUnsafe((n,i)=>i)},[]);break}case"DISCONNECT":this._bindings.disconnect(t.data),this.sendOK(t);break;case"CREATE_PREPARED":{let e=this._bindings.createPrepared(t.data[0],t.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"PREPARED_STATEMENT_ID",data:e},[]);break}case"CLOSE_PREPARED":{this._bindings.closePrepared(t.data[0],t.data[1]),this.sendOK(t);break}case"RUN_PREPARED":{let e=this._bindings.runPrepared(t.data[0],t.data[1],t.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"QUERY_RESULT",data:e},[e.buffer]);break}case"RUN_QUERY":{let e=this._bindings.runQuery(t.data[0],t.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"QUERY_RESULT",data:e},[e.buffer]);break}case"SEND_PREPARED":{let e=this._bindings.sendPrepared(t.data[0],t.data[1],t.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"QUERY_START",data:e},[e.buffer]);break}case"SEND_QUERY":{let e=this._bindings.sendQuery(t.data[0],t.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"QUERY_START",data:e},[e.buffer]);break}case"FETCH_QUERY_RESULTS":{let e=this._bindings.fetchQueryResults(t.data);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"QUERY_RESULT_CHUNK",data:e},[e.buffer]);break}case"GET_TABLE_NAMES":{let e=this._bindings.getTableNames(t.data[0],t.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"TABLE_NAMES",data:e},[]);break}case"GLOB_FILE_INFOS":{let e=this._bindings.globFiles(t.data);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"FILE_INFOS",data:e},[]);break}case"REGISTER_FILE_URL":this._bindings.registerFileURL(t.data[0],t.data[1]),this.sendOK(t);break;case"REGISTER_FILE_BUFFER":this._bindings.registerFileBuffer(t.data[0],t.data[1]),this.sendOK(t);break;case"REGISTER_FILE_HANDLE":this._bindings.registerFileHandle(t.data[0],t.data[1]),this.sendOK(t);break;case"COPY_FILE_TO_PATH":this._bindings.copyFileToPath(t.data[0],t.data[1]),this.sendOK(t);break;case"COPY_FILE_TO_BUFFER":{let e=this._bindings.copyFileToBuffer(t.data);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"FILE_BUFFER",data:e},[]);break}case"COLLECT_FILE_STATISTICS":this._bindings.collectFileStatistics(t.data[0],t.data[1]),this.sendOK(t);break;case"EXPORT_FILE_STATISTICS":{this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"FILE_STATISTICS",data:this._bindings.exportFileStatistics(t.data)},[]);break}case"INSERT_ARROW_FROM_IPC_STREAM":{this._bindings.insertArrowFromIPCStream(t.data[0],t.data[1],t.data[2]),this.sendOK(t);break}case"IMPORT_CSV_FROM_PATH":{this._bindings.insertCSVFromPath(t.data[0],t.data[1],t.data[2]),this.sendOK(t);break}case"IMPORT_JSON_FROM_PATH":{this._bindings.insertJSONFromPath(t.data[0],t.data[1],t.data[2]),this.sendOK(t);break}case"TOKENIZE":{let e=this._bindings.tokenize(t.data);this.postMessage({messageId:this._nextMessageId++,requestId:t.messageId,type:"SCRIPT_TOKENS",data:e},[]);break}}}catch(e){return this.failWith(t,e)}}};var mc={},_y=(()=>{var r=mc.url;return function(t){t=t||{};function e(){return It.buffer!=Se&&Pr(It.buffer),Bc}function n(){return It.buffer!=Se&&Pr(It.buffer),Dc}function i(){return It.buffer!=Se&&Pr(It.buffer),Ec}function s(){return It.buffer!=Se&&Pr(It.buffer),Oc}function o(){return It.buffer!=Se&&Pr(It.buffer),Mc}function c(){return It.buffer!=Se&&Pr(It.buffer),Rc}var a=typeof t<"u"?t:{},f,m;a.ready=new Promise(function(l,u){f=l,m=u});var y=Object.assign({},a),b=[],I="./this.program",J=(l,u)=>{throw u},Z=typeof window=="object",at=typeof importScripts=="function",st=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",x=a.ENVIRONMENT_IS_PTHREAD||!1,St="";function Tn(l){return a.locateFile?a.locateFile(l,St):St+l}var an,is,cn,si;function Q(l){if(l instanceof di)return;dt("exiting due to exception: "+l)}var Nt,te,Yt;if(st){at?St=pc().dirname(St)+"/":St=__dirname+"/",Yt=()=>{te||(Nt=ef(),te=pc())},an=function(d,p){return Yt(),d=te.normalize(d),Nt.readFileSync(d,p?void 0:"utf8")},cn=u=>{var d=an(u,!0);return d.buffer||(d=new Uint8Array(d)),d},is=(u,d,p)=>{Yt(),u=te.normalize(u),Nt.readFile(u,function(_,S){_?p(_):d(S.buffer)})},process.argv.length>1&&(I=process.argv[1].replace(/\\/g,"/")),b=process.argv.slice(2),process.on("uncaughtException",function(u){if(!(u instanceof di))throw u}),process.on("unhandledRejection",function(u){throw u}),J=(u,d)=>{if(na())throw process.exitCode=u,d;Q(d),process.exit(u)},a.inspect=function(){return"[Emscripten Module object]"};let l;try{l=rf()}catch(u){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),u}global.Worker=l.Worker}else(Z||at)&&(at?St=self.location.href:typeof document<"u"&&document.currentScript&&(St=document.currentScript.src),r&&(St=r),St.indexOf("blob:")!==0?St=St.substr(0,St.replace(/[?#].*/,"").lastIndexOf("/")+1):St="",st||(an=l=>{var u=new XMLHttpRequest;return u.open("GET",l,!1),u.send(null),u.responseText},at&&(cn=l=>{var u=new XMLHttpRequest;return u.open("GET",l,!1),u.responseType="arraybuffer",u.send(null),new Uint8Array(u.response)}),is=(l,u,d)=>{var p=new XMLHttpRequest;p.open("GET",l,!0),p.responseType="arraybuffer",p.onload=()=>{if(p.status==200||p.status==0&&p.response){u(p.response);return}d()},p.onerror=d,p.send(null)}),si=l=>document.title=l);st&&typeof performance>"u"&&(global.performance=nf().performance);var Xt=console.log.bind(console),Pt=console.warn.bind(console);st&&(Yt(),Xt=l=>Nt.writeSync(1,l+`
`),Pt=l=>Nt.writeSync(2,l+`
`));var ut=a.print||Xt,dt=a.printErr||Pt;Object.assign(a,y),y=null,a.arguments&&(b=a.arguments),a.thisProgram&&(I=a.thisProgram),a.quit&&(J=a.quit);function rr(l){rr.shown||(rr.shown={}),rr.shown[l]||(rr.shown[l]=1,dt(l))}var Fy=Atomics.load,Ty=Atomics.store,By=Atomics.compareExchange,oi;a.wasmBinary&&(oi=a.wasmBinary);var vc=a.noExitRuntime||!0;typeof WebAssembly!="object"&&Ce("no native wasm support detected");var It,Sc,ea=!1,ai;function Ic(l,u){l||Ce(u)}function mf(l){var u=a["_"+l];return u}function _f(l,u,d,p,_){var S={string:function(Lt){var Pe=0;if(Lt!=null&&Lt!==0){var nr=(Lt.length<<2)+1;Pe=_s(nr),ra(Lt,Pe,nr)}return Pe},array:function(Lt){var Pe=_s(Lt.length);return Tc(Lt,Pe),Pe}};function g(Lt){return u==="string"?Sr(Lt):u==="boolean"?Boolean(Lt):Lt}var v=mf(l),F=[],et=0;if(p)for(var ot=0;ot<p.length;ot++){var Ee=S[d[ot]];Ee?(et===0&&(et=pa()),F[ot]=Ee(p[ot])):F[ot]=p[ot]}var yt=v.apply(null,F);function Bn(Lt){return et!==0&&ms(et),g(Lt)}return yt=Bn(yt),yt}var Ac=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function xc(l,u,d){for(var p=u+d,_=u;l[_]&&!(_>=p);)++_;if(_-u>16&&l.buffer&&Ac)return Ac.decode(l.buffer instanceof SharedArrayBuffer?l.slice(u,_):l.subarray(u,_));for(var S="";u<_;){var g=l[u++];if(!(g&128)){S+=String.fromCharCode(g);continue}var v=l[u++]&63;if((g&224)==192){S+=String.fromCharCode((g&31)<<6|v);continue}var F=l[u++]&63;if((g&240)==224?g=(g&15)<<12|v<<6|F:g=(g&7)<<18|v<<12|F<<6|l[u++]&63,g<65536)S+=String.fromCharCode(g);else{var et=g-65536;S+=String.fromCharCode(55296|et>>10,56320|et&1023)}}return S}function Sr(l,u){return l?xc(n(),l,u):""}function Fc(l,u,d,p){if(!(p>0))return 0;for(var _=d,S=d+p-1,g=0;g<l.length;++g){var v=l.charCodeAt(g);if(v>=55296&&v<=57343){var F=l.charCodeAt(++g);v=65536+((v&1023)<<10)|F&1023}if(v<=127){if(d>=S)break;u[d++]=v}else if(v<=2047){if(d+1>=S)break;u[d++]=192|v>>6,u[d++]=128|v&63}else if(v<=65535){if(d+2>=S)break;u[d++]=224|v>>12,u[d++]=128|v>>6&63,u[d++]=128|v&63}else{if(d+3>=S)break;u[d++]=240|v>>18,u[d++]=128|v>>12&63,u[d++]=128|v>>6&63,u[d++]=128|v&63}}return u[d]=0,d-_}function ra(l,u,d){return Fc(l,n(),u,d)}function yf(l){for(var u=0,d=0;d<l.length;++d){var p=l.charCodeAt(d);p>=55296&&p<=57343&&(p=65536+((p&1023)<<10)|l.charCodeAt(++d)&1023),p<=127?++u:p<=2047?u+=2:p<=65535?u+=3:u+=4}return u}function Tc(l,u){e().set(l,u)}function bf(l,u,d){for(var p=0;p<l.length;++p)e()[u++>>0]=l.charCodeAt(p);d||(e()[u>>0]=0)}var Se,Bc,Dc,Ec,Oc,Mc,gf,wf,Rc;x&&(Se=a.buffer);function Pr(l){Se=l,a.HEAP8=Bc=new Int8Array(l),a.HEAP16=Ec=new Int16Array(l),a.HEAP32=Mc=new Int32Array(l),a.HEAPU8=Dc=new Uint8Array(l),a.HEAPU16=Oc=new Uint16Array(l),a.HEAPU32=gf=new Uint32Array(l),a.HEAPF32=wf=new Float32Array(l),a.HEAPF64=Rc=new Float64Array(l)}var Uc=a.INITIAL_MEMORY||16777216;if(x)It=a.wasmMemory,Se=a.buffer;else if(a.wasmMemory)It=a.wasmMemory;else if(It=new WebAssembly.Memory({initial:Uc/65536,maximum:32768,shared:!0}),!(It.buffer instanceof SharedArrayBuffer))throw dt("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),st&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");It&&(Se=It.buffer),Uc=Se.byteLength,Pr(Se);var kc,Nc=[],Lc=[],vf=[],Cc=[],Sf=!1;function na(){return vc}function If(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)Ff(a.preRun.shift());ss(Nc)}function Pc(){Sf=!0,!x&&ss(Lc)}function Af(){x||ss(vf)}function xf(){if(!x){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)Bf(a.postRun.shift());ss(Cc)}}function Ff(l){Nc.unshift(l)}function Tf(l){Lc.unshift(l)}function Bf(l){Cc.unshift(l)}var ln=0,ia=null,ci=null;function Df(l){ln++,a.monitorRunDependencies&&a.monitorRunDependencies(ln)}function Ef(l){if(ln--,a.monitorRunDependencies&&a.monitorRunDependencies(ln),ln==0&&(ia!==null&&(clearInterval(ia),ia=null),ci)){var u=ci;ci=null,u()}}function Ce(l){x?postMessage({cmd:"onAbort",arg:l}):a.onAbort&&a.onAbort(l),l="Aborted("+l+")",dt(l),ea=!0,ai=1,l+=". Build with -sASSERTIONS for more info.";var u=new WebAssembly.RuntimeError(l);throw m(u),u}var Of="data:application/octet-stream;base64,";function Vc(l){return l.startsWith(Of)}var Be;a.locateFile?(Be="./duckdb-coi.wasm",Vc(Be)||(Be=Tn(Be))):Be=new URL("./duckdb-coi.wasm",mc.url).toString();function Hc(l){try{if(l==Be&&oi)return new Uint8Array(oi);if(cn)return cn(l);throw"both async and sync fetching of the wasm failed"}catch(u){Ce(u)}}function Mf(){return!oi&&(Z||at)&&typeof fetch=="function"?fetch(Be,{credentials:"same-origin"}).then(function(l){if(!l.ok)throw"failed to load wasm binary file at '"+Be+"'";return l.arrayBuffer()}).catch(function(){return Hc(Be)}):Promise.resolve().then(function(){return Hc(Be)})}function Rf(){var l={a:Mh};function u(g,v){var F=g.exports;if(a.asm=F,Vf(a.asm.eb),kc=a.asm.rb,Tf(a.asm.ta),Sc=v,!x){var et=E.unusedWorkers.length;E.unusedWorkers.forEach(function(ot){E.loadWasmModuleToWorker(ot,function(){--et||Ef("wasm-instantiate")})})}}x||Df("wasm-instantiate");function d(g){u(g.instance,g.module)}function p(g){return Mf().then(function(v){return WebAssembly.instantiate(v,l)}).then(function(v){return v}).then(g,function(v){dt("failed to asynchronously prepare wasm: "+v),Ce(v)})}function _(){return!oi&&typeof WebAssembly.instantiateStreaming=="function"&&!Vc(Be)&&typeof fetch=="function"?fetch(Be,{credentials:"same-origin"}).then(function(g){var v=WebAssembly.instantiateStreaming(g,l);return v.then(d,function(F){return dt("wasm streaming compile failed: "+F),dt("falling back to ArrayBuffer instantiation"),p(d)})}):p(d)}if(a.instantiateWasm)try{var S=a.instantiateWasm(l,u);return S}catch(g){return dt("Module.instantiateWasm callback failed with error: "+g),!1}return _().catch(m),{}}var Uf={};function ss(l){for(;l.length>0;){var u=l.shift();if(typeof u=="function"){u(a);continue}var d=u.func;typeof d=="number"?u.arg===void 0?sa(d)():sa(d)(u.arg):d(u.arg===void 0?null:u.arg)}}function kf(l){var u=pa(),d=l();return ms(u),d}function Nf(l){o()[l>>2]=0;var u=E.pthreads[l];delete E.pthreads[l],u.worker.terminate(),fa(l),E.runningWorkers.splice(E.runningWorkers.indexOf(u.worker),1),u.worker.pthread=void 0}function Lf(l){var u=E.pthreads[l];u.worker.postMessage({cmd:"cancel"})}function zc(l){var u=E.pthreads[l];if(u){o()[l>>2]=0;var d=u.worker;E.returnWorkerToPool(d)}}function jc(l,u){n().fill(0,l,l+u)}function Wc(l){var u=E.getNewWorker();if(!u)return 6;E.runningWorkers.push(u);var d=E.pthreads[l.pthread_ptr]={worker:u,threadInfoStruct:l.pthread_ptr};u.pthread=d;var p={cmd:"run",start_routine:l.startRoutine,arg:l.arg,threadInfoStruct:l.pthread_ptr};return u.runPthread=()=>{p.time=performance.now(),u.postMessage(p,l.transferList)},u.loaded&&(u.runPthread(),delete u.runPthread),0}function $c(l){zl(l)}function Yc(l){if(l instanceof di||l=="unwind")return ai;J(1,l)}var E={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],init:function(){x?E.initWorker():E.initMainThread()},initMainThread:function(){for(var l=4,u=0;u<l;++u)E.allocateUnusedWorker()},initWorker:function(){vc=!1},pthreads:{},setExitStatus:function(l){ai=l},terminateAllThreads:function(){for(var l in E.pthreads){var u=E.pthreads[l];u&&u.worker&&E.returnWorkerToPool(u.worker)}for(var d=0;d<E.unusedWorkers.length;++d){var p=E.unusedWorkers[d];p.terminate()}E.unusedWorkers=[]},returnWorkerToPool:function(l){E.runWithoutMainThreadQueuedCalls(function(){delete E.pthreads[l.pthread.threadInfoStruct],E.unusedWorkers.push(l),E.runningWorkers.splice(E.runningWorkers.indexOf(l),1),fa(l.pthread.threadInfoStruct),l.pthread=void 0})},runWithoutMainThreadQueuedCalls:function(l){o()[Hl>>2]=0;try{l()}finally{o()[Hl>>2]=1}},receiveObjectTransfer:function(l){},threadInit:function(){for(var l in E.tlsInitFunctions)E.tlsInitFunctions.hasOwnProperty(l)&&E.tlsInitFunctions[l]()},loadWasmModuleToWorker:function(l,u){l.onmessage=d=>{var p=d.data,_=p.cmd;if(l.pthread&&(E.currentProxiedOperationCallerThread=l.pthread.threadInfoStruct),p.targetThread&&p.targetThread!=ps()){var S=E.pthreads[p.targetThread];S?S.worker.postMessage(p,p.transferList):dt('Internal error! Worker sent a message "'+_+'" to target pthread '+p.targetThread+", but that thread no longer exists!"),E.currentProxiedOperationCallerThread=void 0;return}_==="processProxyingQueue"?Il(p.queue):_==="spawnThread"?Wc(p):_==="cleanupThread"?zc(p.thread):_==="killThread"?Nf(p.thread):_==="cancelThread"?Lf(p.thread):_==="loaded"?(l.loaded=!0,u&&u(l),l.runPthread&&(l.runPthread(),delete l.runPthread)):_==="print"?ut("Thread "+p.threadId+": "+p.text):_==="printErr"?dt("Thread "+p.threadId+": "+p.text):_==="alert"?alert("Thread "+p.threadId+": "+p.text):p.target==="setimmediate"?l.postMessage(p):_==="onAbort"?a.onAbort&&a.onAbort(p.arg):_&&dt("worker sent an unknown command "+_),E.currentProxiedOperationCallerThread=void 0},l.onerror=d=>{var p="worker sent an error!";throw dt(p+" "+d.filename+":"+d.lineno+": "+d.message),d},st&&(l.on("message",function(d){l.onmessage({data:d})}),l.on("error",function(d){l.onerror(d)}),l.on("detachedExit",function(){})),l.postMessage({cmd:"load",urlOrBlob:a.mainScriptUrlOrBlob,wasmMemory:It,wasmModule:Sc})},allocateUnusedWorker:function(){if(!a.locateFile){E.unusedWorkers.push(new Worker(new URL("duckdb_wasm.worker.js",mc.url)));return}var l=Tn("duckdb_wasm.worker.js");E.unusedWorkers.push(new Worker(l))},getNewWorker:function(){return E.unusedWorkers.length==0&&(E.allocateUnusedWorker(),E.loadWasmModuleToWorker(E.unusedWorkers[0])),E.unusedWorkers.pop()}};function Cf(){var l=ps(),u=o()[l+44>>2],d=o()[l+48>>2],p=u-d;Vl(u,p),ms(u)}a.establishStackSpace=Cf;function Xc(l){if(x)return tt(1,0,l);try{$c(l)}catch(u){Yc(u)}}var os=[];function sa(l){var u=os[l];return u||(l>=os.length&&(os.length=l+1),os[l]=u=kc.get(l)),u}function Pf(l,u){return sa(l)(u)}a.invokeEntryPoint=Pf;function Vf(l){E.tlsInitFunctions.push(l)}function Hf(l,u,d,p){Ce("Assertion failed: "+Sr(l)+", at: "+[u?Sr(u):"unknown filename",d,p?Sr(p):"unknown function"])}function zf(l){Ll(l,!at,1,!Z),E.threadInit()}function jf(l){x?postMessage({cmd:"cleanupThread",thread:l}):zc(l)}function Gc(l,u,d,p){return x?tt(2,1,l,u,d,p):Kc(l,u,d,p)}function Kc(l,u,d,p){if(typeof SharedArrayBuffer>"u")return dt("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var _=[],S=0;if(x&&(_.length===0||S))return Gc(l,u,d,p);if(S)return S;var g={startRoutine:d,pthread_ptr:l,arg:p,transferList:_};return x?(g.cmd="spawnThread",postMessage(g,_),0):Wc(g)}var Gt={buffers:[null,[],[]],printChar:function(l,u){var d=Gt.buffers[l];u===0||u===10?((l===1?ut:dt)(xc(d,0)),d.length=0):d.push(u)},varargs:void 0,get:function(){Gt.varargs+=4;var l=o()[Gt.varargs-4>>2];return l},getStr:function(l){var u=Sr(l);return u}};function Jc(l,u,d,p,_){if(x)return tt(3,1,l,u,d,p,_)}function Wf(){dt("missing function: $SOCKFS"),Ce(-1)}function qc(){dt("missing function: $FS"),Ce(-1)}function li(l){var u=Wf.getSocket(l);if(!u)throw new qc.ErrnoError(8);return u}function oa(l){return(l&255)+"."+(l>>8&255)+"."+(l>>16&255)+"."+(l>>24&255)}function Zc(l){var u="",d=0,p=0,_=0,S=0,g=0,v=0,F=[l[0]&65535,l[0]>>16,l[1]&65535,l[1]>>16,l[2]&65535,l[2]>>16,l[3]&65535,l[3]>>16],et=!0,ot="";for(v=0;v<5;v++)if(F[v]!==0){et=!1;break}if(et){if(ot=oa(F[6]|F[7]<<16),F[5]===-1)return u="::ffff:",u+=ot,u;if(F[5]===0)return u="::",ot==="0.0.0.0"&&(ot=""),ot==="0.0.0.1"&&(ot="1"),u+=ot,u}for(d=0;d<8;d++)F[d]===0&&(d-_>1&&(g=0),_=d,g++),g>p&&(p=g,S=d-p+1);for(d=0;d<8;d++){if(p>1&&F[d]===0&&d>=S&&d<S+p){d===S&&(u+=":",S===0&&(u+=":"));continue}u+=Number(da(F[d]&65535)).toString(16),u+=d<7?":":""}return u}function Qc(l,u){var d=i()[l>>1],p=da(s()[l+2>>1]),_;switch(d){case 2:if(u!==16)return{errno:28};_=o()[l+4>>2],_=oa(_);break;case 10:if(u!==28)return{errno:28};_=[o()[l+8>>2],o()[l+12>>2],o()[l+16>>2],o()[l+20>>2]],_=Zc(_);break;default:return{errno:5}}return{family:d,addr:_,port:p}}function as(l){for(var u=l.split("."),d=0;d<4;d++){var p=Number(u[d]);if(isNaN(p))return null;u[d]=p}return(u[0]|u[1]<<8|u[2]<<16|u[3]<<24)>>>0}function cs(l){return parseInt(l)}function aa(l){var u,d,p,_,S=/^((?=.*::)(?!.*::.+::)(::)?([\dA-F]{1,4}:(:|\b)|){5}|([\dA-F]{1,4}:){6})((([\dA-F]{1,4}((?!\3)::|:\b|$))|(?!\2\3)){2}|(((2[0-4]|1\d|[1-9])?\d|25[0-5])\.?\b){4})$/i,g=[];if(!S.test(l))return null;if(l==="::")return[0,0,0,0,0,0,0,0];for(l.startsWith("::")?l=l.replace("::","Z:"):l=l.replace("::",":Z:"),l.indexOf(".")>0?(l=l.replace(new RegExp("[.]","g"),":"),u=l.split(":"),u[u.length-4]=cs(u[u.length-4])+cs(u[u.length-3])*256,u[u.length-3]=cs(u[u.length-2])+cs(u[u.length-1])*256,u=u.slice(0,u.length-2)):u=l.split(":"),p=0,_=0,d=0;d<u.length;d++)if(typeof u[d]=="string")if(u[d]==="Z"){for(_=0;_<8-u.length+1;_++)g[d+_]=0;p=_-1}else g[d+p]=hs(parseInt(u[d],16));else g[d+p]=u[d];return[g[1]<<16|g[0],g[3]<<16|g[2],g[5]<<16|g[4],g[7]<<16|g[6]]}var De={address_map:{id:1,addrs:{},names:{}},lookup_name:function(l){var u=as(l);if(u!==null||(u=aa(l),u!==null))return l;var d;if(De.address_map.addrs[l])d=De.address_map.addrs[l];else{var p=De.address_map.id++;Ic(p<65535,"exceeded max address mappings of 65535"),d="172.29."+(p&255)+"."+(p&65280),De.address_map.names[d]=l,De.address_map.addrs[l]=d}return d},lookup_addr:function(l){return De.address_map.names[l]?De.address_map.names[l]:null}};function tl(l,u,d){if(d&&l===0)return null;var p=Qc(l,u);if(p.errno)throw new qc.ErrnoError(p.errno);return p.addr=De.lookup_addr(p.addr)||p.addr,p}function el(l,u,d){if(x)return tt(4,1,l,u,d);var p=li(l),_=tl(u,d);return p.sock_ops.bind(p,_.addr,_.port),0}function rl(l,u,d){if(x)return tt(5,1,l,u,d);var p=li(l),_=tl(u,d);return p.sock_ops.connect(p,_.addr,_.port),0}function nl(l,u,d,p){return x?tt(6,1,l,u,d,p):(u=Gt.getStr(u),u=Gt.calculateAt(l,u),Gt.doAccess(u,d))}function il(l,u,d){return x?tt(7,1,l,u,d):(Gt.varargs=d,0)}function sl(l,u){if(x)return tt(8,1,l,u)}function ol(l,u,d){if(x)return tt(9,1,l,u,d)}function al(l,u,d){if(x)return tt(10,1,l,u,d)}function ca(l,u,d,p,_){switch(u){case 2:d=as(d),jc(l,16),_&&(o()[_>>2]=16),i()[l>>1]=u,o()[l+4>>2]=d,i()[l+2>>1]=hs(p);break;case 10:d=aa(d),jc(l,28),_&&(o()[_>>2]=28),o()[l>>2]=u,o()[l+8>>2]=d[0],o()[l+12>>2]=d[1],o()[l+16>>2]=d[2],o()[l+20>>2]=d[3],i()[l+2>>1]=hs(p);break;default:return 5}return 0}function cl(l,u,d){if(x)return tt(11,1,l,u,d);var p=li(l);if(!p.daddr)return-53;var _=ca(u,p.family,De.lookup_name(p.daddr),p.dport,d);return 0}function ll(l,u,d,p,_){if(x)return tt(12,1,l,u,d,p,_);var S=li(l);return u===1&&d===4?(o()[p>>2]=S.error,o()[_>>2]=4,S.error=null,0):-50}function ul(l,u,d){return x?tt(13,1,l,u,d):(Gt.varargs=d,0)}function dl(l,u){if(x)return tt(14,1,l,u)}function fl(l,u,d){if(x)return tt(15,1,l,u,d)}function hl(l,u,d,p){if(x)return tt(16,1,l,u,d,p)}function pl(l,u,d,p){if(x)return tt(17,1,l,u,d,p);Gt.varargs=p}function ml(l,u,d,p,_,S){if(x)return tt(18,1,l,u,d,p,_,S);var g=li(l),v=g.sock_ops.recvmsg(g,d);if(!v)return 0;if(_)var F=ca(_,g.family,De.lookup_name(v.addr),v.port,S);return n().set(v.buffer,u),v.buffer.byteLength}function _l(l,u,d,p){if(x)return tt(19,1,l,u,d,p)}function yl(l){if(x)return tt(20,1,l)}function bl(l,u,d,p,_,S){if(x)return tt(21,1,l,u,d,p,_,S)}function gl(l,u,d){if(x)return tt(22,1,l,u,d)}function wl(l,u){if(x)return tt(23,1,l,u)}function vl(l,u,d){if(x)return tt(24,1,l,u,d)}function $f(l){}var Sl="To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking";function Yf(l,u){Ce(Sl)}function Xf(l,u){Ce(Sl)}function Gf(){return Date.now()}function Kf(){return 2097152}var Jf=!0;function qf(){return Jf}function Il(l){try{ps()&&Pl(l)}finally{Atomics.sub(o(),l>>2,1)}}function Zf(l,u,d,p){if(l==u)setTimeout(()=>Il(p));else if(x)postMessage({targetThread:l,cmd:"processProxyingQueue",queue:p});else{var _=E.pthreads[l],S=_&&_.worker;if(!S)return;S.postMessage({cmd:"processProxyingQueue",queue:p})}return 1}function Qf(l,u,d){return-1}function th(){Ce("")}function eh(l,u){return globalThis.DUCKDB_RUNTIME.createDirectory(a,l,u)}function rh(l,u){return globalThis.DUCKDB_RUNTIME.checkDirectory(a,l,u)}function nh(l,u){return globalThis.DUCKDB_RUNTIME.listDirectoryEntries(a,l,u)}function ih(l,u){return globalThis.DUCKDB_RUNTIME.removeDirectory(a,l,u)}function sh(l){return globalThis.DUCKDB_RUNTIME.closeFile(a,l)}function oh(l,u){return globalThis.DUCKDB_RUNTIME.checkFile(a,l,u)}function ah(l){return globalThis.DUCKDB_RUNTIME.getLastFileModificationTime(a,l)}function ch(l,u,d,p){return globalThis.DUCKDB_RUNTIME.moveFile(a,l,u,d,p)}function lh(l,u){return globalThis.DUCKDB_RUNTIME.openFile(a,l,u)}function uh(l,u,d,p){return globalThis.DUCKDB_RUNTIME.readFile(a,l,u,d,p)}function dh(l,u){return globalThis.DUCKDB_RUNTIME.truncateFile(a,l,u)}function fh(l,u,d,p){return globalThis.DUCKDB_RUNTIME.writeFile(a,l,u,d,p)}function hh(l,u){return globalThis.DUCKDB_RUNTIME.glob(a,l,u)}function ph(l){return globalThis.DUCKDB_RUNTIME.testPlatformFeature(a,l)}function mh(l,u,d,p,_,S){return globalThis.DUCKDB_RUNTIME.callScalarUDF(a,l,u,d,p,_,S)}function _h(){st||at||rr("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")}function Al(){return 2147483648}var ls;st?ls=()=>{var l=process.hrtime();return l[0]*1e3+l[1]/1e6}:x?ls=()=>performance.now()-a.__performance_now_clock_drift:ls=()=>performance.now();function yh(l,u,d){n().copyWithin(l,u,u+d)}function bh(){return st?sf().cpus().length:navigator.hardwareConcurrency}function tt(l,u){var d=arguments.length-2,p=arguments;return kf(function(){for(var _=d,S=_s(_*8),g=S>>3,v=0;v<d;v++){var F=p[2+v];c()[g+v]=F}return Cl(l,_,S,u)})}var la=[];function gh(l,u,d){la.length=u;for(var p=d>>3,_=0;_<u;_++)la[_]=c()[p+_];var S=l<0,g=S?Uf[-l-1]:Eh[l];return g.apply(null,la)}function wh(l){try{return It.grow(l-Se.byteLength+65535>>>16),Pr(It.buffer),1}catch(u){}}function vh(l){var u=n().length;if(l=l>>>0,l<=u)return!1;var d=Al();if(l>d)return!1;let p=(F,et)=>F+(et-F%et)%et;for(var _=1;_<=4;_*=2){var S=u*(1+.2/_);S=Math.min(S,l+100663296);var g=Math.min(d,p(Math.max(l,S),65536)),v=wh(g);if(v)return!0}return!1}function Sh(){throw"unwind"}var ua={};function Ih(){return I||"./this.program"}function ui(){if(!ui.strings){var l=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",u={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:l,_:Ih()};for(var d in ua)ua[d]===void 0?delete u[d]:u[d]=ua[d];var p=[];for(var d in u)p.push(d+"="+u[d]);ui.strings=p}return ui.strings}function xl(l,u){if(x)return tt(25,1,l,u);var d=0;return ui().forEach(function(p,_){var S=u+d;o()[l+_*4>>2]=S,bf(p,S),d+=p.length+1}),0}function Fl(l,u){if(x)return tt(26,1,l,u);var d=ui();o()[l>>2]=d.length;var p=0;return d.forEach(function(_){p+=_.length+1}),o()[u>>2]=p,0}function Tl(l){return x?tt(27,1,l):0}function Bl(l,u,d,p,_,S){if(x)return tt(28,1,l,u,d,p,_,S);var g=Gt.getStreamFromFD(l),v=Gt.doReadv(g,u,d,p);return o()[S>>2]=v,0}function Dl(l,u,d,p,_,S){if(x)return tt(29,1,l,u,d,p,_,S);var g=Gt.getStreamFromFD(l),v=Gt.doWritev(g,u,d,p);return o()[S>>2]=v,0}function El(l,u,d,p){if(x)return tt(30,1,l,u,d,p);var _=Gt.getStreamFromFD(l),S=Gt.doReadv(_,u,d);return o()[p>>2]=S,0}function Ol(l,u,d,p,_){if(x)return tt(31,1,l,u,d,p,_)}function Ml(l){if(x)return tt(32,1,l);var u=Gt.getStreamFromFD(l);return u.stream_ops&&u.stream_ops.fsync?-u.stream_ops.fsync(u):0}function Rl(l,u,d,p){if(x)return tt(33,1,l,u,d,p);for(var _=0,S=0;S<d;S++){var g=o()[u>>2],v=o()[u+4>>2];u+=8;for(var F=0;F<v;F++)Gt.printChar(l,n()[g+F]);_+=v}return o()[p>>2]=_,0}function Ul(l,u,d,p){if(x)return tt(34,1,l,u,d,p);var _=0,S=0,g=0,v=0,F=0,et=0,ot;function Ee(yt,Bn,Lt,Pe,nr,fi){var w,O,At,Kt;return O=yt===10?28:16,nr=yt===10?Zc(nr):oa(nr),w=ha(O),Kt=ca(w,yt,nr,fi),Ic(!Kt),At=ha(32),o()[At+4>>2]=yt,o()[At+8>>2]=Bn,o()[At+12>>2]=Lt,o()[At+24>>2]=Pe,o()[At+20>>2]=w,yt===10?o()[At+16>>2]=28:o()[At+16>>2]=16,o()[At+28>>2]=0,At}if(d&&(g=o()[d>>2],v=o()[d+4>>2],F=o()[d+8>>2],et=o()[d+12>>2]),F&&!et&&(et=F===2?17:6),!F&&et&&(F=et===17?2:1),et===0&&(et=6),F===0&&(F=1),!l&&!u)return-2;if(g&-1088||d!==0&&o()[d>>2]&2&&!l)return-1;if(g&32)return-2;if(F!==0&&F!==1&&F!==2)return-7;if(v!==0&&v!==2&&v!==10)return-6;if(u&&(u=Sr(u),S=parseInt(u,10),isNaN(S)))return g&1024?-2:-8;if(!l)return v===0&&(v=2),(g&1)===0&&(v===2?_=fs(2130706433):_=[0,0,0,1]),ot=Ee(v,F,et,null,_,S),o()[p>>2]=ot,0;if(l=Sr(l),_=as(l),_!==null)if(v===0||v===2)v=2;else if(v===10&&g&8)_=[0,0,fs(65535),_],v=10;else return-2;else if(_=aa(l),_!==null)if(v===0||v===10)v=10;else return-2;return _!=null?(ot=Ee(v,F,et,l,_,S),o()[p>>2]=ot,0):g&4?-2:(l=De.lookup_name(l),_=as(l),v===0?v=2:v===10&&(_=[0,0,fs(65535),_]),ot=Ee(v,F,et,null,_,S),o()[p>>2]=ot,0)}function Ah(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var l=new Uint8Array(1);return function(){return crypto.getRandomValues(l),l[0]}}else if(st)try{var u=Rp("crypto");return function(){return u.randomBytes(1)[0]}}catch(d){}return function(){Ce("randomDevice")}}function us(l,u){us.randomDevice||(us.randomDevice=Ah());for(var d=0;d<u;d++)e()[l+d>>0]=us.randomDevice();return 0}function xh(l,u,d,p,_,S,g){var v=Qc(l,u);if(v.errno)return-6;var F=v.port,et=v.addr,ot=!1;if(d&&p){var Ee;if(g&1||!(Ee=De.lookup_addr(et))){if(g&8)return-2}else et=Ee;var yt=ra(et,d,p);yt+1>=p&&(ot=!0)}if(_&&S){F=""+F;var yt=ra(F,_,S);yt+1>=S&&(ot=!0)}return ot?-12:0}function ds(l){return l%4===0&&(l%100!==0||l%400===0)}function Fh(l,u){for(var d=0,p=0;p<=u;d+=l[p++]);return d}var kl=[31,29,31,30,31,30,31,31,30,31,30,31],Nl=[31,28,31,30,31,30,31,31,30,31,30,31];function Th(l,u){for(var d=new Date(l.getTime());u>0;){var p=ds(d.getFullYear()),_=d.getMonth(),S=(p?kl:Nl)[_];if(u>S-d.getDate())u-=S-d.getDate()+1,d.setDate(1),_<11?d.setMonth(_+1):(d.setMonth(0),d.setFullYear(d.getFullYear()+1));else return d.setDate(d.getDate()+u),d}return d}function Bh(l,u,d,p){var _=o()[p+40>>2],S={tm_sec:o()[p>>2],tm_min:o()[p+4>>2],tm_hour:o()[p+8>>2],tm_mday:o()[p+12>>2],tm_mon:o()[p+16>>2],tm_year:o()[p+20>>2],tm_wday:o()[p+24>>2],tm_yday:o()[p+28>>2],tm_isdst:o()[p+32>>2],tm_gmtoff:o()[p+36>>2],tm_zone:_?Sr(_):""},g=Sr(d),v={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var F in v)g=g.replace(new RegExp(F,"g"),v[F]);var et=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ot=["January","February","March","April","May","June","July","August","September","October","November","December"];function Ee(w,O,At){for(var Kt=typeof w=="number"?w.toString():w||"";Kt.length<O;)Kt=At[0]+Kt;return Kt}function yt(w,O){return Ee(w,O,"0")}function Bn(w,O){function At(bs){return bs<0?-1:bs>0?1:0}var Kt;return(Kt=At(w.getFullYear()-O.getFullYear()))===0&&(Kt=At(w.getMonth()-O.getMonth()))===0&&(Kt=At(w.getDate()-O.getDate())),Kt}function Lt(w){switch(w.getDay()){case 0:return new Date(w.getFullYear()-1,11,29);case 1:return w;case 2:return new Date(w.getFullYear(),0,3);case 3:return new Date(w.getFullYear(),0,2);case 4:return new Date(w.getFullYear(),0,1);case 5:return new Date(w.getFullYear()-1,11,31);case 6:return new Date(w.getFullYear()-1,11,30)}}function Pe(w){var O=Th(new Date(w.tm_year+1900,0,1),w.tm_yday),At=new Date(O.getFullYear(),0,4),Kt=new Date(O.getFullYear()+1,0,4),bs=Lt(At),xp=Lt(Kt);return Bn(bs,O)<=0?Bn(xp,O)<=0?O.getFullYear()+1:O.getFullYear():O.getFullYear()-1}var nr={"%a":function(w){return et[w.tm_wday].substring(0,3)},"%A":function(w){return et[w.tm_wday]},"%b":function(w){return ot[w.tm_mon].substring(0,3)},"%B":function(w){return ot[w.tm_mon]},"%C":function(w){var O=w.tm_year+1900;return yt(O/100|0,2)},"%d":function(w){return yt(w.tm_mday,2)},"%e":function(w){return Ee(w.tm_mday,2," ")},"%g":function(w){return Pe(w).toString().substring(2)},"%G":function(w){return Pe(w)},"%H":function(w){return yt(w.tm_hour,2)},"%I":function(w){var O=w.tm_hour;return O==0?O=12:O>12&&(O-=12),yt(O,2)},"%j":function(w){return yt(w.tm_mday+Fh(ds(w.tm_year+1900)?kl:Nl,w.tm_mon-1),3)},"%m":function(w){return yt(w.tm_mon+1,2)},"%M":function(w){return yt(w.tm_min,2)},"%n":function(){return`
`},"%p":function(w){return w.tm_hour>=0&&w.tm_hour<12?"AM":"PM"},"%S":function(w){return yt(w.tm_sec,2)},"%t":function(){return"	"},"%u":function(w){return w.tm_wday||7},"%U":function(w){var O=w.tm_yday+7-w.tm_wday;return yt(Math.floor(O/7),2)},"%V":function(w){var O=Math.floor((w.tm_yday+7-(w.tm_wday+6)%7)/7);if((w.tm_wday+371-w.tm_yday-2)%7<=2&&O++,O){if(O==53){var Kt=(w.tm_wday+371-w.tm_yday)%7;Kt!=4&&(Kt!=3||!ds(w.tm_year))&&(O=1)}}else{O=52;var At=(w.tm_wday+7-w.tm_yday-1)%7;(At==4||At==5&&ds(w.tm_year%400-1))&&O++}return yt(O,2)},"%w":function(w){return w.tm_wday},"%W":function(w){var O=w.tm_yday+7-(w.tm_wday+6)%7;return yt(Math.floor(O/7),2)},"%y":function(w){return(w.tm_year+1900).toString().substring(2)},"%Y":function(w){return w.tm_year+1900},"%z":function(w){var O=w.tm_gmtoff,At=O>=0;return O=Math.abs(O)/60,O=O/60*100+O%60,(At?"+":"-")+String("0000"+O).slice(-4)},"%Z":function(w){return w.tm_zone},"%%":function(){return"%"}};g=g.replace(/%%/g,"\0\0");for(var F in nr)g.includes(F)&&(g=g.replace(new RegExp(F,"g"),nr[F](S)));g=g.replace(/\0\0/g,"%");var fi=Oh(g,!1);return fi.length>u?0:(Tc(fi,l),fi.length-1)}function Dh(l,u,d,p){return Bh(l,u,d,p)}E.init();var Eh=[null,Xc,Gc,Jc,el,rl,nl,il,sl,ol,al,cl,ll,ul,dl,fl,hl,pl,ml,_l,yl,bl,gl,wl,vl,xl,Fl,Tl,Bl,Dl,El,Ol,Ml,Rl,Ul];function Oh(l,u,d){var p=d>0?d:yf(l)+1,_=new Array(p),S=Fc(l,_,0,_.length);return u&&(_.length=S),_}var Mh={b:Hf,v:zf,s:jf,aa:Kc,W:Jc,Y:el,X:rl,Q:nl,c:il,ia:sl,y:ol,ea:al,S:cl,V:ll,ka:ul,fa:dl,ja:fl,ga:hl,r:pl,T:ml,N:_l,p:yl,U:bl,l:gl,ha:wl,q:vl,Z:$f,o:Yf,_:Xf,sa:Gf,ba:Kf,ra:qf,da:Zf,I:Qf,f:th,G:eh,H:rh,E:nh,F:ih,k:sh,C:oh,K:ah,D:ch,L:lh,g:uh,J:dh,h:fh,B:hh,j:ph,M:mh,m:_h,la:Al,d:ls,P:yh,ma:bh,z:gh,qa:vh,u:Sh,oa:xl,pa:Fl,$:$c,e:Tl,x:Bl,w:Dl,t:El,A:Ol,O:Ml,i:Rl,n:Ul,ca:us,R:xh,a:It||a.wasmMemory,na:Dh},Dy=Rf(),Rh=a.___wasm_call_ctors=function(){return(Rh=a.___wasm_call_ctors=a.asm.ta).apply(null,arguments)},Uh=a._main=function(){return(Uh=a._main=a.asm.ua).apply(null,arguments)},kh=a._duckdb_web_fs_glob_add_path=function(){return(kh=a._duckdb_web_fs_glob_add_path=a.asm.va).apply(null,arguments)},Nh=a._duckdb_web_clear_response=function(){return(Nh=a._duckdb_web_clear_response=a.asm.wa).apply(null,arguments)},Lh=a._duckdb_web_fail_with=function(){return(Lh=a._duckdb_web_fail_with=a.asm.xa).apply(null,arguments)},Ch=a._duckdb_web_reset=function(){return(Ch=a._duckdb_web_reset=a.asm.ya).apply(null,arguments)},Ph=a._duckdb_web_connect=function(){return(Ph=a._duckdb_web_connect=a.asm.za).apply(null,arguments)},Vh=a._duckdb_web_disconnect=function(){return(Vh=a._duckdb_web_disconnect=a.asm.Aa).apply(null,arguments)},Hh=a._duckdb_web_flush_files=function(){return(Hh=a._duckdb_web_flush_files=a.asm.Ba).apply(null,arguments)},zh=a._duckdb_web_flush_file=function(){return(zh=a._duckdb_web_flush_file=a.asm.Ca).apply(null,arguments)},jh=a._duckdb_web_open=function(){return(jh=a._duckdb_web_open=a.asm.Da).apply(null,arguments)},Wh=a._duckdb_web_get_global_file_info=function(){return(Wh=a._duckdb_web_get_global_file_info=a.asm.Ea).apply(null,arguments)},$h=a._duckdb_web_collect_file_stats=function(){return($h=a._duckdb_web_collect_file_stats=a.asm.Fa).apply(null,arguments)},Yh=a._duckdb_web_export_file_stats=function(){return(Yh=a._duckdb_web_export_file_stats=a.asm.Ga).apply(null,arguments)},Xh=a._duckdb_web_fs_drop_file=function(){return(Xh=a._duckdb_web_fs_drop_file=a.asm.Ha).apply(null,arguments)},Gh=a._duckdb_web_fs_drop_files=function(){return(Gh=a._duckdb_web_fs_drop_files=a.asm.Ia).apply(null,arguments)},Kh=a._duckdb_web_fs_glob_file_infos=function(){return(Kh=a._duckdb_web_fs_glob_file_infos=a.asm.Ja).apply(null,arguments)},Jh=a._duckdb_web_fs_get_file_info_by_id=function(){return(Jh=a._duckdb_web_fs_get_file_info_by_id=a.asm.Ka).apply(null,arguments)},qh=a._duckdb_web_fs_get_file_info_by_name=function(){return(qh=a._duckdb_web_fs_get_file_info_by_name=a.asm.La).apply(null,arguments)},Zh=a._duckdb_web_fs_set_file_descriptor=function(){return(Zh=a._duckdb_web_fs_set_file_descriptor=a.asm.Ma).apply(null,arguments)},Qh=a._duckdb_web_fs_register_file_url=function(){return(Qh=a._duckdb_web_fs_register_file_url=a.asm.Na).apply(null,arguments)},tp=a._duckdb_web_fs_register_file_buffer=function(){return(tp=a._duckdb_web_fs_register_file_buffer=a.asm.Oa).apply(null,arguments)},ep=a._duckdb_web_copy_file_to_buffer=function(){return(ep=a._duckdb_web_copy_file_to_buffer=a.asm.Pa).apply(null,arguments)},rp=a._duckdb_web_copy_file_to_path=function(){return(rp=a._duckdb_web_copy_file_to_path=a.asm.Qa).apply(null,arguments)},np=a._duckdb_web_get_version=function(){return(np=a._duckdb_web_get_version=a.asm.Ra).apply(null,arguments)},ip=a._duckdb_web_get_feature_flags=function(){return(ip=a._duckdb_web_get_feature_flags=a.asm.Sa).apply(null,arguments)},sp=a._duckdb_web_tokenize=function(){return(sp=a._duckdb_web_tokenize=a.asm.Ta).apply(null,arguments)},op=a._duckdb_web_udf_scalar_create=function(){return(op=a._duckdb_web_udf_scalar_create=a.asm.Ua).apply(null,arguments)},ap=a._duckdb_web_prepared_create=function(){return(ap=a._duckdb_web_prepared_create=a.asm.Va).apply(null,arguments)},cp=a._duckdb_web_prepared_close=function(){return(cp=a._duckdb_web_prepared_close=a.asm.Wa).apply(null,arguments)},lp=a._duckdb_web_prepared_run=function(){return(lp=a._duckdb_web_prepared_run=a.asm.Xa).apply(null,arguments)},up=a._duckdb_web_prepared_send=function(){return(up=a._duckdb_web_prepared_send=a.asm.Ya).apply(null,arguments)},dp=a._duckdb_web_query_run=function(){return(dp=a._duckdb_web_query_run=a.asm.Za).apply(null,arguments)},fp=a._duckdb_web_query_send=function(){return(fp=a._duckdb_web_query_send=a.asm._a).apply(null,arguments)},hp=a._duckdb_web_query_fetch_results=function(){return(hp=a._duckdb_web_query_fetch_results=a.asm.$a).apply(null,arguments)},pp=a._duckdb_web_get_tablenames=function(){return(pp=a._duckdb_web_get_tablenames=a.asm.ab).apply(null,arguments)},mp=a._duckdb_web_insert_arrow_from_ipc_stream=function(){return(mp=a._duckdb_web_insert_arrow_from_ipc_stream=a.asm.bb).apply(null,arguments)},_p=a._duckdb_web_insert_csv_from_path=function(){return(_p=a._duckdb_web_insert_csv_from_path=a.asm.cb).apply(null,arguments)},yp=a._duckdb_web_insert_json_from_path=function(){return(yp=a._duckdb_web_insert_json_from_path=a.asm.db).apply(null,arguments)},bp=a._emscripten_tls_init=function(){return(bp=a._emscripten_tls_init=a.asm.eb).apply(null,arguments)},Ll=a.__emscripten_thread_init=function(){return(Ll=a.__emscripten_thread_init=a.asm.fb).apply(null,arguments)},gp=a.__emscripten_thread_crashed=function(){return(gp=a.__emscripten_thread_crashed=a.asm.gb).apply(null,arguments)},fs=a._htonl=function(){return(fs=a._htonl=a.asm.hb).apply(null,arguments)},hs=a._htons=function(){return(hs=a._htons=a.asm.ib).apply(null,arguments)},Cl=a._emscripten_run_in_main_runtime_thread_js=function(){return(Cl=a._emscripten_run_in_main_runtime_thread_js=a.asm.jb).apply(null,arguments)},da=a._ntohs=function(){return(da=a._ntohs=a.asm.kb).apply(null,arguments)},Pl=a._emscripten_proxy_execute_queue=function(){return(Pl=a._emscripten_proxy_execute_queue=a.asm.lb).apply(null,arguments)},fa=a.__emscripten_thread_free_data=function(){return(fa=a.__emscripten_thread_free_data=a.asm.mb).apply(null,arguments)},wp=a.__emscripten_thread_exit=function(){return(wp=a.__emscripten_thread_exit=a.asm.nb).apply(null,arguments)},ps=a._pthread_self=function(){return(ps=a._pthread_self=a.asm.ob).apply(null,arguments)},ha=a._malloc=function(){return(ha=a._malloc=a.asm.pb).apply(null,arguments)},vp=a._free=function(){return(vp=a._free=a.asm.qb).apply(null,arguments)},Vl=a._emscripten_stack_set_limits=function(){return(Vl=a._emscripten_stack_set_limits=a.asm.sb).apply(null,arguments)},pa=a.stackSave=function(){return(pa=a.stackSave=a.asm.tb).apply(null,arguments)},ms=a.stackRestore=function(){return(ms=a.stackRestore=a.asm.ub).apply(null,arguments)},_s=a.stackAlloc=function(){return(_s=a.stackAlloc=a.asm.vb).apply(null,arguments)},Hl=a.__emscripten_allow_main_runtime_queued_calls=1062736;a.ccall=_f,a.keepRuntimeAlive=na,a.PThread=E,a.PThread=E,a.wasmMemory=It,a.ExitStatus=di;var ys;function di(l){this.name="ExitStatus",this.message="Program terminated with exit("+l+")",this.status=l}var Sp=!1;ci=function l(){ys||ma(),ys||(ci=l)};function Ip(l){var u=a._main,d=0,p=0;try{var _=u(d,p);return zl(_,!0),_}catch(S){return Yc(S)}finally{Sp=!0}}function ma(l){if(l=l||b,ln>0)return;if(x){f(a),Pc(),postMessage({cmd:"loaded"});return}if(If(),ln>0)return;function u(){ys||(ys=!0,a.calledRun=!0,!ea&&(Pc(),Af(),f(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),jl&&Ip(l),xf()))}a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),u()},1)):u()}a.run=ma;function zl(l,u){if(ai=l,!u&&x)throw Xc(l),"unwind";Ap(l)}function Ap(l){ai=l,na()||(E.terminateAllThreads(),a.onExit&&a.onExit(l),ea=!0),J(l,new di(l))}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();var jl=!0;return a.noInitialRun&&(jl=!1),ma(),t.ready}})(),of=_y;var Go=class{constructor(t,e){this._bindings=t,this._conn=e}close(){this._bindings.disconnect(this._conn)}useUnsafe(t){return t(this._bindings,this._conn)}query(t){let e=this._bindings.runQuery(this._conn,t),n=Ot.from(e);return console.assert(n.isSync()),console.assert(n.isFile()),new Bt(n)}send(t){let e=this._bindings.sendQuery(this._conn,t),n=new Ko(this._bindings,this._conn,e),i=Ot.from(n);return console.assert(i.isSync()),console.assert(i.isStream()),i}getTableNames(t){return this._bindings.getTableNames(this._conn,t)}prepare(t){let e=this._bindings.createPrepared(this._conn,t);return new _c(this._bindings,this._conn,e)}createScalarFunction(t,e,n){this._bindings.createScalarFunction(this._conn,t,e,n)}insertArrowTable(t,e){let n=new wr;n.writeAll(t);let i=n.toUint8Array(!0);this.insertArrowFromIPCStream(i,e)}insertArrowFromIPCStream(t,e){this._bindings.insertArrowFromIPCStream(this._conn,t,e)}insertCSVFromPath(t,e){this._bindings.insertCSVFromPath(this._conn,t,e)}insertJSONFromPath(t,e){this._bindings.insertJSONFromPath(this._conn,t,e)}},Ko=class{constructor(t,e,n){this.bindings=t;this.conn=e;this.header=n;this._first=!0,this._depleted=!1}next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let t=this.bindings.fetchQueryResults(this.conn);return this._depleted=t.length==0,{done:this._depleted,value:t}}[Symbol.iterator](){return this}},_c=class{constructor(t,e,n){this.bindings=t,this.connectionId=e,this.statementId=n}close(){this.bindings.closePrepared(this.connectionId,this.statementId)}query(...t){let e=this.bindings.runPrepared(this.connectionId,this.statementId,t),n=Ot.from(e);return console.assert(n.isSync()),console.assert(n.isFile()),new Bt(n)}send(...t){let e=this.bindings.sendPrepared(this.connectionId,this.statementId,t),n=new Ko(this.bindings,this.connectionId,e),i=Ot.from(n);return console.assert(i.isSync()),console.assert(i.isStream()),i}};var lf=new TextEncoder,af=new TextDecoder("utf-8");function yc(r,t,e){let n=lf.encode(e),i=r._malloc(n.byteLength),s=r.HEAPU8.subarray(i,i+n.byteLength);s.set(n),r.HEAPF64[(t>>3)+0]=1,r.HEAPF64[(t>>3)+1]=i,r.HEAPF64[(t>>3)+2]=s.byteLength}function gc(r){switch(r){case"UINT8":case"INT8":return 1;case"INT32":case"FLOAT":return 4;case"INT64":case"UINT64":case"DOUBLE":case"VARCHAR":return 8;default:return 0}}function bc(r,t,e,n){let i=r.HEAPU8.subarray(t,t+n*gc(e));switch(e){case"UINT8":return new Uint8Array(i.buffer,i.byteOffset,n);case"INT8":return new Int8Array(i.buffer,i.byteOffset,n);case"INT32":return new Int32Array(i.buffer,i.byteOffset,n);case"FLOAT":return new Float32Array(i.buffer,i.byteOffset,n);case"DOUBLE":return new Float64Array(i.buffer,i.byteOffset,n);case"VARCHAR":return new Float64Array(i.buffer,i.byteOffset,n);default:return new Array(0)}}function cf(r,t,e){let n=r.HEAPU8.subarray(t,t+e);return new Uint8Array(n.buffer,n.byteOffset,e)}function Jo(r,t,e){let n=r.HEAPU8.subarray(t,t+e*8);return new Float64Array(n.buffer,n.byteOffset,e)}function uf(r,t,e,n,i,s,o,c){try{let a=r._udfFunctions.get(n);if(!a){yc(t,e,"Unknown UDF with id: "+n);return}let f=af.decode(t.HEAPU8.subarray(i,i+s)),m=JSON.parse(f),y=Jo(t,o,c/8),b=Q=>{var te;let Nt=null;switch(Q.validityBuffer!==void 0&&(Nt=cf(t,y[Q.validityBuffer],m.rows)),Q.physicalType){case"VARCHAR":{if(Q.dataBuffer===null||Q.dataBuffer===void 0)throw new Error("malformed data view, expected data buffer for VARCHAR argument");if(Q.lengthBuffer===null||Q.lengthBuffer===void 0)throw new Error("malformed data view, expected data length buffer for VARCHAR argument");let Yt=bc(t,y[Q.dataBuffer],Q.physicalType,m.rows),Xt=[],Pt=Jo(t,y[Q.lengthBuffer],m.rows);for(let ut=0;ut<m.rows;++ut){if(Nt!=null&&!Nt[ut]){Xt.push(null);continue}let dt=t.HEAPU8.subarray(Yt[ut],Yt[ut]+Pt[ut]),rr=af.decode(dt);Xt.push(rr)}return ut=>Xt[ut]}case"STRUCT<?>":{let Yt={},Xt=[];for(let Pt=0;Pt<(((te=Q.children)==null?void 0:te.length)||0);++Pt){let ut=Q.children[Pt],dt=b(ut);Xt.push(rr=>{Yt[ut.name]=dt(rr)})}return Nt!=null?Pt=>{if(!Nt[Pt])return null;for(let ut of Xt)ut(Pt);return Yt}:Pt=>{for(let ut of Xt)ut(Pt);return Yt}}default:{if(Q.dataBuffer===void 0)throw new Error("malformed data view, expected data buffer for argument of type: "+Q.physicalType);let Yt=bc(t,y[Q.dataBuffer],Q.physicalType,m.rows);return Nt!=null?Xt=>Nt[Xt]?Yt[Xt]:null:Xt=>Yt[Xt]}}},I=[];for(let Q=0;Q<m.args.length;++Q)I.push(b(m.args[Q]));let J=m.rows*gc(m.ret.physicalType),Z=t._malloc(J),at=bc(t,Z,m.ret.physicalType,m.rows),st=t._malloc(m.rows),x=cf(t,st,m.rows);if(at.length==0||x.length==0){yc(t,e,"Can't create physical arrays for result");return}let St=at;m.ret.physicalType=="VARCHAR"&&(St=new Array(m.rows));let Tn=[];for(let Q=0;Q<m.args.length;++Q)Tn.push(null);for(let Q=0;Q<m.rows;++Q){for(let te=0;te<m.args.length;++te)Tn[te]=I[te](Q);let Nt=a.func(...Tn);St[Q]=Nt,x[Q]=Nt==null?0:1}let an=0;switch(m.ret.physicalType){case"VARCHAR":{let Q=new Array(0);an=t._malloc(m.rows*gc("DOUBLE"));let Nt=Jo(t,an,m.rows),te=0;for(let ut=0;ut<m.rows;++ut){let dt=lf.encode(St[ut]||"");Q.push(dt),Nt[ut]=dt.length,te+=dt.length}let Yt=t._malloc(te),Xt=t.HEAPU8.subarray(Yt,Yt+te),Pt=0;for(let ut=0;ut<m.rows;++ut){at[ut]=Pt;let dt=Q[ut];Xt.subarray(Pt,Pt+dt.length).set(dt),Pt+=dt.length}}}let is=3*8,cn=t._malloc(is),si=Jo(t,cn,3);si[0]=Z,si[1]=st,si[2]=an,t.HEAPF64[(e>>3)+0]=0,t.HEAPF64[(e>>3)+1]=cn,t.HEAPF64[(e>>3)+2]=0}catch(a){yc(t,e,a.toString())}}function by(){let r=new TextDecoder;return t=>(typeof SharedArrayBuffer<"u"&&t.buffer instanceof SharedArrayBuffer&&(t=new Uint8Array(t)),r.decode(t))}var gy=by();function vr(r,t){r.ccall("duckdb_web_fail_with",null,["string"],[t])}function ii(r,t,e){let n=r.HEAPU8.subarray(t,t+e),i=new Uint8Array(new ArrayBuffer(n.byteLength));return i.set(n),i}function W(r,t,e){return gy(r.HEAPU8.subarray(t,t+e))}function ct(r,t,e,n){let i=r.stackSave(),s=r.stackAlloc(3*8);e.unshift("number"),n.unshift(s),r.ccall(t,null,e,n);let o=r.HEAPF64[(s>>3)+0],c=r.HEAPF64[(s>>3)+1],a=r.HEAPF64[(s>>3)+2];return r.stackRestore(i),[o,c,a]}function vt(r){r.ccall("duckdb_web_clear_response",null,[],[])}var qo=class{constructor(t){let e=new Float64Array(t.buffer,t.byteOffset,t.byteLength/8),n=new Uint8Array(new ArrayBuffer(t.byteLength));n.set(t.subarray(7*8)),this.totalFileReadsCold=e[0],this.totalFileReadsAhead=e[1],this.totalFileReadsCached=e[2],this.totalFileWrites=e[3],this.totalPageAccesses=e[4],this.totalPageLoads=e[5],this.blockSize=e[6],this.blockStats=n}getBlockStats(t,e){return e=e||{file_reads_cold:0,file_reads_ahead:0,file_reads_cached:0,file_writes:0,page_accesses:0,page_loads:0},e.file_writes=this.blockStats[t*3+0]&15,e.file_reads_cold=this.blockStats[t*3+0]>>4,e.file_reads_ahead=this.blockStats[t*3+1]&15,e.file_reads_cached=this.blockStats[t*3+1]>>4,e.page_accesses=this.blockStats[t*3+1]&15,e.page_loads=this.blockStats[t*3+1]>>4,e}};var wy=new TextEncoder;var Zo=class{constructor(t,e){this._instance=null;this._initPromise=null;this._initPromiseResolver=()=>{};this.onInstantiationProgress=[];this._logger=t,this._runtime=e,this._nextUDFId=1}get logger(){return this._logger}get mod(){return this._instance}get pthread(){return this.mod.PThread||null}async instantiate(t=e=>{}){return this._instance!=null?this:(this._initPromise!=null&&(this.onInstantiationProgress.push(t),await this._initPromise),this._initPromise=new Promise(e=>{this._initPromiseResolver=e}),this.onInstantiationProgress=[t],this._instance=await this.instantiateImpl({print:console.log.bind(console),printErr:console.log.bind(console),onRuntimeInitialized:this._initPromiseResolver}),await this._initPromise,this._initPromise=null,this.onInstantiationProgress=this.onInstantiationProgress.filter(e=>e!=t),this)}open(t){let[e,n,i]=ct(this.mod,"duckdb_web_open",["string"],[JSON.stringify(t)]);if(e!==0)throw new Error(W(this.mod,n,i));vt(this.mod)}reset(){let[t,e,n]=ct(this.mod,"duckdb_web_reset",[],[]);if(t!==0)throw new Error(W(this.mod,e,n));vt(this.mod)}getVersion(){let[t,e,n]=ct(this.mod,"duckdb_web_get_version",[],[]);if(t!==0)throw new Error(W(this.mod,e,n));let i=W(this.mod,e,n);return vt(this.mod),i}getFeatureFlags(){return this.mod.ccall("duckdb_web_get_feature_flags","number",[],[])}tokenize(t){let[e,n,i]=ct(this.mod,"duckdb_web_tokenize",["string"],[t]);if(e!==0)throw new Error(W(this.mod,n,i));let s=W(this.mod,n,i);return vt(this.mod),JSON.parse(s)}connect(){let t=this.mod.ccall("duckdb_web_connect","number",[],[]);return new Go(this,t)}disconnect(t){if(this.mod.ccall("duckdb_web_disconnect",null,["number"],[t]),this.pthread)for(let e of[...this.pthread.runningWorkers,...this.pthread.unusedWorkers])e.postMessage({cmd:"dropUDFFunctions",connectionId:t})}runQuery(t,e){let[n,i,s]=ct(this.mod,"duckdb_web_query_run",["number","string"],[t,e]);if(n!==0)throw new Error(W(this.mod,i,s));let o=ii(this.mod,i,s);return vt(this.mod),o}sendQuery(t,e){let[n,i,s]=ct(this.mod,"duckdb_web_query_send",["number","string"],[t,e]);if(n!==0)throw new Error(W(this.mod,i,s));let o=ii(this.mod,i,s);return vt(this.mod),o}fetchQueryResults(t){let[e,n,i]=ct(this.mod,"duckdb_web_query_fetch_results",["number"],[t]);if(e!==0)throw new Error(W(this.mod,n,i));let s=ii(this.mod,n,i);return vt(this.mod),s}getTableNames(t,e){let[n,i,s]=ct(this.mod,"duckdb_web_get_tablenames",["number","string"],[t,e]);if(n!==0)throw new Error(W(this.mod,i,s));let o=W(this.mod,i,s);return vt(this.mod),JSON.parse(o)}createScalarFunction(t,e,n,i){let s={functionId:this._nextUDFId,name:e,returnType:ni(n)},o={functionId:s.functionId,connectionId:t,name:e,returnType:n,func:i};this._nextUDFId+=1;let[c,a,f]=ct(this.mod,"duckdb_web_udf_scalar_create",["number","string"],[t,JSON.stringify(s)]);if(c!==0)throw new Error(W(this.mod,a,f));if(vt(this.mod),globalThis.DUCKDB_RUNTIME._udfFunctions=(globalThis.DUCKDB_RUNTIME._udfFunctions||new Map).set(o.functionId,o),this.pthread)for(let m of[...this.pthread.runningWorkers,...this.pthread.unusedWorkers])m.postMessage({cmd:"registerUDFFunction",udf:o})}createPrepared(t,e){let[n,i,s]=ct(this.mod,"duckdb_web_prepared_create",["number","string"],[t,e]);if(n!==0)throw new Error(W(this.mod,i,s));return vt(this.mod),i}closePrepared(t,e){let[n,i,s]=ct(this.mod,"duckdb_web_prepared_close",["number","number"],[t,e]);if(n!==0)throw new Error(W(this.mod,i,s));vt(this.mod)}runPrepared(t,e,n){let[i,s,o]=ct(this.mod,"duckdb_web_prepared_run",["number","number","string"],[t,e,JSON.stringify(n)]);if(i!==0)throw new Error(W(this.mod,s,o));let c=ii(this.mod,s,o);return vt(this.mod),c}sendPrepared(t,e,n){let[i,s,o]=ct(this.mod,"duckdb_web_prepared_send",["number","number","string"],[t,e,JSON.stringify(n)]);if(i!==0)throw new Error(W(this.mod,s,o));let c=ii(this.mod,s,o);return vt(this.mod),c}insertArrowFromIPCStream(t,e,n){if(e.length==0)return;let i=this.mod._malloc(e.length);this.mod.HEAPU8.subarray(i,i+e.length).set(e);let o=n?JSON.stringify(n):"",[c,a,f]=ct(this.mod,"duckdb_web_insert_arrow_from_ipc_stream",["number","number","number","string"],[t,i,e.length,o]);if(c!==0)throw new Error(W(this.mod,a,f))}insertCSVFromPath(t,e,n){if(n.columns!==void 0){n.columnsFlat=[];for(let f in n.columns)n.columnsFlat.push(Yo(f,n.columns[f]))}let i=Vr({},n);i.columns=i.columnsFlat,delete i.columnsFlat;let s=JSON.stringify(i),[o,c,a]=ct(this.mod,"duckdb_web_insert_csv_from_path",["number","string","string"],[t,e,s]);if(o!==0)throw new Error(W(this.mod,c,a))}insertJSONFromPath(t,e,n){if(n.columns!==void 0){n.columnsFlat=[];for(let f in n.columns)n.columnsFlat.push(Yo(f,n.columns[f]))}let i=Vr({},n);i.columns=i.columnsFlat,delete i.columnsFlat;let s=JSON.stringify(i),[o,c,a]=ct(this.mod,"duckdb_web_insert_json_from_path",["number","string","string"],[t,e,s]);if(o!==0)throw new Error(W(this.mod,c,a))}globFiles(t){let[e,n,i]=ct(this.mod,"duckdb_web_fs_glob_file_infos",["string"],[t]);if(e!==0)throw new Error(W(this.mod,n,i));let s=W(this.mod,n,i);vt(this.mod);let o=JSON.parse(s);return o==null?[]:o}registerFileURL(t,e){e===void 0&&(e=t);let[n,i,s]=ct(this.mod,"duckdb_web_fs_register_file_url",["string","string","number"],[t,e,-1]);if(n!==0)throw new Error(W(this.mod,i,s));vt(this.mod)}registerFileText(t,e){let n=wy.encode(e);this.registerFileBuffer(t,n)}registerFileBuffer(t,e){let n=this.mod._malloc(e.length);this.mod.HEAPU8.subarray(n,n+e.length).set(e);let[s,o,c]=ct(this.mod,"duckdb_web_fs_register_file_buffer",["string","number","number"],[t,n,e.length]);if(s!==0)throw new Error(W(this.mod,o,c));vt(this.mod)}registerFileHandle(t,e){let[n,i,s]=ct(this.mod,"duckdb_web_fs_register_file_url",["string","string","number"],[t,t,-1]);if(n!==0)throw new Error(W(this.mod,i,s));if(vt(this.mod),globalThis.DUCKDB_RUNTIME._files=(globalThis.DUCKDB_RUNTIME._files||new Map).set(t,e),this.pthread){for(let o of this.pthread.runningWorkers)o.postMessage({cmd:"registerFileHandle",fileName:t,fileHandle:e});for(let o of this.pthread.unusedWorkers)o.postMessage({cmd:"dropFileHandle",fileName:t})}}dropFile(t){let[e,n,i]=ct(this.mod,"duckdb_web_fs_drop_file",["string"],[t]);if(e!==0)throw new Error(W(this.mod,n,i));vt(this.mod)}dropFiles(){let[t,e,n]=ct(this.mod,"duckdb_web_fs_drop_files",[],[]);if(t!==0)throw new Error(W(this.mod,e,n));vt(this.mod)}flushFiles(){this.mod.ccall("duckdb_web_flush_files",null,[],[])}copyFileToPath(t,e){let[n,i,s]=ct(this.mod,"duckdb_web_copy_file_to_path",["string","string"],[t,e]);if(n!==0)throw new Error(W(this.mod,i,s));vt(this.mod)}copyFileToBuffer(t){let[e,n,i]=ct(this.mod,"duckdb_web_copy_file_to_buffer",["string"],[t]);if(e!==0)throw new Error(W(this.mod,n,i));let s=this.mod.HEAPU8.subarray(n,n+i),o=new Uint8Array(s.length);return o.set(s),vt(this.mod),o}collectFileStatistics(t,e){let[n,i,s]=ct(this.mod,"duckdb_web_collect_file_stats",["string","boolean"],[t,e]);if(n!==0)throw new Error(W(this.mod,i,s))}exportFileStatistics(t){let[e,n,i]=ct(this.mod,"duckdb_web_export_file_stats",["string"],[t]);if(e!==0)throw new Error(W(this.mod,n,i));return new qo(this.mod.HEAPU8.subarray(n,n+i))}};var Qo=class extends Zo{constructor(e,n,i,s){super(e,n);this.mainModuleURL=i,this.pthreadWorkerURL=s}locateFile(e,n){if(e.endsWith(".wasm"))return this.mainModuleURL;if(e.endsWith(".worker.js")){if(!this.pthreadWorkerURL)throw new Error("Missing DuckDB worker URL!");return this.pthreadWorkerURL}throw new Error(`WASM instantiation requested unexpected file: prefix=${n} path=${e}`)}instantiateWasm(e,n){globalThis.DUCKDB_RUNTIME=this._runtime;let i=this.onInstantiationProgress;if(typeof TransformStream=="function"&&ReadableStream.prototype.pipeThrough&&WebAssembly.instantiateStreaming){let o=(async()=>{var Z;let c=new Request(this.mainModuleURL),a=await fetch(c),f=a.headers.get("content-length"),m=f&&parseInt(f,10)||0,y=new Date,b={startedAt:y,updatedAt:y,bytesTotal:m||0,bytesLoaded:0},I={transform(at,st){b.bytesLoaded+=at.byteLength;let x=new Date;if(x.getTime()-b.updatedAt.getTime()<20){b.updatedAt=x,st.enqueue(at);return}for(let St of i)St(b);st.enqueue(at)}},J=new TransformStream(I);return new Response((Z=a.body)==null?void 0:Z.pipeThrough(J),a)})();WebAssembly.instantiateStreaming(o,e).then(c=>{n(c.instance,c.module)})}else{let s=new XMLHttpRequest,o=this.mainModuleURL,c=new Date,a={startedAt:c,updatedAt:c,bytesTotal:0,bytesLoaded:0};s.open("GET",o),s.responseType="arraybuffer",s.onerror=f=>{throw this.logger.log({timestamp:new Date,level:4,origin:3,topic:5,event:2,value:"Failed to load WASM: "+f}),new Error(f.toString())},s.onprogress=f=>{a.bytesTotal=f.total,a.bytesLoaded=f.loaded;let m=new Date;if(m.getTime()-a.updatedAt.getTime()<20){a.updatedAt=m;return}for(let y of i)y(a)},s.onload=()=>{WebAssembly.instantiate(s.response,e).then(f=>{n(f.instance,f.module)}).catch(f=>{throw this.logger.log({timestamp:new Date,level:4,origin:3,topic:5,event:2,value:"Failed to instantiate WASM: "+f}),new Error(f)})},s.send()}return[]}};var ta=class extends Qo{constructor(t,e,n,i=null){super(t,e,n,i)}instantiateImpl(t){return of(pi(Vr({},t),{instantiateWasm:this.instantiateWasm.bind(this),locateFile:this.locateFile.bind(this)}))}};var nn=Gl(df()),ff=function(r,t,e){var n;if((n=r==null?void 0:r.endpoint)!=null&&n.startsWith("http")){let i=`${r==null?void 0:r.endpoint}`,s=i.indexOf("://")+3;return i.substring(s)}else return r!=null&&r.endpoint?`${e}.${r==null?void 0:r.endpoint}`:`${e}.s3.amazonaws.com`};function vy(r,t,e){var i,s,o,c;let n=hf(t);return{url:n.path,query:"",host:ff(r,t,n.bucket),region:(i=r==null?void 0:r.region)!=null?i:"",service:"s3",method:e,accessKeyId:(s=r==null?void 0:r.accessKeyId)!=null?s:"",secretAccessKey:(o=r==null?void 0:r.secretAccessKey)!=null?o:"",sessionToken:(c=r==null?void 0:r.sessionToken)!=null?c:"",dateNow:new Date().toISOString().replace(/-/g,"").split("T")[0],datetimeNow:new Date().toISOString().replace(/-/g,"").replace(/:/g,"").split(".")[0]+"Z"}}function Sy(r,t=!1){let e="0123456789ABCDEF",n="";for(let i=0;i<r.length;i++){let s=r[i];s>="A"&&s<="Z"||s>="a"&&s<="z"||s>="0"&&s<="9"||s=="_"||s=="-"||s=="~"||s=="."?n+=s:s=="/"?t?n+="%2F":n+=s:(n+="%",n+=e[s.charCodeAt(0)>>4],n+=e[s.charCodeAt(0)&15])}return n}function Iy(r,t=null){var J;let e=(J=t==null?void 0:t.contentHash)!=null?J:"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",n=new Map;n.set("x-amz-date",r.datetimeNow),n.set("x-amz-content-sha256",e),r.sessionToken&&n.set("x-amz-security-token",r.sessionToken);let i="";t!=null&&t.contentType&&(i+="content-type;"),i+="host;x-amz-content-sha256;x-amz-date",r.sessionToken&&(i+=";x-amz-security-token");let s=r.method+`
`+Sy(r.url)+`
`+r.query;t!=null&&t.contentType&&(s+=`
content-type:`+(t==null?void 0:t.contentType)),s+=`
host:`+r.host+`
x-amz-content-sha256:`+e+`
x-amz-date:`+r.datetimeNow,r.sessionToken&&r.sessionToken.length>0&&(s+=`
x-amz-security-token:`+r.sessionToken),s+=`

`+i+`
`+e;let o=(0,nn.sha256)(s),c=`AWS4-HMAC-SHA256
`+r.datetimeNow+`
`+r.dateNow+"/"+r.region+"/"+r.service+`/aws4_request
`+o,a="AWS4"+r.secretAccessKey,f=nn.sha256.hmac.arrayBuffer(a,r.dateNow),m=nn.sha256.hmac.arrayBuffer(f,r.region),y=nn.sha256.hmac.arrayBuffer(m,r.service),b=nn.sha256.hmac.arrayBuffer(y,"aws4_request"),I=nn.sha256.hmac(b,c);return n.set("Authorization","AWS4-HMAC-SHA256 Credential="+r.accessKeyId+"/"+r.dateNow+"/"+r.region+"/"+r.service+"/aws4_request, SignedHeaders="+i+", Signature="+I),n}var Ay=function(r,t,e,n=null,i=null){let s=vy(r,t,e),o={contentType:n,contentHash:i?nn.sha256.hex(i):null};return Iy(s,o)};function sn(r,t,e,n,i=null,s=null){((t==null?void 0:t.accessKeyId)||(t==null?void 0:t.sessionToken))&&(Ay(t,e,n,i,s).forEach((c,a)=>{r.setRequestHeader(a,c)}),i&&r.setRequestHeader("content-type",i))}function hf(r){if(r.indexOf("s3://")!=0)throw new Error("URL needs to start with s3://");let t=r.indexOf("/",5);if(t==-1)throw new Error("URL needs to contain a '/' after the host");let e=r.substring(5,t);if(!e)throw new Error("URL needs to contain a bucket name");let n=r.substring(t);if(!n)throw new Error("URL needs to contain key");return{bucket:e,path:n}}function on(r,t){var n;let e=hf(t);return(n=r==null?void 0:r.endpoint)!=null&&n.startsWith("http")?`${r==null?void 0:r.endpoint}/${e.bucket}`+e.path:"https://"+ff(r,t,e.bucket)+e.path}var ht={_files:new Map,_fileInfoCache:new Map,_udfFunctions:new Map,_globalFileInfo:null,getFileInfo(r,t){try{let e=ht._fileInfoCache.get(t),[n,i,s]=ct(r,"duckdb_web_fs_get_file_info_by_id",["number","number"],[t,(e==null?void 0:e.cacheEpoch)||0]);if(n!==0)return null;if(s===0)return e;let o=W(r,i,s);vt(r);let c=JSON.parse(o);if(c==null)return null;let a=pi(Vr({},c),{blob:null});return ht._fileInfoCache.set(t,a),a}catch(e){return null}},getGlobalFileInfo(r){var t;try{let[e,n,i]=ct(r,"duckdb_web_get_global_file_info",["number"],[((t=ht._globalFileInfo)==null?void 0:t.cacheEpoch)||0]);if(e!==0)return null;if(i===0)return ht._globalFileInfo;let s=W(r,n,i);vt(r);let o=JSON.parse(s);return o==null?null:(ht._globalFileInfo=pi(Vr({},o),{blob:null}),ht._globalFileInfo)}catch(e){return null}},testPlatformFeature:(r,t)=>{switch(t){case 1:return typeof BigInt64Array<"u";default:return console.warn(`test for unknown feature: ${t}`),!1}},openFile:(r,t,e)=>{var n;try{ht._fileInfoCache.delete(t);let i=ht.getFileInfo(r,t);switch(i==null?void 0:i.dataProtocol){case 3:case 4:{if(e&1&&e&2)throw new Error(`Opening file ${i.fileName} failed: cannot open file with both read and write flags set`);if(e&32)throw new Error(`Opening file ${i.fileName} failed: appending to HTTP/S3 files is not supported`);if(e&2){let o=new XMLHttpRequest;if(i.dataProtocol==4?(o.open("HEAD",on(i.s3Config,i.dataUrl),!1),sn(o,i.s3Config,i.dataUrl,"HEAD")):o.open("HEAD",i.dataUrl,!1),o.send(null),o.status!=200&&o.status!=404)throw new Error(`Opening file ${i.fileName} failed: Unexpected return status from server (${o.status})`);if(o.status==404&&!(e&8||e&16))throw new Error(`Opening file ${i.fileName} failed: Cannot write to non-existent file without FILE_FLAGS_FILE_CREATE or FILE_FLAGS_FILE_CREATE_NEW flag.`);let c=r._malloc(1),a=new Uint8Array;r.HEAPU8.set(a,c);let f=r._malloc(2*8);return r.HEAPF64[(f>>3)+0]=1,r.HEAPF64[(f>>3)+1]=c,f}else if(e!=1)throw new Error(`Opening file ${i.fileName} failed: unsupported file flags: ${e}`);let s=null;try{let o=new XMLHttpRequest;i.dataProtocol==4?(o.open("HEAD",on(i.s3Config,i.dataUrl),!1),sn(o,i.s3Config,i.dataUrl,"HEAD")):o.open("HEAD",i.dataUrl,!1),o.setRequestHeader("Range","bytes=0-"),o.send(null);let c=o.getResponseHeader("Content-Length");if(o.status==206&&c!==null){let a=r._malloc(16);return r.HEAPF64[(a>>3)+0]=+c,r.HEAPF64[(a>>3)+1]=0,a}}catch(o){s=o,console.warn(`HEAD request with range header failed: ${o}`)}if(i.allowFullHttpReads){console.warn(`falling back to full HTTP read for: ${i.dataUrl}`);let o=new XMLHttpRequest;if(i.dataProtocol==4?(o.open("GET",on(i.s3Config,i.dataUrl),!1),sn(o,i.s3Config,i.dataUrl,"GET")):o.open("GET",i.dataUrl,!1),o.responseType="arraybuffer",o.send(null),o.status==200){let c=r._malloc(o.response.byteLength),a=new Uint8Array(o.response,0,o.response.byteLength);r.HEAPU8.set(a,c);let f=r._malloc(2*8);return r.HEAPF64[(f>>3)+0]=o.response.byteLength,r.HEAPF64[(f>>3)+1]=c,f}}if(s!=null)throw new Error(`Reading file ${i.fileName} failed with error: ${s}`);return 0}case 1:{let s=(n=ht._files)==null?void 0:n.get(i.fileName);if(s){let a=r._malloc(16);return r.HEAPF64[(a>>3)+0]=s.size,r.HEAPF64[(a>>3)+1]=0,a}console.warn(`Buffering missing file: ${i.fileName}`);let o=r._malloc(2*8),c=r._malloc(1);return r.HEAPF64[(o>>3)+0]=1,r.HEAPF64[(o>>3)+1]=c,o}}}catch(i){console.error(i.toString()),vr(r,i.toString())}return 0},glob:(r,t,e)=>{try{let n=W(r,t,e);if(n.startsWith("http")||n.startsWith("s3://")){let i=new XMLHttpRequest;if(n.startsWith("s3://")){let s=ht.getGlobalFileInfo(r);i.open("HEAD",on(s==null?void 0:s.s3Config,n),!1),sn(i,s==null?void 0:s.s3Config,n,"HEAD")}else i.open("HEAD",n,!1);if(i.send(null),i.status!=200&&i.status!==206){vr(r,`HEAD request failed: ${n}`);return}r.ccall("duckdb_web_fs_glob_add_path",null,["string"],[n])}}catch(n){return vr(r,n.toString()),0}},checkFile:(r,t,e)=>{try{let n=W(r,t,e);if(n.startsWith("http")||n.startsWith("s3://")){let i=new XMLHttpRequest;if(n.startsWith("s3://")){let s=ht.getGlobalFileInfo(r);i.open("HEAD",on(s==null?void 0:s.s3Config,n),!1),sn(i,s==null?void 0:s.s3Config,n,"HEAD")}else i.open("HEAD",n,!1);return i.send(null),i.status==206||i.status==200}}catch(n){return!1}return!1},syncFile:(r,t)=>{},closeFile:(r,t)=>{let e=ht.getFileInfo(r,t);switch(ht._fileInfoCache.delete(t),e==null?void 0:e.dataProtocol){case 3:case 4:break;case 1:return}},truncateFile:(r,t,e)=>{let n=ht.getFileInfo(r,t);switch(n==null?void 0:n.dataProtocol){case 3:vr(r,"Cannot truncate a http file");return;case 4:vr(r,"Cannot truncate an s3 file");return;case 1:vr(r,"truncateFile not implemented");return}return 0},readFile(r,t,e,n,i){var s;try{let o=ht.getFileInfo(r,t);switch(o==null?void 0:o.dataProtocol){case 3:case 4:{if(!o.dataUrl)throw new Error(`Missing data URL for file ${t}`);try{let c=new XMLHttpRequest;if(o.dataProtocol==4?(c.open("GET",on(o==null?void 0:o.s3Config,o.dataUrl),!1),sn(c,o==null?void 0:o.s3Config,o.dataUrl,"GET")):c.open("GET",o.dataUrl,!1),c.responseType="arraybuffer",c.setRequestHeader("Range",`bytes=${i}-${i+n-1}`),c.send(null),c.status==206||c.status==200&&n==c.response.byteLength&&i==0){let a=new Uint8Array(c.response,0,Math.min(c.response.byteLength,n));return r.HEAPU8.set(a,e),a.byteLength}else throw c.status==200?new Error(`Range request for ${o.dataUrl} did not return a partial response: ${c.status} "${c.statusText}"`):new Error(`Range request for ${o.dataUrl} did returned non-success status: ${c.status} "${c.statusText}"`)}catch(c){throw new Error(`Range request for ${o.dataUrl} failed with error: ${c}"`)}}case 1:{let c=(s=ht._files)==null?void 0:s.get(o.fileName);if(!c)throw new Error(`No handle available for file: ${o.fileName}`);let a=c.slice(i,i+n),f=new Uint8Array(new FileReaderSync().readAsArrayBuffer(a));return r.HEAPU8.set(f,e),f.byteLength}}return 0}catch(o){return vr(r,o.toString()),0}},writeFile:(r,t,e,n,i)=>{let s=ht.getFileInfo(r,t);switch(s==null?void 0:s.dataProtocol){case 3:return vr(r,"Cannot write to HTTP file"),0;case 4:{let o=r.HEAPU8.subarray(e,e+n),c=new XMLHttpRequest;return c.open("PUT",on(s==null?void 0:s.s3Config,s.dataUrl),!1),sn(c,s==null?void 0:s.s3Config,s.dataUrl,"PUT","",o),c.send(o),n}case 1:return vr(r,"writefile not implemented"),0}return 0},getLastFileModificationTime:(r,t)=>{var n;let e=ht.getFileInfo(r,t);switch(e==null?void 0:e.dataProtocol){case 1:{if(!((n=ht._files)==null?void 0:n.get(e.fileName)))throw Error(`No handle available for file: ${e.fileName}`);return 0}case 3:case 4:return new Date().getTime()}return 0},checkDirectory:(r,t,e)=>{let n=W(r,t,e);return console.log(`checkDirectory: ${n}`),!1},createDirectory:(r,t,e)=>{let n=W(r,t,e);console.log(`createDirectory: ${n}`)},removeDirectory:(r,t,e)=>{let n=W(r,t,e);console.log(`removeDirectory: ${n}`)},listDirectoryEntries:(r,t,e)=>{let n=W(r,t,e);return console.log(`listDirectoryEntries: ${n}`),!1},moveFile:(r,t,e,n,i)=>{var a,f;let s=W(r,t,e),o=W(r,n,i),c=(a=ht._files)==null?void 0:a.get(s);c!==void 0&&(ht._files.delete(c),ht._files.set(o,c));for(let[m,y]of((f=ht._fileInfoCache)==null?void 0:f.entries())||[])if(y.dataUrl==s){ht._fileInfoCache.delete(m);break}return!0},removeFile:(r,t,e)=>{},callScalarUDF:(r,t,e,n,i,s,o)=>{uf(ht,r,t,e,n,i,s,o)}};var wc=class extends Xo{postMessage(t,e){globalThis.postMessage(t,e)}async instantiate(t,e,n){return await new ta(this,ht,t,e).instantiate(n)}};function pf(){let r=new wc;globalThis.onmessage=async t=>{await r.onMessage(t.data)}}pf();return Up(xy);})();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */
//# sourceMappingURL=duckdb-browser-coi.worker.js.map
